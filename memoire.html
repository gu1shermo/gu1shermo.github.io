<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  
  <title>main_test</title>
  
</head>
<body>

  <input type="checkbox" id="toc-toggle" class="toc-toggle">
  <label for="toc-toggle">☰ Table des Matières</label>

  <nav class="toc">
      
      <div id="toc-content"></div>
  </nav>

  


<!--  
  <div class="titlepage">
    <div class="center">
      <p><span><strong>Université Paris 8</strong></span><br />
        <span><strong>Master Création Numérique</strong></span><br />
        <span>parcours: <em>Arts et Technologies de l’Image
          Virtuelle</em></span></p>
          <hr />
-->

<div class="memoire">
<div class="centered">
    <p class="title">
        <strong>Vers une interaction authentique entre
        <em>livecoders</em></strong><br>
        <em>Forward The Revolution</em>
    </p>
</div>

<hr />
<p><br />
</p>
<hr />

<div class="centered">
  <p class="author">
    Guillaume Cournet
  </p>
</div>



<hr />
<p><br />
</p>
<p><img src="./memoire/images/logos/ATI_LogoNoir02.png" style="width:90.0%"
alt="image" /> <br />
<span><strong>Mémoire de Master 2</strong></span></p>
</div>
</div>
<div class="titlepage">
<div class="flushleft">
<p><strong>Remerciements</strong></p>
</div>
<div class="flushleft">
<p>Ces remerciements font écho, d’une certaine manière, aux
<em>greetings</em><a href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a> de la <em>demoscene</em>.</p>
<p>Je tiens tout d’abord à exprimer mes sincères remerciements à
l’équipe pédagogique d’ATI pour son soutien et sa disponibilité tout au
long de mon parcours à ATI. Un merci particulier à Farès Belhadj pour
m’avoir donné l’opportunité d’assister à son cours de programmation
graphique en tant qu’auditeur libre. Grâce à ses explications claires et
détaillées, j’ai pu approfondir ma compréhension des concepts
mathématiques sous-jacents à la création d’une scène 3D. Un merci
particulier aussi à Alain Lioret pour m’avoir subtilement montré la voie
vers l’exploration de l’art numérique. Un grand merci à Jeff Jego pour
son soutien constant tout au long de cette année de M2, ainsi que pour
ses conseils avisés et pertinents auxquels a posteriori j’aurais dû
accorder plus d’attention.</p>
<p>Un énorme merci également à l’ensemble de ma promotion pour leur
bonne humeur et leur accueil chaleureux. Je tiens particulièrement à
adresser mes remerciements à Loïck pour son aide précieuse dans la
gestion du temps de rédaction de ce mémoire, ainsi qu’à Garvey pour son
« dématrixage » artistique.</p>
<p>Je ne saurais aussi passer sous silence l’apport essentiel d’Antoine
Boellinger, sans qui je n’aurais jamais découvert l’existence même des
<em>shaders</em>. Mes remerciements vont également à tous les membres du
Cookie Collective pour leur accueil bienveillant et leur partage de
connaissances. Je souhaite notamment exprimer ma reconnaissance envers
les animateurs d’atelier au Fuz : z0rg pour ses ateliers de <em>creative
coding</em>, Élie Gavoty pour ses sessions sur FoxDot, et Jules pour ses
enseignements sur SuperCollider. Je n’oublie pas non plus Pérégrine pour
son exigence mathématique et son dévouement dans la rédaction de la
précieuse documentation du wiki du Fuz.</p>
<p>Enfin, un grand merci à ma famille ainsi qu’à mon ami Nissim pour
leur soutien, leurs encouragements et leur implication dans la relecture
de ce mémoire, qui s’est avérée être indispensable.</p>
</div>
</div>
<div class="titlepage">
<div class="flushleft">
<p><strong>Préambule</strong></p>
</div>
<div class="flushleft">
<p>Le recours délibéré aux anglicismes mérite d’être souligné. Ces
termes anglais ont été sélectionnés pour leur précision et leur
pertinence dans le domaine du <em>live coding</em>. L’usage de ces
expressions étrangères s’inscrit dans le souhait de demeurer fidèle au
langage communément utilisé dans le milieu de la <em>demoscene</em>, où
l’influence de l’anglais est prépondérante. J’ai veillé à ce que ces
mots soient mis en <em>italique</em> dans le texte.</p>
<p>Par ailleurs, il me semblait important de préciser ma méthodologie
quant à l’utilisation de l’intelligence artificielle avec ChatGPT 3.5.
Cette dernière a été principalement sollicitée pour reformuler certains
paragraphes, tant du point de vue orthographique que du rythme des
phrases, et aussi dans le but d’éviter les répétitions. Cette
interaction avec l’IA peut être assimilée à un dialogue, similaire à une
partie de ping-pong, jusqu’à ce que le résultat satisfaisant soit
obtenu. En outre, j’ai également utilisé l’IA pour me suggérer des
titres de paragraphes lorsque j’étais en panne d’inspiration. Cependant,
j’ai également pris conscience des risques liés à la dépendance à l’IA.
À titre d’anecdote, dans le but d’économiser du temps, j’ai essayé de
résumer une vidéo d’une conférence portant sur l’histoire de la
<em>demoscene</em>, en fournissant à l’IA les sous-titres corrects de la
vidéo. Cependant, après avoir revu la vidéo ultérieurement, j’ai
constaté que l’IA ignorait des thèmes importants et mélangeait les dates
ainsi que les titres de <em>demos</em>. La leçon que j’en ai tirée est
qu’il est essentiel de toujours vérifier les informations produites par
l’IA, comme le souligne d’ailleurs l’interface de ChatGPT : <em>ChatGPT
can make mistakes. Consider checking important information</em>.</p>
</div>
</div>
<p> </p>
<p> </p>
<h1 id="introduction">Introduction</h1>
<p>Ma découverte du monde des <em>shaders</em> a été un véritable
tournant dans mon parcours. Préalablement à ma formation ATI, j’ai eu
l’opportunité d’acquérir une expérience précieuse en tant que
développeur au sein du département R&amp;D de Xilam Animation.</p>
<p>C’est grâce à mon mentor de l’époque, Antoine Boellinger, responsable
du <em>pipeline</em> et ancien d’ATI, que j’ai pris conscience de
l’existence même des <em>shaders</em>. Cette révélation a été pour moi
comme un choc électrique : la possibilité de créer des images à partir
des mathématiques m’a semblé magique et m’a profondément intrigué. Dès
lors, j’ai ressenti le besoin d’approfondir mes connaissances dans ce
domaine.</p>
<p>C’est au cours de la formation ATI que j’ai également eu
l’opportunité d’assister à une conférence du Cookie Collective à la
Gaîté Lyrique, expérience qui a été tout aussi marquante. Lors de cet
événement, j’ai été impressionné par la capacité des artistes à
improviser des visuels projetés sur grand écran, ainsi que par
l’utilisation de langages ésotériques pour produire de la musique. Ce
spectacle a éveillé en moi le désir de pouvoir un jour les imiter.</p>
<p>Depuis maintenant un peu plus d’un an, j’ai eu la chance d’assister à
des ateliers animés par z0rg au <em>hackerspace</em><a href="#fn2"
class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> le
Fuz. Grâce à son approche pédagogique qui va droit au but, j’ai pu
acquérir une grande partie de mes connaissances actuelles sur les
<em>shaders</em>. Ces ateliers m’ont également permis de découvrir une
communauté particulièrement généreuse, tant sur le plan humain que sur
le plan du partage des connaissances, et m’ont sensibilisé à l’esprit de
l’<em>open source</em><a href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>.</p>
<figure id="intro07">
<a href="./memoire/images/introduction/intro04.jpg" target="_blank"><img src="./memoire/images/introduction/intro04.jpg" alt="Image 1" class="side-by-side2"></a>
<a href="./memoire/images/introduction/intro07.png" target="_blank"><img src="./memoire/images/introduction/intro07.png" alt="Image 2" class="side-by-side2"></a>
<figcaption>Ateliers <em>creative coding</em> // Performance son / visuels (photo Émilie Corne)</figcaption>
</figure>
<p>À noter aussi qu’une certaine frustration a marqué mon parcours : le
sentiment de saturation lié à l’utilisation intensive de logiciels. Pour
répondre à cette frustration, j’ai décidé de m’éloigner autant que
possible de ces outils, dans une volonté affirmée de sortir de ma zone
de confort.</p>
<p>Cette expérience avec le Cookie Collective a été source d’inspiration
pour moi et a réaffirmé l’importance de la liberté créative et du
pouvoir du collectif. Elle a ravivé en moi l’espoir en un art novateur,
capable de dépasser les limites du « cinéma » tel que nous le
connaissons aujourd’hui, et d’explorer de nouvelles voies d’expression
artistique. L’esprit de communauté et l’organisation autonome de ce
collectif m’ont rappelé les mouvements de <em>free parties</em><a
href="#fn4" class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a> des années 90 qui ont eu une
influence profonde sur la culture et l’esthétique numériques
contemporaines.</p>
<p>En assistant aux performances, j’ai constaté que l’interaction entre
le <em>livecoder</em> de <em>shaders</em> et celui de musique était
artificielle. Habituellement, c’est le <em>livecoder</em> des
<em>shaders</em> qui ajuste ses variables en fonction du son qu’il
entend, permettant ainsi au visuel de suivre le rythme. Bien que cela
puisse duper le public, cette observation m’a incité à rechercher un
moyen d’obtenir une interaction authentique entre le son et le visuel.
C’est précisément le sujet principal abordé dans ce mémoire.</p>
<p>Dans la première partie, je revisiterai les origines de la
<em>demoscene</em>, en adoptant un angle plus historique que technique.
Cette démarche répond à un double objectif : enrichir ma culture
personnelle et mieux comprendre cet univers pour m’y intégrer
pleinement.</p>
<p>La deuxième partie, précédée d’un bref rappel sur le
<em>pipeline</em> graphique, constitue une sorte de tutoriel visant à
présenter les techniques essentielles du <em>livecoding</em>. Pour des
raisons de lisibilité, j’ai opté pour une décomposition en deux
sections. La première traitera des techniques fondamentales pour écrire
des <em>fragment shaders</em> en temps réel, tandis que la seconde
explorera des techniques plus avancées mais optionnelles.</p>
<p>Conscient que certains de mes camarades de promotion sont passionnés
par le développement et la manipulation des <em>shaders</em> sans
nécessairement maîtriser la logique mathématique sous-jacente, j’ai
cherché à rendre ces concepts accessibles et didactiques. J’espère ainsi
susciter leur intérêt pour la programmation des <em>shaders</em>.</p>
<p>Enfin, la dernière partie de ce mémoire sera consacrée à mes
expérimentations, mettant en lumière certains langages spécifiques au
<em>livecoding</em> musical, notamment FoxDot et Orca. Ces solutions se
sont avérées parfaitement adaptées à mes besoins, car FoxDot offre une
expérience proche de la notation musicale traditionnelle, en rapport
avec mon expérience en gravure musicale<a href="#fn5"
class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>,
tandis qu’Orca m’a séduit par sa syntaxe originale et sa créativité
graphique.</p>
<p>Après avoir exploré en détail la structure d’un fichier MIDI
(consultable en annexe), la fin de cette dernière partie sera consacrée
à l’introduction d’une solution visant à récupérer les informations MIDI
en vue d’animer un <em>shader</em>. Cette approche évite l’utilisation
de logiciels tiers pour se rapprocher d’un <em>pipeline</em> de
développement purement basé sur le code.</p>
<p>Il me semblait aussi important de souligner que mon intention
première était d’inclure des chapitres dédiés à l’<em>algorave</em> et à
la musique algorithmique. Cependant, en raison d’une contrainte de temps
et d’une surestimation de mes capacités, j’ai été contraint d’abandonner
ces sujets.</p>
<figure id="intro02">
<a href="./memoire/images/introduction/intro06.png" target="_blank"><img src="./memoire/images/introduction/intro06.png" alt="Image 1" class="side-by-side2"></a>
<a href="./memoire/images/introduction/intro02.jpg" target="_blank"><img src="./memoire/images/introduction/intro02.jpg" alt="Image 2" class="side-by-side2"></a>
<figcaption>À droite: performance musique/<em>shaders</em> au bar la Chair de Poule (photo Léon Denise)</figcaption>
</figure>

<h1 id="demoscene-origine-et-évolution"><em>Demoscene</em>: origine et
évolution</h1>
<div class="epigraph">
<p>Au sein de la riche mosaïque de la culture urbaine, une multitude de
formes d’expression personnelle émergent et trouvent leur voie. Qu’il
s’agisse de pensées, d’images, de rythmes et mélodies, ou même de
parfums et matériaux transformés, tout devient prétexte à traduire une
émotion humaine. Mais que se produit-il lorsque quelqu’un choisit de
communiquer par le biais des nombres ?</p>
<p><em>Moleman 2 - Demoscene - The Art of the Algorithms (2012) -
Documentaire</em></p>
</div>
<h2 id="préambule">Préambule</h2>
<p>En guise de préambule, il me semblait important de mentionner que les
illustrations de ce chapitre sont des <em>strips</em><a href="#fn6"
class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>
représentant trois images d’une <em>demo</em>, disposées dans l’ordre
chronologique de la <em>demo</em> elle-même. Ces images ont été
extraites des sites <a href="https://pouet.net">pouet.net</a> et <a
href="https://demozoo.org">demozoo.org</a>. Leur insertion vise à aérer
la lecture de ce premier chapitre et à fournir des exemples visuels pour
illustrer certains effets ou concepts discutés dans le texte. L’ordre
dans lequel la grande majorité de ces <em>strips</em> apparaissent au
sein du texte est totalement aléatoire, sans aucune notion de
chronologie.</p>
<h2 id="introduction-à-la-demo">Introduction à la <em>demo</em></h2>
<figure id="kewl">
<a href="./memoire/images/demoscene/demos/kewl1.png" target="_blank"><img src="./memoire/images/demoscene/demos/kewl1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/kewl2.png" target="_blank"><img src="./memoire/images/demoscene/demos/kewl2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/kewl3.png" target="_blank"><img src="./memoire/images/demoscene/demos/kewl3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Kewlers - 1995</figcaption>
</figure>
<h3 class="unnumbered"
id="la-dualité-du-terme-demo-dans-la-demoscene">La dualité du terme
<em>demo</em> dans la <em>demoscene</em></h3>
<p>Le terme <em>demo</em> peut évoquer pour certains les démos de jeux
vidéo. Cependant, au sein de la <em>demoscene</em>, sa signification
s’écarte sensiblement de cette conception. Alors qu’une démo de jeu est
conçue pour présenter un aperçu restreint du produit final, une
<em>demo</em> dans le contexte de la <em>demoscene</em> se présente
comme une œuvre d’art autonome, élaborée pour explorer et repousser les
frontières techniques et esthétiques d’un système informatique.</p>
<p>Si les <em>demos</em> et les jeux vidéo partagent des techniques et
des compétences techniques avancées, leurs aspirations divergent
nettement. Alors que les jeux vidéo adhèrent généralement à un scénario
préétabli, une <em>demo</em> cherche à transcender les contraintes
techniques pour offrir une expérience sensorielle riche, souvent
assimilée à un clip musical.</p>
<h3 class="unnumbered" id="la-demo-entre-performance-et-exécutable">La
<em>demo</em> : entre performance et exécutable</h3>
<p>Pour appréhender pleinement la notion de <em>demo</em>, il convient
de se pencher sur son étymologie anglaise, <em>demonstration</em>, qui
suggère une performance visant à captiver et impressionner l’auditoire.
Conceptuellement, une <em>demo</em> peut être comparée à une animation
musicale d’une durée généralement restreinte, souvent quelques minutes.
Toutefois, elle ne se réduit ni à une simple vidéo ni à un fichier
audio. En réalité, une <em>demo</em> est un programme exécutable, un
fichier binaire, au même titre qu’un logiciel ou un jeu vidéo
traditionnel.</p>
<h3 class="unnumbered"
id="repousser-les-limites-techniques-des-demos">Repousser les limites
techniques des <em>demos</em></h3>
<p>Pour dépasser ces contraintes techniques, les programmeurs de
<em>demos</em> doivent optimiser leur code afin de produire des effets
visuels tout en utilisant un minimum de ressources. Nombreux sont les
<em>demosceners</em> en quête de techniques permettant d’afficher des
graphismes spectaculaires et de repousser les limites de ce qui est
réalisable sur une plateforme spécifique.</p>
<h3 class="unnumbered"
id="la-vitalité-de-la-demoscene-en-allemagne-et-dans-les-pays-scandinaves">La
vitalité de la <em>demoscene</em> en Allemagne et dans les pays
scandinaves</h3>
<p>Il est important de souligner que la <em>demoscene</em> trouve son
épicentre de vitalité et de succès en Allemagne et dans les pays
scandinaves, où elle jouit d’une forte implantation et d’une activité
soutenue. Cette prééminence régionale s’explique en partie par la longue
tradition de ces pays dans la mise en avant des compétences en
informatique et en art numérique.</p>
<p>Ces nations sont également le berceau des plus grandes
<em>demoparties</em> annuelles. Par exemple, la Breakpoint en Allemagne,
qui a eu lieu huit fois jusqu’en 2010, attirait régulièrement une
audience dépassant le millier de visiteurs venus de près de trente
nations différentes. Des événements similaires, tels que l’Assembly en
Finlande ou The Gathering en Norvège, bien qu’initialement axés sur la
mise en avant des compétences artistiques et informatiques, ont
également élargi leur public pour inclure les passionnés de jeux sur PC.
Malgré la tenue d’événements plus modestes à travers le monde, le nombre
total de productions dévoilées lors de ces rassemblements dépasse
désormais les 50 000.</p>
<h3 class="unnumbered"
id="reconnaissance-internationale-de-la-demoscene-par-lunesco">Reconnaissance
internationale de la <em>demoscene</em> par l’UNESCO</h3>
<p>En 2020, la Finlande a inscrit la <em>demoscene</em> sur sa liste
nationale du patrimoine culturel immatériel de l’UNESCO<a href="#fn7"
class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>,
marquant ainsi une reconnaissance significative de cette forme
d’expression artistique numérique. Cette démarche a fait de la
<em>demoscene</em> la première sous-culture numérique à être honorée sur
une liste de patrimoine culturel immatériel de l’UNESCO. Plus tard, en
2021, l’Allemagne et la Pologne ont également suivi en ajoutant la
<em>demoscene</em> à leur liste nationale du patrimoine culturel
immatériel de l’UNESCO, suivies par les Pays-Bas en 2023.</p>
<h2 id="origines-de-la-demoscene">Origines de la <em>demoscene</em></h2>
<figure id="ninja">
<a href="./memoire/images/demoscene/demos/ninja1.png" target="_blank"><img src="./memoire/images/demoscene/demos/ninja1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/ninja2.png" target="_blank"><img src="./memoire/images/demoscene/demos/ninja2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/ninja3.png" target="_blank"><img src="./memoire/images/demoscene/demos/ninja3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Ninjadev – What Are You Syncing About?</figcaption>
</figure>
<h3 class="unnumbered"
id="limpact-du-commodore-64-sur-lémergence-de-la-demoscene">L’impact du
Commodore 64 sur l’émergence de la <em>demoscene</em></h3>
<p>On peut situer les origines des <em>demos</em> autour des années
1983-1984, marquées par l’introduction du Commodore 64 (C64) en 1982. Le
Commodore 64 est un ordinateur personnel qui a rapidement conquis le
marché grâce à son prix attractif et à sa vaste ludothèque. À cette
époque, il rivalisait avec les bornes d’arcade en termes de qualité
sonore et graphique, éclipsant les consoles de jeux non programmables.
Sur le plan matériel, le C64 disposait d’un microprocesseur MOS
Technology 6510 à 1 MHz, de 64 Ko de mémoire RAM<a href="#fn8"
class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>
(d’où son nom), et d’une puce graphique et sonore intégrée, le SID
(<em>Sound Interface Device</em>) (voir <a href="#Commodore64_00"
data-reference-type="ref"
data-reference="Commodore64_00">[Commodore64_00]</a> et <a
href="#Commodore64_01" data-reference-type="ref"
data-reference="Commodore64_01">2.3</a>). Cette dernière offrait des
capacités graphiques et sonores avancées pour son époque.</p>
<figure id="Commodore64_01">
<a href="./memoire/images/demoscene/Commodore64_00.jpg" target="_blank"><img src="./memoire/images/demoscene/Commodore64_00.jpg" alt="Image 1" class="side-by-side2" /></a>
<a href="./memoire/images/demoscene/Commodore64_01.jpg" target="_blank"><img src="./memoire/images/demoscene/Commodore64_01.jpg" alt="Image 2" class="side-by-side2" /></a>
<figcaption>À droite: Commodore 64 avec écran et lecteur de disquette</figcaption>
</figure>
<p>Le Commodore 64 a grandement contribué à populariser l’informatique
personnelle et a été un acteur clé dans l’émergence de la culture
<em>hacker</em>, de la <em>demoscene</em>, et de l’industrie du jeu
vidéo telle qu’elle est aujourd’hui.</p>
<h3 class="unnumbered"
id="lien-entre-la-demoscene-et-lindustrie-des-jeux-vidéo">Lien entre la
<em>demoscene</em> et l’industrie des jeux vidéo</h3>
<p>L’émergence et la montée en popularité de la <em>demoscene</em> sont
étroitement liées à l’essor des jeux vidéo. Dans les années 80, l’achat
de jeux vidéo était souvent une décision risquée en raison de leur coût
élevé et de l’absence de critiques ou de journalisme spécialisé pour
guider les consommateurs. Sans avis ou évaluations disponibles, les
joueurs se retrouvaient parfois déçus par la qualité des jeux qu’ils
avaient achetés, découvrant des titres aux graphismes médiocres ou aux
bugs gênants.</p>
<p>La copie de jeux est devenue alors une pratique courante, d’autant
plus facilitée par la nature des supports utilisés par le Commodore 64.
Contrairement aux jeux sur consoles, les jeux du C64, souvent distribués
sur cassette, étaient facilement dupliquables sans perte de qualité ou
d’informations.</p>
<h3 class="unnumbered" id="naissance-des-cracktros">Naissance des
<em>cracktros</em></h3>
<figure id="sanity">
<a href="./memoire/images/demoscene/demos/sani1.png" target="_blank"><img src="./memoire/images/demoscene/demos/sani1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/sani2.png" target="_blank"><img src="./memoire/images/demoscene/demos/sani2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/sani3.png" target="_blank"><img src="./memoire/images/demoscene/demos/sani3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Sanity - Elysium</figcaption>
</figure>
<p>Les jeux piratés circulaient largement, échangés pendant les cours
d’école ou via courrier postal. Chaque copie comportait une introduction
spécifique, créée par le <em>cracker</em><a href="#fn9"
class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>
responsable du piratage. Leur maîtrise de la programmation leur a permis
de repousser les limites du Commodore 64. Plutôt que d’utiliser le
langage BASIC, plus lent, les <em>crackers</em> se sont tournés vers
l’assembleur, un langage de bas niveau permettant d’optimiser le code et
d’accélérer considérablement l’exécution des programmes. Cette approche
leur permettait d’obtenir des performances jusqu’à 30 fois supérieures,
transformant ainsi la manière dont les jeux étaient perçus et joués sur
le Commodore 64. Ils ont également expérimenté les capacités du C64 pour
créer des images et des sons, créant ainsi des expériences
audiovisuelles immersives. En utilisant le langage des mathématiques
pour coder des programmes, ils ont ouvert la voie à l’expression
artistique numérique.</p>
<p>En plus de rendre les jeux gratuits, les <em>crackers</em> offraient
des avantages tels que des vies infinies ou la suppression d’ennemis,
permettant ainsi aux joueurs d’éviter les obstacles frustrants et de
profiter pleinement de leur expérience de jeu. Fiers de leurs exploits,
ces <em>crackers</em> intégraient fréquemment leurs initiales ou le nom
de leur groupe au démarrage des jeux, que ce soit dans une liste de
meilleurs scores ou à travers des éléments graphiques. Ces ajouts
servaient de vitrine à leur talent et renforçaient l’identité de leur
groupe au sein de la communauté.</p>
<p>Ces introductions élaborées par les <em>crackers</em> pour mettre en
avant leur talent et leur travail de contournement des mesures de
protection des jeux sont nommées <em>cracktros</em><a href="#fn10"
class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>
(la contraction des mots <em>intro</em> et <em>crack</em>). Le
<em>cracking</em> est devenu bien plus qu’une simple pratique de
contournement : c’était une démonstration de compétence et d’expertise
technique. Ces <em>crackers</em> étaient admirés au sein de la
communauté pour leur capacité à maîtriser la machine et à offrir des
versions optimisées des jeux. Au fil des années, ces <em>cracktros</em>
ont évolué pour devenir de véritables œuvres d’art numérique, gagnant en
sophistication et en complexité.</p>
<h3 class="unnumbered" id="les-groupes-pionniers-du-cracking">Les
groupes pionniers du <em>cracking</em></h3>
<figure id="pheno">
<a href="./memoire/images/demoscene/demos/pheno1.png" target="_blank"><img src="./memoire/images/demoscene/demos/pheno1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/pheno2.png" target="_blank"><img src="./memoire/images/demoscene/demos/pheno2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/pheno3.png" target="_blank"><img src="./memoire/images/demoscene/demos/pheno3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Phenomena- Enigma</figcaption>
</figure>
<p>L’année 1984 marque un tournant dans l’histoire des <em>crackers</em>
et de la scène du piratage informatique. À cette époque, de nombreux
groupes ont émergé, chacun avec sa propre spécialité et sa réputation
dans le milieu. Parmi les plus influents, on retrouve des groupes comme
TBC, connu pour avoir cracké des jeux populaires tels que « Kennedy
Approach » ou « Crackman Crew ».</p>
<p>Les membres de ces groupes n’étaient pas seulement experts en
<em>cracking</em>, ils étaient aussi capables d’adapter les jeux NTSC<a
href="#fn11" class="footnote-ref" id="fnref11"
role="doc-noteref"><sup>11</sup></a> destinés au marché américain pour
les rendre compatibles avec les systèmes PAL<a href="#fn12"
class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>
utilisés en Europe. Cette adaptation était essentielle pour permettre
aux joueurs européens de profiter des jeux américains sur leurs machines
locales.</p>
<p>Outre TBC, d’autres groupes européens ont marqué le paysage du
<em>cracking</em>. Au Royaume-Uni, Yak Society s’est distingué en
crackant les jeux de l’éditeur Elite, tandis qu’en Allemagne, des
groupes comme Section 8 et ABC ont également laissé leur empreinte.</p>
<h3 class="unnumbered"
id="le-rôle-central-des-swappers-dans-la-distribution">Le rôle central
des <em>swappers</em> dans la distribution</h3>
<p>La distribution de ces jeux piratés se réalisait de manière
analogique, principalement par le biais de la voie postale. Les acteurs
clés de cette dynamique étaient les <em>swappers</em><a href="#fn13"
class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>,
des individus passionnés qui avaient établi des réseaux de contacts à
l’échelle mondiale. Ces échanges étaient le moteur de la circulation des
<em>cracktros</em>, des jeux et des logiciels au sein de la communauté.
À travers l’envoi de disquettes par courrier postal, ces
<em>swappers</em> facilitaient la diffusion des créations artistiques,
contribuant ainsi à la vitalité et à la croissance de la
<em>demoscene</em>. Ces échanges ne se limitaient pas seulement à la
distribution de contenus, mais renforçaient également les liens entre
les membres de la communauté, créant un réseau solide et engagé autour
de la passion commune pour la création numérique.</p>
<h3 class="unnumbered"
id="législation-et-évolution-technique">Législation et évolution
technique</h3>
<figure id="andromeda">
<a href="./memoire/images/demoscene/demos/andromeda1.png" target="_blank"><img src="./memoire/images/demoscene/demos/andromeda1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/andromeda2.png" target="_blank"><img src="./memoire/images/demoscene/demos/andromeda2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/andromeda3.png" target="_blank"><img src="./memoire/images/demoscene/demos/andromeda3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Nexus 7 - Andromeda</figcaption>
</figure>



<p>Les éditeurs de jeux ont rapidement réagi pour essayer de contrôler
la diffusion de ces copies piratées alors qu’elles se propageaient. Au
milieu des années 80, face à l’ampleur du phénomène, une législation a
été mise en place en Europe et aux États-Unis visant à interdire toute
modification, duplication ou distribution non autorisée de logiciels
commerciaux.</p>
<p>Cette réglementation visait à protéger les droits d’auteur des
éditeurs et à décourager le piratage des jeux. Elle a marqué un tournant
dans l’histoire de la communauté du Commodore 64, mettant fin à l’ère de
la duplication libre et créant un contexte juridique plus contraignant
pour les amateurs de jeux piratés et les <em>crackers</em>.</p>
<p>Cette évolution légale a poussé certains membres de la communauté à
s’orienter vers des pratiques plus créatives et légales, donnant
naissance à la <em>demoscene</em> et à la création d’<em>intros</em><a
href="#fn14" class="footnote-ref" id="fnref14"
role="doc-noteref"><sup>14</sup></a> originales, loin des pratiques de
piratage. Malgré cela la créativité des <em>crackers</em> n’a pas été
freinée. De nouvelles techniques ont rapidement émergé pour contourner
les mesures de protection des jeux.</p>
<p>La première méthode de <em>crack</em> qui a vu le jour était le
<em>reset cracking</em>. Cette méthode était relativement simple : en
appuyant sur le bouton de réinitialisation (le <em>reset</em>) du
Commodore 64, le contenu de la mémoire restait intact, permettant ainsi
aux <em>crackers</em> d’accéder au programme en cours d’exécution. En
gelant le programme, ils étaient alors en mesure d’extraire et de
modifier les données. Par la suite, des modules de gel sur support
cartouche ont été développés. Ces cartouches offraient la possibilité de
geler le système sans avoir besoin de réinitialiser l’ordinateur,
rendant la manipulation encore plus aisée et rapide pour les
<em>crackers</em>.</p>
<p>Cette course à l’armement entre <em>crackers</em> et éditeurs a
contribué à enrichir les compétences techniques de la communauté,
ouvrant la voie à de nouvelles formes d’expression et à l’émergence de
la <em>demoscene</em>.</p>
<h3 class="unnumbered"
id="cracking-et-élitisme-les-codes-de-la-culture-demoscene">Cracking et
élitisme: les codes de la culture <em>demoscene</em></h3>
<p>La culture du <em>cracking</em> a également développé ses propres
codes et valeurs. L’élitisme et l’avant-gardisme en opposition aux
<em>lamers</em><a href="#fn15" class="footnote-ref" id="fnref15"
role="doc-noteref"><sup>15</sup></a> sont devenus des caractéristiques
marquantes de la scène, reflétant la volonté des membres de se démarquer
et de repousser les limites de ce qui est possible. De nombreux
adolescents ont été inspirés par cette culture et ont rêvé de devenir un
jour un <em>cracker</em> de renom, contribuant ainsi à la croissance et
à la pérennité de la <em>demoscene</em>.</p>
<h3 class="unnumbered"
id="la-réponse-de-lélite-de-la-scène-aux-surveillances-du-fbi">La
réponse de l’élite de la scène aux surveillances du FBI</h3>
<figure id="crio">
<a href="./memoire/images/demoscene/demos/crio1.png" target="_blank"><img src="./memoire/images/demoscene/demos/crio1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/crio2.png" target="_blank"><img src="./memoire/images/demoscene/demos/crio2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/crio3.png" target="_blank"><img src="./memoire/images/demoscene/demos/crio3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>The Silents &amp; Crionics - Hardwired</figcaption>
</figure>
<p>Face à la surveillance accrue du FBI (<em>Federal Bureau of
Investigation</em>), les <em>crackers</em> ont rapidement ajusté leurs
méthodes pour échapper à la détection. L’élite<a href="#fn16"
class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>
de la scène a développé des techniques pour brouiller les pistes et
rendre leur communication moins suspecte.</p>
<p>Le FBI mettait en place des systèmes de surveillance des lignes
téléphoniques en utilisant des ordinateurs pour détecter certains
mots-clés ou phrases suspects. Afin d’éviter cette surveillance, les
<em>crackers</em> ont commencé à utiliser ce qu’on appelle maintenant le
<em>leet speak</em><a href="#fn17" class="footnote-ref" id="fnref17"
role="doc-noteref"><sup>17</sup></a>. Ils ont altéré les mots et les
phrases de façon à les rendre méconnaissables pour les systèmes de
surveillance.</p>
<p>À titre d’exemple, le terme <em>wares</em>, faisant référence aux
logiciels piratés, a été modifié en <em>warez</em>, tandis que la lettre
« O » a été substituée par le chiffre zéro (« 0 »). D’autres
substitutions étaient également courantes, comme remplacer la lettre « A
» par le chiffre quatre (« 4 »). Certains ont même utilisé des
caractères spéciaux ou des lettres de l’alphabet non latin pour
brouiller davantage les pistes.</p>
<p>Cette pratique du <em>leet speak</em> n’était pas seulement une
manière de contourner la surveillance, mais aussi un moyen pour la
communauté de se démarquer et de créer un langage propre à leur culture.
Cette forme d’argot électronique a perduré au fil du temps et est encore
utilisée aujourd’hui, notamment dans les pseudonymes et les
communications sur Internet. Elle témoigne de l’ingéniosité et de la
résilience de la <em>demoscene</em> face aux défis et aux menaces
externes.</p>
<h3 class="unnumbered"
id="dun-monde-de-cracking-à-lindustrie-légale">D’un monde de
<em>cracking</em> à l’industrie légale</h3>
<p>Malgré leurs débuts dans le piratage et le <em>cracking</em>, ces
experts en informatique ont su mettre leurs compétences au service de
l’industrie de manière légale et productive. Leur expérience dans le
<em>cracking</em> leur a souvent donné un avantage unique, leur
permettant de comprendre en profondeur les systèmes et les logiciels, et
de contribuer de manière significative au développement technologique et
informatique. Cette transition illustre bien la complexité et la dualité
de la scène du <em>cracking</em>, où les frontières entre le légal et
l’illégal, entre le jeu et le travail, sont parfois floues. Leurs
compétences sont particulièrement prisées dans des secteurs comme le
développement de jeux vidéo, l’animation, les effets spéciaux et la
post-production.</p>
<p>Bon nombre de professionnels éminents de l’industrie du jeu vidéo et
de l’animation ont fait leurs premiers pas dans la scène <em>demo</em>.
Cette dernière offre en effet une plateforme unique pour
l’expérimentation, le <em>feedback</em> en temps réel de la communauté
et le perfectionnement des compétences. Elle constitue ainsi un tremplin
exceptionnel pour une carrière réussie dans les domaines créatifs et
technologiques.</p>
<p>Les groupes DICE<a href="#fn18" class="footnote-ref" id="fnref18"
role="doc-noteref"><sup>18</sup></a> et Remedy<a href="#fn19"
class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>
illustrent parfaitement comment des groupes de <em>demosceners</em> ont
su transformer leur passion et leur talent en des carrières accomplies
au sein de l’industrie du jeu vidéo. Ces <em>success stories</em>
soulignent l’impact considérable que la créativité et l’innovation de la
scène <em>demo</em> peuvent avoir, transcendant ainsi les limites
traditionnelles de cette communauté. En outre, il est important de
souligner que de nombreux musiciens issus de la scène <em>demo</em> ont
saisi des opportunités professionnelles dans la composition de bandes
sonores pour des titres emblématiques tels qu’Assassin’s Creed ou la
série Unreal.</p>
<h2 id="évolution-de-la-demoscene-vers-les-demoparties">Évolution de la
<em>demoscene</em> vers les <em>demoparties</em></h2>
<p>Nous allons maintenant aborder les divers facteurs qui ont contribué
à l’évolution de la <em>demoscene</em>, ainsi qu’examiner de plus près
les techniques utilisées.</p>
<figure id="dreamtime">
<a href="./memoire/images/demoscene/demos/dreamtime1.png" target="_blank"><img src="./memoire/images/demoscene/demos/dreamtime1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/dreamtime2.png" target="_blank"><img src="./memoire/images/demoscene/demos/dreamtime2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/dreamtime3.png" target="_blank"><img src="./memoire/images/demoscene/demos/dreamtime3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Dreamtime - Profik</figcaption>
</figure>
<h3 class="unnumbered"
id="lessor-des-demoparties-et-la-structuration-de-la-communauté">L’essor
des <em>demoparties</em> et la structuration de la communauté</h3>
<p>Si à l’origine l’objectif principal était de réussir le « crackage »
d’un jeu, il est rapidement devenu évident que la création
d’<em>intros</em> de qualité était tout aussi cruciale pour se démarquer
au sein de la communauté. C’est aussi vers le milieu des années 80 que
la scène a véritablement pris de l’ampleur, se structurant de manière
plus formelle. Les groupes de <em>crackers</em> ont commencé à se
rencontrer physiquement en organisant des rencontres et des
rassemblements. Ces <em>demoparties</em> étaient l’occasion pour les
passionnés de l’informatique et de la <em>demo</em> de se rencontrer, de
partager leurs créations, et d’échanger des astuces ou des techniques de
programmation.</p>
<p>Les <em>demos</em> se distinguent des <em>cracktros</em> par leur
complexité accrue et leur autonomie vis-à-vis des logiciels originaux.
Elles ne se contentaient plus de présenter les capacités de
<em>cracking</em> des groupes, mais devenaient de véritables œuvres
d’art combinant programmation, design et musique pour offrir une
expérience immersive.</p>
<h3 class="unnumbered"
id="lévolution-artistique-des-signatures-des-crackers">L’évolution
artistique des signatures des <em>crackers</em></h3>
<p>L’évolution des signatures des <em>crackers</em> reflète bien la
transition de la scène du simple <em>cracking</em> vers la création
d’<em>intros</em> plus élaborées. Initialement, la signature était une
manière discrète pour le <em>cracker</em> de laisser sa marque sur une
copie piratée. Cette signature, souvent composée de trois lettres,
rappelait les initiales utilisées dans les jeux d’arcade pour marquer
les meilleurs scores. Elle servait à identifier l’auteur du
<em>crack</em>, tout en affirmant sa réputation au sein de la
communauté. Cependant, avec l’émergence de la <em>demoscene</em>, cette
simple signature a rapidement évolué. Les <em>crackers</em> ont commencé
à utiliser les <em>intros</em> comme un média pour afficher leur
pseudonyme de manière plus graphique et artistique. Au lieu de se
limiter à une combinaison de trois lettres, ils ont intégré leur
pseudonyme dans des <em>logos</em> aux animations complexes (voir <a
href="#logo" data-reference-type="ref"
data-reference="logo">2.9</a>).</p>
<figure id="logo">
<a href="./memoire/images/demoscene/demos/logo1.png" target="_blank"><img src="./memoire/images/demoscene/demos/logo1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/logo2.png" target="_blank"><img src="./memoire/images/demoscene/demos/logo2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/logo3.png" target="_blank"><img src="./memoire/images/demoscene/demos/logo3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption><em>Logos</em> évolués</figcaption>
</figure>
<h3 class="unnumbered"
id="limpact-de-lamiga-sur-la-diversité-des-approches-dans-la-demoscene">L’impact
de l’Amiga sur la diversité des approches dans la
<em>demoscene</em></h3>
<p>En parallèle l’Amiga a révolutionné l’informatique personnelle en se
positionnant comme un précurseur du multimédia, surpassant ses
concurrents de l’époque. Son avance technologique, illustrée par l’Amiga
1000 lancé en 1986 (voir <a href="#am1000" data-reference-type="ref"
data-reference="am1000">[am1000]</a>), a introduit des innovations
majeures comme le son numérique, les graphismes couleur et un système
multitâche révolutionnaire pour l’époque. Malgré ces avancées, le coût
élevé de l’Amiga a initialement freiné son adoption parmi les
<em>demosceners</em>, en particulier par rapport au Commodore 64.</p>
<figure id="chaos1">
<a href="./memoire/images/demoscene/amiga1000.png" target="_blank"><img src="./memoire/images/demoscene/amiga1000.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/amiga500.png" target="_blank"><img src="./memoire/images/demoscene/amiga500.png"  alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/amiga1200.png" target="_blank"><img src="./memoire/images/demoscene/amiga1200.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Amiga</figcaption>
</figure>
<p>L’introduction de l’Amiga a été un catalyseur pour la création d’une
scène spécifique autour de cette plateforme. Elle a vu l’émergence de
groupes dédiés, chacun avec ses spécialités : <em>crackers</em> et
<em>demomakers</em>. Deux courants distincts se sont formés : l’un axé
sur les programmes DOS<a href="#fn20" class="footnote-ref" id="fnref20"
role="doc-noteref"><sup>20</sup></a> et l’autre sur les
<em>trackloaders</em><a href="#fn21" class="footnote-ref" id="fnref21"
role="doc-noteref"><sup>21</sup></a>.</p>
<p>Les programmes DOS sur Amiga étaient souvent caractérisés par une
approche plus structurée et formelle, avec une présentation plus
traditionnelle et un enchaînement linéaire des effets. A contrario,
plutôt que de charger toutes les données nécessaires pour une
<em>demo</em> au début de l’exécution, le <em>trackloader</em> charge
les données progressivement à partir du disque pendant que la
<em>demo</em> est en cours d’exécution. Cette méthode permet d’offrir
une expérience plus fluide et dynamique, car elle réduit les temps de
chargement et permet un enchaînement plus naturel des effets et des
scènes.</p>
<p>L’essor de l’Amiga a marqué un tournant dans la création musicale au
sein de la <em>demoscene</em>. Les premiers logiciels utilisés, appelés
<em>trackers</em>, rappellent les outils du C64 mais offraient la
capacité de jouer des sons numérisés. Cette évolution a ouvert la porte
à des compositions musicales plus complexes et sophistiquées,
enrichissant ainsi la qualité sonore des <em>demos</em>.</p>
<p>Aujourd’hui, les créateurs de <em>demos</em> ont accès à des
logiciels de production musicale plus avancés, les mêmes qui sont
utilisés pour produire les morceaux diffusés à la radio ou en
<em>streaming</em>. Cependant, les contraintes de taille imposées par
les <em>demos</em> de 4 ou 64 Ko limitent l’utilisation de ces sons
numérisés.</p>
<h3 class="unnumbered" id="la-synthèse-sonore-dans-la-demoscene">La
synthèse sonore dans la <em>demoscene</em></h3>
<p>Face à ces limitations, les artistes reviennent souvent aux
techniques ancestrales de la <em>demoscene</em>. Ils créent des sons en
partant de simples formes d’ondes, utilisant des méthodes de synthèse
sonore pour générer des mélodies et des rythmes envoûtants. Ces
approches minimalistes rappellent les débuts de la musique sur le C64,
mais avec l’ingéniosité et l’expérience acquises au fil des années, les
artistes parviennent à produire des compositions étonnamment riches et
variées, démontrant ainsi que la créativité peut s’épanouir même dans
les contraintes les plus strictes.</p>
<figure id="drumman">
<a href="./memoire/images/demoscene/demos/drumman1.png" target="_blank"><img src="./memoire/images/demoscene/demos/drumman1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/drumman2.png" target="_blank"><img src="./memoire/images/demoscene/demos/drumman2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/drumman3.png" target="_blank"><img src="./memoire/images/demoscene/demos/drumman3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Drum Man Demo</figcaption>
</figure>
<h3 class="unnumbered"
id="les-diskmags-confèrent-à-la-scène-une-dimension-plus-structurée">Les
<em>diskmags</em> confèrent à la scène une dimension plus
structurée</h3>
<p>Les <em>demos</em> Amiga ont élargi leurs horizons en incorporant des
diaporamas, des albums musicaux et des <em>diskmags</em>, se démarquant
clairement par leur qualité supérieure par rapport aux <em>diskmags</em>
du C64. En plus des échanges directs entre individus, des médias
physiques ont commencé à voir le jour pour soutenir et documenter la
scène.</p>
<figure id="diskmag2">
<a href="./memoire/images/demoscene/demos/diskmag1.png" target="_blank"><img src="./memoire/images/demoscene/demos/diskmag1.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/demoscene/demos/diskmag2.png" target="_blank"><img src="./memoire/images/demoscene/demos/diskmag2.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>R.A.W. #6, un exemple de l’âge d’or des <em>diskmags</em>.
(Amiga 500, 1993)</figcaption>
</figure>
<p>Des magazines papier et des fanzines numériques ont été créés (les
<em>diskmags</em><a href="#fn22" class="footnote-ref" id="fnref22"
role="doc-noteref"><sup>22</sup></a>), offrant un espace d’expression
aux membres de la communauté et permettant de partager des actualités,
des tutoriels, des critiques et des analyses (voir <a href="#diskmag1"
data-reference-type="ref" data-reference="diskmag1">[diskmag1]</a>, <a
href="#diskmag1" data-reference-type="ref"
data-reference="diskmag1">[diskmag1]</a> et <a href="#diskmagUI2"
data-reference-type="ref" data-reference="diskmagUI2">2.13</a>).</p>
<figure id="diskmagUI2">
<a href="./memoire/images/demoscene/demos/diskmag3.png" target="_blank"><img src="./memoire/images/demoscene/demos/diskmag3.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/diskmag4.png" target="_blank"><img src="./memoire/images/demoscene/demos/diskmag4.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/diskmag5.png" target="_blank"><img src="./memoire/images/demoscene/demos/diskmag5.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Interface d’un diskmag</figcaption>
</figure>
<p>Ces publications ont joué un rôle important dans la diffusion des
idées et des valeurs de la <em>demoscene</em> et du <em>hacking</em>.
Des titres comme Sex’n’Crime, Mamba et Fölény sont devenus
emblématiques. Ces publications, enrichies de nouvelles, de critiques de
<em>demos</em>, de classements et d’informations sur les
<em>copyparties</em>, ont conféré à la scène une dimension plus
structurée et sérieuse.</p>
<h3 class="unnumbered"
id="compétition-et-prestige-dans-la-demoscene">Compétition et prestige
dans la <em>demoscene</em></h3>
<figure id="chaos2">
<a href="./memoire/images/demoscene/demos/chaos1.png" target="_blank"><img src="./memoire/images/demoscene/demos/chaos1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/chaos2.png" target="_blank"><img src="./memoire/images/demoscene/demos/chaos2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/chaos3.png" target="_blank"><img src="./memoire/images/demoscene/demos/chaos3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>CHAOS Mega demo - Fi-Re Crew</figcaption>
</figure>
<p>C’est durant cette période qu’un véritable esprit compétitif a pris
forme au sein de la communauté des <em>demosceners</em>. Une course à
l’exploit était engagée : qui serait le premier à pirater un jeu ? Qui
concevrait l’<em>intro</em> la plus marquante ? L’esprit de compétition
a incité les créateurs à repousser les limites techniques de leurs
machines. Les effets visuels se sont multipliés et complexifiés:
animations de sprites, rotations, rebonds, effets de miroir, et bien
d’autres encore. La musique n’était pas en reste, devenant de plus en
plus sophistiquée.</p>
<p>Au-delà de la compétition purement technique, l’ego et le prestige
ont également pris une place importante dans cet univers. Chaque groupe
se devait de présenter un <em>cracktro</em> de qualité, non seulement
pour montrer leur expertise technique, mais aussi pour asseoir leur
réputation au sein de la communauté.</p>
<h2 id="différents-types-de-compétition">Différents types de
compétition</h2>
<h3 class="unnumbered" id="introduction-1">Introduction</h3>
<figure id="mega">
<a href="./memoire/images/demoscene/demos/mega1.png" target="_blank"><img src="./memoire/images/demoscene/demos/mega1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/mega2.png" target="_blank"><img src="./memoire/images/demoscene/demos/mega2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/mega3.png" target="_blank"><img src="./memoire/images/demoscene/demos/mega3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Megademo - Red Sector Inc</figcaption>
</figure>
<p>La dimension communautaire joue un rôle tout aussi essentiel que le
talent individuel dans la dynamique de la <em>demoscene</em>,
contribuant à nourrir un esprit créatif et collaboratif. L’événement
phare de cette communauté est la <em>demoparty</em>, une manifestation
dédiée à la célébration de la culture informatique. Lors de ces
rassemblements, les participants ont l’opportunité de mettre en lumière
leurs compétences et créations, d’échanger des connaissances et des
idées, et de rencontrer des individus animés par la même passion. Les
œuvres produites y sont présentées dans diverses catégories et soumises
à l’appréciation du public et des pairs, renforçant ainsi l’esprit de
compétition et de camaraderie qui anime la <em>demoscene</em>.</p>
<p>Concourir lors d’une <em>demoparty</em> représente une expérience
unique pour les <em>demomakers</em>. C’est l’occasion de voir leur
travail projeté sur un grand écran, sublimé par une bande sonore
diffusée sur un système son de qualité, devant un auditoire attentif et
passionné. Ce moment de partage et de reconnaissance collective est
souvent source d’inspiration et de motivation pour les participants.</p>
<figure id="product">
<a href="./memoire/images/demoscene/demos/prod1.png" target="_blank"><img src="./memoire/images/demoscene/demos/prod1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/prod2.png" target="_blank"><img src="./memoire/images/demoscene/demos/prod2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/prod3.png" target="_blank"><img src="./memoire/images/demoscene/demos/prod3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>The Product - Farbrausch</figcaption>
</figure>
<p>Cette course à l’innovation et à la créativité a contribué à faire de
la <em>demoscene</em> un mouvement dynamique et en constante évolution,
où chaque nouvelle réalisation repousse un peu plus les frontières de ce
qui est techniquement possible. Ce qui pouvait impressionner une année
semblait déjà dépassé l’année suivante. Cet esprit compétitif a conduit
à la création de diverses catégories, chacune présentant ses propres
contraintes spécifiques.</p>
<h3 class="unnumbered"
id="intros-4k-lart-de-la-compacité"><em>Intros</em> 4k : l’art de la
compacité</h3>
<p>L’introduction de la catégorie 4k a marqué une étape significative
dans l’évolution de la <em>demoscene</em>. Contrairement aux productions
plus volumineuses qui disposent de plusieurs mégaoctets pour exprimer
leur vision artistique, les productions 4k se limitent à seulement 4
kilooctets de données. Cette contrainte sévère en taille a poussé les
<em>demosceners</em> à optimiser les possibilités de compression pour
produire des œuvres imposantes malgré leur petite taille.</p>
<p>Malgré les contraintes, les <em>demomakers</em> redoublent d’astuces
pour y parvenir. Bien que les résultats soient souvent d’une qualité
graphique médiocre, il est important de souligner que la taille de ces
<em>intros</em> est même inférieure à celle d’un document Word vide. Le
format 4k a donc donné naissance à des <em>demos</em> qui démontrent la
puissance et le génie des <em>demosceners</em>, en montrant qu’il est
possible de réaliser des prouesses artistiques et techniques avec des
ressources limitées.</p>
<h3 class="unnumbered" id="we-are-new-par-fairlight">« We Are New » par
Fairlight</h3>
<p>Une des <em>intros</em> 4k les plus célèbres sur Commodore 64 est «
We Are New » par Fairlight (voir <a href="#wnew"
data-reference-type="ref" data-reference="wnew">2.17</a>). Cette
<em>intro</em> a été saluée pour son ingéniosité technique et son
esthétique, tout en tenant dans la contrainte de seulement 4 kilooctets
de données.</p>
<figure id="wnew">
<a href="./memoire/images/demoscene/demos/wnew1.png" target="_blank"><img src="./memoire/images/demoscene/demos/wnew1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/wnew2.png" target="_blank"><img src="./memoire/images/demoscene/demos/wnew2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/wnew3.png" target="_blank"><img src="./memoire/images/demoscene/demos/wnew3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>« We Are New » - Fairlight</figcaption>
</figure>
<h3 class="unnumbered"
id="lintro-64k-un-équilibre-parfait-entre-créativité-et-optimisation">L’<em>Intro</em>
64k : un équilibre parfait entre créativité et optimisation</h3>
<p>Les <em>intros</em> 64k occupent une place particulière dans la
<em>demoscene</em>, se positionnant entre les <em>intros</em> 4k et les
<em>demos</em> <em>full size</em>. Elles offrent une limite de
64 kilooctets de données, soit bien plus que les 4 kilooctets des
<em>intros</em> 4k, mais nettement moins que les <em>demos</em> <em>full
size</em> qui peuvent s’étendre sur plusieurs mégaoctets.</p>
<p>Ici aussi, le défi des <em>intros</em> 64k est de marier créativité
artistique et optimisation technique dans un espace de stockage
restreint. Ce format permet aux <em>demosceners</em> de concevoir des
œuvres plus élaborées, avec des graphismes, des effets sonores et des
animations de qualité supérieure, tout en restant dans une taille de
fichier modeste. L’objectif est là encore d’exploiter au maximum les 64
kilooctets disponibles.</p>
<p>L’<em>intro</em> 64k se distingue par son système similaire aux
<em>intros</em> 4k, mais avec une limite étendue à 65535 octets. Ce
format offre aux codeurs une plus grande marge de manœuvre créative,
leur permettant de collaborer étroitement avec des graphistes et des
musiciens pour créer des <em>intros</em> marquantes. C’est pourquoi
l’<em>intro</em> 64k est l’une des catégories les plus appréciées des
<em>demomakers</em>, juste derrière la catégorie reine : la <em>demo
full size</em>.</p>
<h3 class="unnumbered" id="fr-08-.the-.product-par-farbrausch">« fr-08:
.the .product » par Farbrausch</h3>
<p>Une des <em>intros</em> 64k les plus célèbres et influentes dans la
<em>demoscene</em> est « fr-08: .the .product » réalisée par Farbrausch
en 2000 (voir <a href="#farb" data-reference-type="ref"
data-reference="farb">2.18</a>). Cette <em>intro</em> a marqué un
tournant dans la catégorie des <em>intros</em> 64k, démontrant une
optimisation et une créativité jamais vues auparavant.</p>
<p>« fr-08: .the .product » a été distinguée non seulement pour ses
effets visuels, mais aussi pour sa musique et sa synchronisation. Elle a
repoussé les limites de ce qui était considéré comme possible dans un
fichier de seulement 64 kilooctets, influençant de nombreux
<em>demomakers</em> et définissant de nouvelles normes pour les
<em>intros</em> 64k. Cette <em>intro</em> est souvent citée comme un
exemple de ce que la <em>demoscene</em> peut réaliser.</p>
<figure id="farb">
<a href="./memoire/images/demoscene/demos/farb1.png" target="_blank"><img src="./memoire/images/demoscene/demos/farb1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/farb2.png" target="_blank"><img src="./memoire/images/demoscene/demos/farb2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/farb3.png" target="_blank"><img src="./memoire/images/demoscene/demos/farb3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>fr-08: .the .product - Farbrausch</figcaption>
</figure>
<h3 class="unnumbered"
id="au-delà-des-contraintes-les-demos-full-size">Au-delà des contraintes
: les <em>demos full size</em></h3>
<p>La catégorie <em>demo full size</em> par ses productions les plus
ambitieuses et les plus abouties , constitue le cœur battant de la
<em>demoscene</em>. À l’inverse des <em>intros</em> 4k et 64k, soumises
à des contraintes de taille de fichier plus strictes, les <em>demos full
size</em> se libèrent de toute limite prédéfinie en termes de mémoire ou
de temps d’exécution.</p>
<p>Ce format offre aux <em>demosceners</em> un espace de création
illimité pour déployer tout leur talent et leur savoir-faire. Les
<em>demos full size</em> exploitent ainsi pleinement les capacités des
machines sur lesquelles elles sont exécutées, que ce soit en termes de
graphismes, d’animations, d’effets sonores ou de musique. Elles
représentent souvent le résultat d’un travail d’équipe collaboratif, où
artistes, codeurs, graphistes et musiciens fusionnent leurs compétences
pour donner vie à une vision artistique commune.</p>
<p>Les productions de cette catégorie peuvent durer plusieurs minutes et
offrent une expérience riche et immersive aux spectateurs. Elles peuvent
raconter une histoire, présenter un univers visuel ou sonore unique, ou
encore mettre en avant des techniques de programmation et de design
nouvelles. La taille traditionnelle des <em>demos</em> est limitée à
4Mo, bien que cette limite soit souvent dépassée, comme l’illustre la
<em>demo</em> de plus de 12Mo réalisée par Cocoon &amp; Syndrome pour «
Shad » (voir <a href="#shad" data-reference-type="ref"
data-reference="shad">2.19</a>).</p>
<figure id="shad">
<a href="./memoire/images/demoscene/demos/shad1.png" target="_blank"><img src="./memoire/images/demoscene/demos/shad1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/shad2.png" target="_blank"><img src="./memoire/images/demoscene/demos/shad2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/shad3.png" target="_blank"><img src="./memoire/images/demoscene/demos/shad3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Shad - Cocoon &amp; Syndrome</figcaption>
</figure>
<p>En somme, la catégorie <em>demo full size</em> est le terrain de jeu
privilégié des <em>demosceners</em> pour exprimer leur créativité sans
limites, repoussant constamment les frontières de l’art numérique et de
la programmation, tout en offrant une liberté d’expression artistique
inégalée.</p>
<h3 class="unnumbered"
id="lart-visuel-au-cœur-de-la-demoscene-la-catégorie-gfx">L’art visuel
au cœur de la <em>demoscene</em> : la catégorie <em>gfx</em></h3>
<figure id="deities">
<a href="./memoire/images/demoscene/demos/deities1.png" target="_blank"><img src="./memoire/images/demoscene/demos/deities1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/deities2.png" target="_blank"><img src="./memoire/images/demoscene/demos/deities2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/deities3.png" target="_blank"><img src="./memoire/images/demoscene/demos/deities3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Deities - MFX</figcaption>
</figure>
<p>La catégorie <em>gfx</em> (<em>graphics</em>) dans la
<em>demoscene</em> se centre sur la création graphique et artistique,
mettant en lumière le talent des graphistes qui élaborent des œuvres
visuelles pour les <em>demos</em>, <em>intros</em> et autres productions
de la <em>demoscene</em>. Pour exceller dans ce domaine, les graphistes
doivent posséder une variété de compétences. Ils doivent maîtriser des
logiciels de dessin et de retouche d’image, tout en ayant une
compréhension approfondie des contraintes techniques propres à la
<em>demoscene</em>, telles que la gestion des palettes de couleurs et
l’optimisation des tailles de fichiers.</p>
<p>Les productions <em>gfx</em> peuvent prendre diverses formes, qu’il
s’agisse d’images fixes, d’animations ou même de séquences vidéo. Elles
sont souvent évaluées sur des critères tels que leur originalité, leur
qualité artistique, leur technique et leur intégration harmonieuse dans
la production globale. La catégorie <em>gfx</em> est une catégorie
permettant aux graphistes de la <em>demoscene</em> de mettre en avant
leur talent, de partager leur passion pour l’art graphique et de
contribuer à enrichir les productions communautaires avec des
visuels.</p>
<p>Cette catégorie <em>gfx</em> est elle-même subdivisée en plusieurs
sous-catégories, telles que les 8bits (256 couleurs) et les 32bits. Il
est important de noter que l’utilisation de photos scannées est
généralement mal vue, voire interdite.</p>
<h3 class="unnumbered"
id="la-musique-des-pixels-la-catégorie-mod-de-la-demoscene">La musique
des <em>pixels</em> : la catégorie <em>mod</em> de la
<em>demoscene</em></h3>
<figure id="ephi">
<a href="./memoire/images/demoscene/demos/ephi1.png" target="_blank"><img src="./memoire/images/demoscene/demos/ephi1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/ephi2.png" target="_blank"><img src="./memoire/images/demoscene/demos/ephi2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/ephi3.png" target="_blank"><img src="./memoire/images/demoscene/demos/ephi3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Ephidrena - Concrete</figcaption>
</figure>
<p>La catégorie <em>mod</em> (module) dans la <em>demoscene</em> est
dédiée à la création de musique et de sons, qui sont essentiels pour
enrichir l’expérience audio des <em>demos</em> ou des <em>intros</em>.
Les modules sont des fichiers spéciaux contenant à la fois des données
musicales et des instructions pour les instruments, permettant ainsi de
reproduire des compositions musicales variées. Ces créations sont le
résultat du travail des musiciens et <em>sound designers</em> de la
<em>demoscene</em> qui utilisent des <em>trackers</em><a href="#fn23"
class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a>,
des logiciels spécifiques à la <em>demoscene</em>, pour composer leurs
morceaux.</p>
<p>Les compétences nécessaires pour exceller dans cette catégorie sont
nombreuses et incluent une connaissance approfondie des principes de la
composition musicale, ainsi qu’une maîtrise des techniques spécifiques à
la création de <em>mods</em>. Parmi ces techniques, l’utilisation des
<em>trackers</em> et la manipulation des échantillons sonores sont
particulièrement importantes. Les <em>mods</em> peuvent varier
grandement en style et en genre, allant de la musique électronique à la
musique classique, en passant par le <em>rock</em>, le <em>jazz</em> et
bien d’autres. Ils sont évalués sur des critères tels que leur
originalité, leur qualité musicale, leur technique et leur intégration
dans la production globale.</p>
<p>Autrefois, cette catégorie comprenait des compétitions Modules 4
voies et <em>multichannels</em>, mais elle a évolué avec l’arrivée du
format MP3, qui a en grande partie remplacé les compétitions
traditionnelles. Le concept des modules, initialement développé par les
<em>demomakers</em> sur Atari et porté sur diverses plateformes comme
l’Amiga, le PC ou l’Amstrad, est fondé sur l’enregistrement de petits
sons pour composer une partition. Des logiciels comme FastTracker2 ou
Scream Tracker sont utilisés pour créer ces partitions en manipulant les
sons enregistrés à différentes vitesses pour reproduire les notes
musicales (voir <a href="#fasttracker00" data-reference-type="ref"
data-reference="fasttracker00">[fasttracker00]</a> et <a
href="#screamtracker00" data-reference-type="ref"
data-reference="screamtracker00">2.22</a>). Certains musiciens de la
<em>demoscene</em>, tels que Skaven, Clawz et Necro, sont reconnus comme
des références dans cet art.</p>
<figure id="screamtracker00">
<a href="./memoire/images/demoscene/fasttracker00.png" target="_blank"><img src="./memoire/images/demoscene/fasttracker00.png" alt="Image 1" class="side-by-side2" /></a>
<a href="./memoire/images/demoscene/screamtracker00.png" target="_blank"><img src="./memoire/images/demoscene/screamtracker00.png" alt="Image 2" class="side-by-side2" /></a>
<figcaption>Scream Tracker</figcaption>
</figure>
<p>Dans les compétitions, les modules 4 voies permettent de jouer
jusqu’à 4 instruments simultanément, tandis que les
<em>multichannels</em> offrent une plus grande capacité, souvent limitée
à 32 ou 64 portées. Cette catégorie <em>mod</em> offre ainsi une
plateforme aux musiciens et <em>sound designers</em> de la
<em>demoscene</em> pour exprimer leur talent, partager leur passion pour
la musique et contribuer à enrichir les productions de la communauté
<em>demoscene</em> avec des compositions audio.</p>
<h3 class="unnumbered"
id="au-delà-des-frontières-la-catégorie-wild">Au-delà des frontières :
la catégorie <em>wild</em></h3>
<figure id="sreal">
<a href="./memoire/images/demoscene/demos/futur1.png" target="_blank"><img src="./memoire/images/demoscene/demos/futur1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/futur2.png" target="_blank"><img src="./memoire/images/demoscene/demos/futur2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/futur3.png" target="_blank"><img src="./memoire/images/demoscene/demos/futur3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Future Crew - Second Reality</figcaption>
</figure>
<p>Au fil du temps, l’évolution de la <em>demoscene</em> a engendré
l’émergence de formes artistiques nouvelles, difficiles à catégoriser au
sein des catégories traditionnelles comme la musique, les images ou les
<em>demos</em>. De cette évolution est née la catégorie <em>wild</em>,
qui s’est imposée comme un terrain d’expression artistique non
conventionnel.</p>
<p>Les concours <em>wild</em> offrent souvent des spectacles en direct
où les créateurs montent sur scène pour dévoiler leurs œuvres. Ces
présentations peuvent varier d’un microcontrôleur récupéré d’un
réfrigérateur à des performances artistiques plus extravagantes. Malgré
leur caractère parfois déconcertant, ces productions sont généralement
le fruit d’un travail sérieux et méticuleux, combinant effets visuels et
compositions musicales.</p>
<p>Aucune machine, aussi insolite soit-elle, n’échappe à l’exploration
artistique de la <em>demoscene</em>. De la simple calculatrice de poche
aux installations monumentales, tout peut être utilisé comme vecteur
d’expression artistique, reflétant ainsi la diversité de la
communauté.</p>
<h2 id="techniques-visuelles-dans-la-demoscene">Techniques visuelles
dans la <em>demoscene</em></h2>
<figure id="panic">
<a href="./memoire/images/demoscene/demos/futur4.png" target="_blank"><img src="./memoire/images/demoscene/demos/futur4.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/futur5.png" target="_blank"><img src="./memoire/images/demoscene/demos/futur5.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/futur6.png" target="_blank"><img src="./memoire/images/demoscene/demos/futur6.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Future Crew - Panic</figcaption>
</figure>
<p>Nous allons maintenant étudier quelques techniques fréquemment
utilisées afin d’appréhender leur impact visuel. Parmi les méthodes
adoptées par les <em>demosceners</em> pour leurs créations, nous avons
précédemment mentionné l’usage de la programmation en assembleur par les
<em>crackers</em> pour optimiser à la fois les performances et la taille
des <em>demos</em>. De plus, sur le Commodore 64, des fonctionnalités
<em>hardware</em> souvent méconnues ont été découvertes par les
programmeurs astucieux de la <em>demoscene</em>. Parmi ces trouvailles,
on peut citer la capacité à éliminer la bordure de l’écran grâce aux
<em>raster interrupts</em>, ou encore l’utilisation d’un quatrième canal
pour le son.</p>
<h3 class="unnumbered"
id="synchronisation-visuelle-les-raster-interrupts">Synchronisation
visuelle: les <em>raster interrupts</em></h3>
<p>Les <em>raster interrupts</em> sont une technique utilisée dans la
<em>demoscene</em>, notamment sur le Commodore 64, pour synchroniser des
effets visuels avec le balayage de l’écran (<em>raster</em>). Le
Commodore 64, comme de nombreux autres ordinateurs de cette époque,
utilise un balayage <em>raster</em> pour afficher les images à l’écran,
c’est-à-dire qu’il dessine l’écran ligne par ligne, de haut en bas. Un
<em>raster interrupt</em> intervient lorsqu’un programme interrompt le
processus normal de balayage <em>raster</em> pour exécuter un code
spécifique.</p>
<p>Dans la <em>demoscene</em>, les <em>raster interrupts</em> sont
souvent utilisés pour créer des effets graphiques avancés, comme des
<em>rasterbars</em>, des effets de <em>scrolling</em> et d’autres
animations complexes comme le <em>waving</em>.</p>
<h3 class="unnumbered" id="dépasser-les-limites-de-la-palette">Dépasser
les limites de la palette</h3>
<p>Bien que le Commodore 64 puisse afficher seulement 16 couleurs dont
seulement cinq nuances de gris, y compris le noir et le blanc, certaines
<em>demos</em> parvenaient à afficher plus de couleurs que cette palette
de base. Une méthode pour y parvenir est d’alterner rapidement entre
deux écrans légèrement différents pour mélanger les couleurs, exploitant
la persistance rétinienne<a href="#fn24" class="footnote-ref"
id="fnref24" role="doc-noteref"><sup>24</sup></a>. Cette technique est
exposée dans « Dream Time » du groupe Profik, où deux buffers sont
alternés 60 fois par seconde pour créer l’illusion de couleurs
supplémentaires.</p>
<h3 class="unnumbered" id="les-variations-avancées-du-scroll">Les
variations avancées du <em>scroll</em></h3>
<p>Un <em>scroll</em> fait référence à une technique où le texte ou les
graphiques défilent horizontalement ou verticalement à l’écran. Cette
technique était largement utilisée pour afficher des crédits, des
messages ou des graphismes artistiques dans les <em>demos</em> et les
<em>intros</em>. Initialement simples textes défilants, ils ont évolué
vers des versions DYPP (<em>Different Y Pixel Position</em>) ondulantes,
des <em>stretch-scrollers</em> irréguliers, des <em>scrollers</em>
inspirés de Star Wars, ou encore des <em>scrollers</em> en 3D virtuelle
autour d’une sphère.</p>
<h3 class="unnumbered"
id="vagues-et-ondulations-à-lécran-le-waving">Vagues et ondulations à
l’écran: le <em>waving</em></h3>
<p>Le <em>waving</em> désigne un effet graphique simulant des vagues ou
des ondulations sur l’écran. Cet effet est souvent obtenu en manipulant
les <em>pixels</em> ou en modifiant les lignes de balayage de manière à
créer une illusion de mouvement fluide et ondulant.</p>
<h3 class="unnumbered"
id="maîtriser-les-lignes-de-balayage-le-rasterbar">Maîtriser les lignes
de balayage: le <em>rasterbar</em></h3>
<p>Un <em>rasterbar</em> fait référence à un effet visuel créé en
manipulant les lignes de balayage (<em>rasters</em>) de l’écran. L’effet
est généralement réalisé en changeant dynamiquement la couleur ou la
luminosité des lignes de balayage pour créer des motifs ou des
animations. Ces effets exploitent les caractéristiques techniques des
anciens ordinateurs, comme le Commodore 64, qui permettaient un contrôle
précis des lignes de balayage.</p>
<h3 class="unnumbered" id="simuler-le-mouvement-le-bouncing">Simuler le
mouvement: le <em>bouncing</em></h3>
<p><em>Bouncing</em> fait référence à un effet visuel où un objet ou du
texte semble rebondir de haut en bas ou de gauche à droite à l’écran.
Cet effet est souvent utilisé pour ajouter du dynamisme et de
l’animation à une <em>demo</em> ou à une <em>intro</em>, donnant ainsi
une sensation de mouvement et d’interaction.</p>
<h3 class="unnumbered"
id="le-logo-dans-la-demoscene-comme-signature-artistique">Le
<em>logo</em> dans la <em>demoscene</em> comme signature artistique</h3>
<p>Un <em>logo</em> désigne généralement un élément graphique
représentant le nom ou l’identité visuelle d’un groupe de
<em>demosceners</em>. Ce <em>logo</em> est souvent intégré dans les
<em>intros</em>, les <em>demos</em> ou les <em>cracktros</em> pour
identifier le groupe ou le collectif derrière la production. Il est
conçu pour être distinctif et mémorisable, reflétant souvent le style et
l’esthétique du groupe.</p>
<figure id="lemon">
<a href="./memoire/images/demoscene/demos/lemon1.png" target="_blank"><img src="./memoire/images/demoscene/demos/lemon1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/lemon2.png" target="_blank"><img src="./memoire/images/demoscene/demos/lemon2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/lemon3.png" target="_blank"><img src="./memoire/images/demoscene/demos/lemon3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Lemonade - Fairlight</figcaption>
</figure>
<h1 id="la-demoscene-aujourdhui">La <em>demoscene</em> aujourd’hui</h1>
<h2 id="fascination-pour-les-machines-emblématiques">Fascination pour
les machines emblématiques</h2>
<p>La <em>demoscene</em> d’aujourd’hui est marquée par l’usage
persistant d’ordinateurs obsolètes tels que le Commodore 64, le Plus 4,
le ZX Spectrum et l’Amiga. Ces machines, bien que technologiquement
dépassées et dotées de limitations parfois drastiques datant de
plusieurs décennies, continuent d’inspirer et de servir de supports à
des réalisations.</p>
<p>Cette persistance reflète la popularité indéniable de ces machines
emblématiques. Le Commodore 64, par exemple, conserve son titre de
champion en termes de créativité au sein de la <em>demoscene</em>, avec
un impressionnant catalogue de plus de 18 000 productions recensées. Ce
chiffre surpasse même celui des créations pour PC, qui s’élève à environ
14 000, mettant en évidence la fascination continue pour ces anciennes
plateformes.</p>
<p>Cette inclination pour les machines d’antan ne se résume pas à de la
nostalgie. Elle témoigne d’une volonté de repousser les limites, de
défier les contraintes techniques et de valoriser l’ingéniosité
nécessaire pour créer des <em>demos</em> sur des plateformes aux
capacités limitées. De plus, l’utilisation de ces machines historiques
dans la création contemporaine renforce le lien entre les générations de
<em>demomakers</em> et perpétue l’héritage culturel de la
<em>demoscene</em>.</p>
<h2 id="vers-une-automatisation-de-la-création-artistique">Vers une
automatisation de la création artistique</h2>
<p>Aujourd’hui, deux approches dominantes structurent la création
d’<em>intros</em> ou de <em>demos</em> sur PC. La première, plus
traditionnelle, implique une programmation intégrale de chaque élément
de la <em>demo</em> à partir de zéro. En revanche, la seconde repose sur
l’utilisation d’outils de création de <em>demos</em> spécialement
élaborés par les programmeurs au sein du groupe.</p>
<p>Dans le passé, la réalisation d’objets 3D exigeait un processus
manuel méticuleux. Imaginons la conception de la lettre « D » en trois
dimensions : elle débutait par un croquis détaillé sur papier
millimétré, suivi de l’identification minutieuse de chaque point du
dessin à l’aide d’une grille. Ces coordonnées étaient ensuite
introduites dans un programme pour générer le code source nécessaire à
la modélisation de l’objet.</p>
<p>Cependant, cette méthode laborieuse comportait des désavantages
manifestes, notamment en termes de répétitivité et de complexité. Ainsi,
la conception de programmes spécialisés automatisant la génération du
code source est rapidement devenue une alternative attrayante. Cette
automatisation présente des avantages considérables : elle optimise le
temps de création, réduit les erreurs humaines et améliore l’efficacité
globale du processus de modélisation 3D (voir <a href="#devtool00"
data-reference-type="ref" data-reference="devtool00">3.1</a>).</p>
<figure id="devtool00">
<a href="./memoire/images/demoscene/demos/devtool1.png" target="_blank"><img src="./memoire/images/demoscene/demos/devtool1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/devtool2.png" target="_blank"><img src="./memoire/images/demoscene/demos/devtool2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/devtool3.png" target="_blank"><img src="./memoire/images/demoscene/demos/devtool3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Interface d’un outil sur mesure pour le développement de
<em>demos</em></figcaption>
</figure>
<p>Ces outils, développés par les <em>demosceners</em> eux-mêmes, se
distinguent des solutions commerciales comme Photoshop, 3D Studio ou
Premiere. Ils fusionnent ces fonctionnalités en offrant une gamme
étendue de fonctionnalités, de la génération de textures procédurales à
l’édition de scènes animées, le tout intégré dans une interface unifiée.
De plus, ils permettent un visionnage immédiat de la <em>demo</em> par
un simple appui sur la barre d’espace, facilitant ainsi une de création
fluide et intuitive.</p>
<p>Le développement de ces outils sur mesure par les
<em>demosceners</em> s’explique par leur orientation vers la création
d’<em>intros</em> 64 Ko, imposant des contraintes strictes de taille de
fichier. Ces solutions spécialisées répondent donc précisément à leurs
exigences en matière de taille et de fonctionnalités.</p>
<p>Dans leur démarche créative, les <em>demosceners</em> privilégient
l’utilisation de données brutes plutôt que de gros fichiers
préexistants. Ils se basent sur des paramètres et algorithmes pour
générer les éléments visuels et sonores nécessaires à la <em>demo</em>,
permettant ainsi de produire des œuvres tout en conservant des tailles
de fichier minimales. Cette approche algorithmique leur permet d’obtenir
des rendus dans des tailles de fichier réduites, sans dépendre de
fichiers volumineux.</p>
<p>Cependant, il convient de souligner que tous les <em>demosceners</em>
ne privilégient pas nécessairement la création d’outils sur mesure.
Certains préférant une approche plus traditionnelle, débutent chaque
projet de manière autonome et intègrent progressivement des effets et
des fonctionnalités pour parvenir au résultat final, sans le support
d’un outil de création dédié.</p>
<figure id="lotus">
<a href="./memoire/images/demoscene/demos/start1.png" target="_blank"><img src="./memoire/images/demoscene/demos/start1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/start2.png" target="_blank"><img src="./memoire/images/demoscene/demos/start2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/start3.png" target="_blank"><img src="./memoire/images/demoscene/demos/start3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>The Black Lotus - Starstruck</figcaption>
</figure>
<h2 id="apprécier-la-profondeur-technique-des-demos">Apprécier la
profondeur technique des <em>demos</em></h2>
<figure id="crest">
<a href="./memoire/images/demoscene/demos/kresto1.png" target="_blank"><img src="./memoire/images/demoscene/demos/kresto1.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/kresto2.png" target="_blank"><img src="./memoire/images/demoscene/demos/kresto2.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/kresto3.png" target="_blank"><img src="./memoire/images/demoscene/demos/kresto3.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Krestology - Crest</figcaption>
</figure>
<p>Pour pleinement apprécier une <em>demo</em>, il est nécessaire pour
le public d’avoir une connaissance des limitations techniques ainsi que
des capacités intrinsèques de l’ordinateur concerné. Cette compréhension
permet non seulement d’évaluer l’exploit technique réalisé par les
<em>demomakers</em>, mais également d’appréhender la subtilité et
l’ingéniosité de leur création.</p>
<p>Les personnes non familières avec les contraintes techniques peuvent
ne pas être impressionnées par des réalisations en apparence simples,
comme un cube en rotation. Toutefois, il est important de souligner que
des fonctionnalités aussi basiques peuvent représenter des prouesses
considérables sur une plateforme donnée, surpassant souvent les attentes
initiales des concepteurs du système.</p>
<p>Pour qu’une <em>demo</em> soit véritablement mémorable et appréciée,
elle doit être ancrée dans un concept artistique solide. Cette
combinaison d’excellence technique et de créativité conceptuelle est ce
qui distingue les <em>demos</em> les plus marquantes.</p>
<h2 id="lesprit-déquipe-et-la-synergie-créative">L’esprit d’équipe et la
synergie créative</h2>
<p>La collaboration est au cœur de la <em>demoscene</em> moderne. Les
<em>demomakers</em> travaillent souvent en équipe, combinant leurs
talents et leurs compétences. Cette collaboration permet non seulement
de partager des connaissances et des idées, mais aussi de repousser les
limites de ce qui est techniquement et artistiquement possible.</p>
<p>La communauté <em>demoscene</em> reste un élément essentiel de cette
culture. Les festivals de <em>demos</em>, les compétitions et les
rencontres entre <em>demomakers</em> continuent d’être des moments forts
de la vie de la <em>demoscene</em>, permettant aux artistes de partager
leurs œuvres, d’échanger des <em>feedbacks</em> et de célébrer ensemble
leur passion commune.</p>
<p>Les <em>demos</em> sont généralement le fruit du travail d’une
équipe, avec un membre dédié aux graphismes, un autre à la musique, et
plusieurs autres à la programmation, suivant ainsi un schéma similaire à
celui de la création de jeux vidéo ou de la réalisation de films.</p>
<p>Pour ces créateurs, la véritable récompense réside dans la
reconnaissance et l’appréciation de leurs pairs au sein de la communauté
<em>demo</em>. Bien que leurs œuvres puissent atteindre un niveau
d’excellence reconnu à l’échelle internationale, l’aspiration principale
de ces artistes n’est pas tant d’atteindre un public étendu ou de
rechercher la célébrité, mais plutôt de créer des œuvres qui résonnent
profondément avec ceux qui comprennent et apprécient véritablement la
culture unique de la <em>demoscene</em>. C’est cette connexion spéciale
avec une communauté dédiée qui donne une signification et une valeur
inestimables à leur travail.</p>
<figure id="dck">
<a href="./memoire/images/demoscene/demos/dck00.png" target="_blank"><img src="./memoire/images/demoscene/demos/dck00.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/dck01.png" target="_blank"><img src="./memoire/images/demoscene/demos/dck01.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/demoscene/demos/dck02.png" target="_blank"><img src="./memoire/images/demoscene/demos/dck02.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Demo Construction Kit - D.C.K.</figcaption>
</figure>
<h2 id="lart-de-limprovisation-numérique-le-livecoding">L’art de
l’improvisation numérique : le <em>livecoding</em></h2>
<p>Après avoir exploré les racines profondes de la <em>demoscene</em>,
nous nous tournons désormais vers une discipline plus contemporaine : le
<em>livecoding</em><a href="#fn25" class="footnote-ref" id="fnref25"
role="doc-noteref"><sup>25</sup></a>. Mon mémoire se veut centré sur la
pratique du <em>livecoding</em>, avec une attention particulière portée
à la programmation en direct de <em>fragment shaders</em>. Pour une
introduction rapide, un <em>shader</em> est un programme destiné à être
exécuté sur le GPU, déterminant la manière dont une image est affichée à
l’écran. Des détails plus approfondis seront abordés dans un chapitre
ultérieur.</p>
<h3 class="unnumbered" id="le-shader-showdown-lart-du-livecoding">Le
<em>shader showdown</em> : l’art du <em>livecoding</em></h3>
<p>L’épicentre de cette pratique est le <em>shader showdown</em>, une
compétition phare dans le cadre des <em>demoparties</em>. Durant ces
événements, les programmeurs de <em>shaders</em> s’affrontent sur scène,
accompagnés de DJs, pour coder en temps réel devant un public nombreux.
Cette compétition emblématique a vu le jour lors de la WeCan en 2013,
une <em>demoparty</em> polonaise. Depuis, de nombreuses
<em>demoparties</em> ont intégré le <em>shader showdown</em> à leur
programmation. Notamment, la Revision<a href="#fn26"
class="footnote-ref" id="fnref26" role="doc-noteref"><sup>26</sup></a>
se distingue comme la plus grande <em>demoparty</em> au niveau
mondial.</p>
<h3 class="unnumbered"
id="le-shader-showdown-la-compétition-du-livecoding">Le <em>shader
showdown</em> : la compétition du <em>livecoding</em></h3>
<p>Un <em>shader showdown</em>, c’est un tournoi où les participants ont
25 minutes pour coder <em>from scratch</em> un <em>shader</em>, et tout
cela en direct. Le code et sa représentation visuelle s’affichent sur
des écrans géants pendant qu’un DJ s’occupe de la musique. Le public
vote à la fin pour son <em>shader</em> préféré. Le thème peut-être
imposé pour rajouter de la complexité, mais parfois les participants
sont complètement libres de leurs créations.</p>
<p>Une participation à un <em>shader showdown</em> demande des
connaissances et de l’entraînement. De la même manière qu’un peintre
doit connaître des techniques, maîtriser ses couleurs, les propriétés
des différents types de peinture qu’il emploie, et surtout s’entraîner
pour devenir un maître de la peinture à l’huile, il faut de
l’entraînement et creuser l’aspect technique, mathématique, pour
progresser en <em>shader coding</em> et faire cela en <em>live</em>
devant un public, que ce soit dans le cadre d’un <em>showdown</em> ou
d’un <em>VJing</em><a href="#fn27" class="footnote-ref" id="fnref27"
role="doc-noteref"><sup>27</sup></a>.</p>
<h3 class="unnumbered"
id="le-défi-du-livecoding-créativité-et-technique-sur-scène">Le défi du
<em>livecoding</em> : créativité et technique sur scène</h3>
<p>La compétition ressemble à la création d’une démo 4k en direct sur
scène, accompagnée d’une bande son mixée par un DJ. Il est étonnant de
constater qu’un effet visuellement frappant peut être obtenu avec
seulement 5 lignes de code dans un <em>shader</em>, et c’est sans doute
cette possibilité qui a été perçue par les <em>demosceners</em> lors de
la mise en place du premier <em>showdown</em>.</p>
<p>Cette pratique est extrêmement exigeante, nécessitant une solide
mémoire, des compétences techniques avancées, une capacité à gérer la
pression, et surtout, une créativité spontanée. La communauté des
<em>demosceners</em> reconnaît et valorise ces compétences, en témoigne
leur engouement pour cette compétition.</p>
<p>Les participants nourrissent une véritable passion pour l’expérience
scénique, captant le rythme de la musique dans une ambiance
électrisante. Une appréhension naturelle précède toujours leur montée
sur scène. Néanmoins, une fois les premières marches menant vers la
scène franchies, ils ressentent un apaisement, percevant la phase la
plus stressante comme étant derrière eux. Ils peuvent alors pleinement
profiter de cet instant, se montrer tels qu’ils sont sur scène et capter
l’adhésion du public, que ce soit pour leur art ou leur personnalité,
s’immergeant ainsi totalement dans le présent.</p>
<p>En règle générale, les <em>livecoders</em> s’entraînent intensivement
chez eux sur leurs <em>shaders</em>, les mémorisant parfois, tout en
incorporant des éléments flexibles pour un environnement de base
adaptable. Cette méthode leur permet d’improviser lors des compétitions,
ajoutant ainsi une dimension imprévisible à la fois pour eux et pour le
public.</p>
<h3 class="unnumbered"
id="la-collaboration-et-le-partage-au-cœur-du-livecoding">La
collaboration et le partage au cœur du <em>livecoding</em></h3>
<p>L’apprentissage du <em>livecoding</em> s’appuie principalement sur la
transmission orale et le partage de connaissances au sein de la
communauté <em>open source</em>. Des personnalités comme Inigo Quilez<a
href="#fn28" class="footnote-ref" id="fnref28"
role="doc-noteref"><sup>28</sup></a> ainsi que des collectifs
artistiques comme le Cookie Collective jouent un rôle prépondérant en
partageant généreusement leurs connaissances. Cette culture de partage
et de collaboration en <em>open source</em> au sein de la communauté
d’art numérique en temps réel est essentielle pour favoriser son
expansion et toucher un public plus large.</p>
<h3 class="unnumbered"
id="livecoding-le-retour-aux-sources"><em>Livecoding</em> : le retour
aux sources</h3>
<p>En général, ce n’est pas tant la <em>demoscene</em> en elle-même qui
constitue le moyen d’expression privilégié des <em>livecoders</em>, mais
plutôt le <em>shader coding</em>. C’est au sein de la <em>demoscene</em>
qu’ils ont été initiés à cette discipline et qu’ils en ont découvert
l’existence. Au sein du <em>livecoding</em>, deux aspects distincts
retiennent l’attention des <em>demosceners</em>.</p>
<p>Premièrement, l’exploration du code bas niveau pour en comprendre les
nuances. Cette démarche renforce leur expertise technique, à la fois
dans la conception artistique et dans leurs activités professionnelles.
Deuxièmement, la programmation sur des plateformes anciennes leur offre
l’opportunité de renouer avec des objets de leur enfance, tout en
adoptant une perspective adulte. La <em>demoscene</em> modifie leur
perception de leurs compétences, les incitant à voir chaque machine
comme une aire de jeu potentielle.</p>
<h3 class="unnumbered" id="le-défi-du-code-golfing">Le défi du <em>code
golfing</em></h3>
<p>Au sein même de la discipline de <em>livecoding</em>, une pratique
spécifique se démarque : le <em>code golfing</em><a href="#fn29"
class="footnote-ref" id="fnref29" role="doc-noteref"><sup>29</sup></a>.
L’objectif est de concevoir un shader en utilisant le moins de
caractères possible, avec le défi supplémentaire de le rendre compatible
avec la limite de caractères d’un <em>tweet</em>.</p>
<p>Le terme <em>golfing</em> est inspiré de la quête d’efficacité et de
concision, similaire à l’objectif d’un golfeur de terminer un parcours
avec le moins de coups. Dans le domaine des <em>shaders</em>, cela se
traduit par la création d’un <em>fragment shader</em>, qui atteint une
qualité visuelle avec le minimum de caractères de code. Cette pratique
sollicite la concision, la créativité et la maîtrise du langage de
programmation du développeur.</p>
<h3 class="unnumbered"
id="outils-clés-pour-le-développement-de-shaders">Outils clés pour le
développement de <em>shaders</em></h3>
<p>Dans le vaste éventail d’outils disponibles pour l’exploration et le
développement des <em>shaders</em>, quatre plateformes se distinguent
particulièrement : Shadertoy, Bonzomatic, KodeLife et ShaderEditor.</p>
<h4 class="unnumbered"
id="shadertoy-plateforme-de-création-et-communauté-de-shaders">Shadertoy
: plateforme de création et communauté de <em>shaders</em></h4>
<p>Le site le plus populaire dédié à la création de <em>shaders</em> est
Shadertoy, créé par Inigo Quilez. Il permet de créer des
<em>shaders</em> en ligne, et son aspect communautaire donne la
possibilité de consulter le code d’autres utilisateurs, et donc
d’apprendre de nouvelles façons de coder (voir <a href="#shadertoy000"
data-reference-type="ref" data-reference="shadertoy000">3.5</a>).
Shadertoy s’appuie sur l’API WebGL pour effectuer un rendu graphique
dans le navigateur à l’aide du GPU. Dans Shadertoy, on ne peut écrire
que dans le fragment shader, le vertex shader ne nous est pas
accessible. On démarre avec un <em>plane</em> qui représente la surface
de l’écran comme seule géométrie de départ. Ainsi si l’on veut
représenter des scènes 3D, on doit s’appuyer sur l’algorithme de <em>ray
marching</em> et les SDFs pour représenter les formes. À noter qu’un
simple copier-coller ne suffira pas si l’on veut exporter notre shader
vers un logiciel tiers (Unreal, TouchDesigner, Blender...). En effet il
existe différents langages de <em>shaders</em> (GLSL, HLSL, Cg,
Metal...), qui malgré leurs grandes similarités syntaxiques diffèrent
sur quelques détails. Dès que l’on a saisi les subtilités de chaque
langage, il devient très facile de traduire ces codes « à la main ». En
général il s’agira de traduire les types, de rajouter des points («
<code>.</code> ») aux flottants etc. Shadertoy reste donc un excellent
moyen pour prototyper des <em>shaders</em> en vue de les utiliser dans
d’autres logiciels ensuite, mais surtout il permet de partager ses
créations avec une communauté qui n’hésite pas à laisser des
commentaires pertinents pour corriger notre code.</p>
<figure id="shadertoy000">
<a href="./memoire/images/demoscene/shadertoy01.PNG" target="_blank"><img src="./memoire/images/demoscene/shadertoy01.PNG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/demoscene/shadertoy00.PNG" target="_blank"><img src="./memoire/images/demoscene/shadertoy00.PNG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Shadertoy</figcaption>
</figure>
<h4 class="unnumbered" id="bonzomatic">Bonzomatic</h4>
<p>Bonzomatic se distingue comme un logiciel <em>open source</em>
accessible sur <a
href="https://github.com/Gargaj/Bonzomatic">GitHub</a>. Conçu
principalement par Gargaj, il se caractérise par une approche qui
privilégie le développement hors ligne tout en offrant une flexibilité
remarquable. Sa philosophie <em>open source</em> favorise l’implication
de la communauté dans son développement, ce qui lui confère une
dynamique constante et une capacité d’évolution continue.</p>
<figure id="outilsshad01">
<a href="./memoire/images/livecoding/outilsshad00.jpeg" target="_blank"><img src="./memoire/images/livecoding/outilsshad00.jpeg" alt="Image 1" class="side-by-side2" /></a> <span
id="outilsshad00" label="outilsshad00"></span>
<a href="./memoire/images/livecoding/outilsshad01.png" target="_blank"><img src="./memoire/images/livecoding/outilsshad01.png" alt="Image 2" class="side-by-side2" /></a> <span
id="outilsshad01" label="outilsshad01"></span>
<figcaption>Bonzomatic</figcaption>
</figure>
<p>Sa particularité réside dans ses règles strictes appliquées lors des
compétitions. En effet, Bonzomatic impose des contraintes spécifiques,
telles que l’interdiction d’accéder à Internet et l’impossibilité
d’importer des textures. Ces limitations visent à mettre les
compétiteurs sur un pied d’égalité, en les incitant à exploiter au
maximum leurs compétences et leur créativité sans recourir à des
ressources externes.</p>
<h4 class="unnumbered" id="kodelife">KodeLife</h4>
<p>KodeLife s’impose comme l’outil idéal lorsqu’il s’agit d’intégrer des
contrôleurs pour des performances <em>live</em> ou des événements
interactifs. Sa fonctionnalité permettant de gérer les entrées en temps
réel facilite la liaison entre le <em>shader</em> et les dispositifs de
contrôle. Cette capacité dynamique ouvre la porte à une créativité
accrue, permettant aux développeurs de concevoir des expériences
immersives et interactives de manière plus intuitive. Sa facilité
d’utilisation pour l’intégration du MIDI en a fait un choix privilégié
pour mes expérimentations (voir <a href="#outilsshadK"
data-reference-type="ref" data-reference="outilsshadK">3.7</a>).</p>
<figure id="outilsshadK">
<a href="./memoire/images/livecoding/outilsshad02.png" target="_blank"><img src="./memoire/images/livecoding/outilsshad02.png" alt="Image 1" class="side-by-side2" /></a> <span
id="outilsshad02" label="outilsshad02"></span>
<a href="./memoire/images/livecoding/outilsshad03.png" target="_blank"><img src="./memoire/images/livecoding/outilsshad03.png" alt="Image 2" class="side-by-side2" /></a> <span
id="outilsshad03" label="outilsshad03"></span>
<figcaption>KodeLife</figcaption>
</figure>
<h4 class="unnumbered" id="shadereditor">ShaderEditor</h4>
<p>Enfin, pour les moments où l’inspiration surgit en déplacement, comme
lors d’un voyage en train, ShaderEditor sur tablette Android devient un
allié précieux. Cette application permet de coder des <em>shaders</em>
de manière intuitive et efficace sur des appareils mobiles, offrant
ainsi une flexibilité qui s’adapte au mode de vie nomade de nombreux
développeurs et artistes. Sa capacité à coder efficacement des
<em>shaders</em> sur le pouce permet de capturer rapidement les idées
créatives, quel que soit l’endroit ou le moment où l’inspiration surgit
(voir <a href="#outilsshadSE" data-reference-type="ref"
data-reference="outilsshadSE">3.8</a>).</p>
<figure id="outilsshadSE">
<a href="./memoire/images/livecoding/outilsshad04.png" target="_blank"><img src="./memoire/images/livecoding/outilsshad04.png" alt="Image 1" class="side-by-side2"/></a> <span id="outilsshad04" label="outilsshad04"></span>
<a href="./memoire/images/livecoding/outilsshad05.png" target="_blank"><img src="./memoire/images/livecoding/outilsshad05.png" alt="Image 2" class="side-by-side2" /></a> <span id="outilsshad05" label="outilsshad05"></span>
<figcaption>ShaderEditor</figcaption>
</figure>
<h4 class="unnumbered" id="desmos-graphtoy">Desmos / Graphtoy</h4>
<p>Je souhaitais également explorer une catégorie d’outils indispensable
: les outils de visualisation graphique des fonctions mathématiques.
Dans le cadre du développement de <em>shaders</em>, ces sites sont
essentiels pour expérimenter avec des équations et des fonctions
mathématiques, en vue de créer des effets visuels complexes. En effet,
lors de la conception d’un shader, le développeur est constamment engagé
dans le processus de « mappage » de valeurs d’un intervalle vers un
autre, et dans l’affinement de l’évolution de ces valeurs. Des
plateformes telles que Desmos et Graphtoy offrent également une
meilleure compréhension des transformations géométriques comme les
translations, les rotations et les mises à l’échelle (voir <a
href="#desmos00" data-reference-type="ref"
data-reference="desmos00">[desmos00]</a> et <a href="#graphtoy00"
data-reference-type="ref" data-reference="graphtoy00">3.9</a>).</p>
<figure id="graphtoy00">
<a href="./memoire/images/demoscene/desmos00.PNG" target="_blank"><img src="./memoire/images/demoscene/desmos00.PNG" alt="Image 1" class="side-by-side2" /></a> <span
id="desmos00" label="desmos00"></span>
<a href="./memoire/images/demoscene/graphtoy00.PNG" target="_blank"><img src="./memoire/images/demoscene/graphtoy00.PNG" alt="Image 2" class="side-by-side2" /></a> <span
id="graphtoy00" label="graphtoy00"></span>
<figcaption>Desmos // Graphtoy</figcaption>
</figure>
<h1 id="le-pipeline-graphique">Le <em>pipeline</em> graphique</h1>
<h2 id="introduction-2">Introduction</h2>
<p>Avant de nous lancer dans l’étude de la programmation de <em>fragment
shaders</em>, il me semblait primordial de revenir rapidement sur le
<em>pipeline</em> de la carte graphique et ses différentes étapes afin
d’avoir une meilleure compréhension de ce processus qui permet
d’afficher une scène 3D sur un écran 2D.</p>
<h3 class="unnumbered"
id="différences-entre-le-gpu-et-le-cpu">Différences entre le GPU et le
CPU</h3>
<p>Les différences fondamentales entre le CPU et le GPU résident
principalement dans leurs architectures, leurs conceptions et leurs
fonctions principales. Le CPU est conçu pour exécuter des tâches de
manière séquentielle. Le <em>strip</em> <a href="#cpu00"
data-reference-type="ref" data-reference="cpu00">4.1</a> illustre le
processus de dessin d’une image <em>pixel</em> par <em>pixel</em> de
manière séquentielle et lente.</p>
<figure id="cpu00">
<a href="./memoire/images/pipeline/gpu00.png" target="_blank"><img src="./memoire/images/pipeline/gpu00.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/pipeline/gpu01.png" target="_blank"><img src="./memoire/images/pipeline/gpu01.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/pipeline/gpu02.png" target="_blank"><img src="./memoire/images/pipeline/gpu02.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Le CPU: intelligent mais lent</figcaption>
</figure>
<p>En revanche, le GPU est conçu avec un grand nombre de cœurs plus
simples (parfois des milliers) qui peuvent travailler simultanément sur
des tâches parallèles, offrant une capacité de traitement massivement
parallèle pour les opérations graphiques. Le <em>strip</em> <a
href="#gpuill" data-reference-type="ref" data-reference="gpuill">4.2</a>
illustre bien cette caractéristique : le GPU est représenté par une
grille de tuyaux qui envoient directement leurs informations sur chaque
<em>pixel</em> pour dessiner la Joconde en un instant. Ces
<em>strips</em> sont tirés d’une vidéo d’une <a
href="https://www.youtube.com/watch?app=desktop&amp;v=WmW6SD-EHVY">conférence
humoristique de NVIDIA datant de 2008</a>.</p>
<figure id="gpuill">
<a href="./memoire/images/pipeline/gpu03.png" target="_blank"><img src="./memoire/images/pipeline/gpu03.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/pipeline/gpu04.png" target="_blank"><img src="./memoire/images/pipeline/gpu04.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/pipeline/gpu05.png" target="_blank"><img src="./memoire/images/pipeline/gpu05.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Le GPU: rapide mais idiot</figcaption>
</figure>
<h3 class="unnumbered" id="comprendre-le-gpu">Comprendre le GPU</h3>
<p>D’ailleurs, lorsque l’on parle du <em>pipeline</em> de la carte
graphique c’est un abus de langage, on devrait plutôt parler de
<em>pipeline</em> du GPU (<em>Graphical Processor Unit</em>).
Schématiquement, une carte graphique se compose d’un processeur dédié,
le GPU, et d’une mémoire vive spécifique (voir <a href="#gpuproc"
data-reference-type="ref" data-reference="gpuproc">4.3</a>).</p>
<figure id="gpuproc">
<a href="./memoire/images//shaders/gpu00.png" target="_blank"><img src="./memoire/images//shaders/gpu00.png" alt="Image 1" class="side-by-side2"/></a> <span id="gpu00" label="gpu00"></span>
<a href="./memoire/images/pipeline/cg01.jpg" target="_blank"><img src="./memoire/images/pipeline/cg01.jpg" alt="Image 2" class="side-by-side2" /></a> <span id="gpu01" label="gpu01"></span>
<figcaption>Le GPU désigne le processeur dédié au traitement des données
graphiques.</figcaption>
</figure>
<p>Le rôle principal d’un GPU est de créer des images à partir de
données qui décrivent la scène. En général, ces données en entrée sont
une collection de triangles, car les triangles sont la forme géométrique
atomique pour décrire un objet 3D: avec des triangles, nous pouvons
représenter n’importe quel objet en trois dimensions. Avant de pouvoir
être exploitées par le GPU, ces données représentant la scène (une
collection de coordonnées de sommets<a href="#fn30" class="footnote-ref"
id="fnref30" role="doc-noteref"><sup>30</sup></a> représentant les
triangles dans l’espace 3D) doivent être chargées dans la mémoire vive
du GPU. Il faut donc que ces données soient décrites côté CPU avant de
les envoyer au <em>pipeline</em> de rendu (voir <a href="#pipeline01"
data-reference-type="ref" data-reference="pipeline01">[pipeline01]</a>
et <a href="#gpu01comm" data-reference-type="ref"
data-reference="gpu01comm">4.4</a>).</p>
<figure id="gpu01comm">
<a href="./memoire/images//shaders/pipeline01.jpg" target="_blank"><img src="./memoire/images//shaders/pipeline01.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images//shaders/pipeline02.jpg" target="_blank"><img src="./memoire/images//shaders/pipeline02.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Communication CPU-GPU</figcaption>
</figure>
<h3 class="unnumbered" id="le-parallélisme-dans-le-gpu">Le parallélisme
dans le GPU</h3>
<p>Il faut voir la carte graphique comme une machine capable de
parallélisme, c’est à dire qu’elle effectuera ses calculs sur chacun des
sommets puis sur chacun des <em>pixels</em> en parallèle. Le même
<em>vertex shader</em> s’exécutera une fois pour chaque <em>vertex</em>
et le même <em>fragment shader</em> s’exécutera une fois pour chaque
<em>pixel</em> comme si la carte graphique possédait des tuyaux dédiés
pour chaque <em>pixel</em>. En d’autres termes, si l’écran a une
résolution de <span class="math inline">\(1920\times1080\)</span>, le
<em>fragment shader</em> devra être exécuté <span
class="math inline">\(2.073.600\)</span> fois par image calculée. Les
GPU peuvent gérer cela parce qu’ils colorient de nombreux
<em>pixels</em> en parallèle (c’est-à-dire en même temps) grâce à des
<em>threads</em><a href="#fn31" class="footnote-ref" id="fnref31"
role="doc-noteref"><sup>31</sup></a> dédiés aux calculs de chaque
fragment. En particulier pour le <em>fragment shader</em>, le programme
ne peut agir que sur un seul <em>pixel</em> à la fois et ne peut pas
accéder aux valeurs des <em>pixels</em> voisins. En cela on dit souvent
que le <em>shader</em> est aveugle. Il est aussi incapable de se
souvenir du résultat du calcul de l’image précédente, en cela on parle
d’amnésie du <em>shader</em>.</p>
<h3 class="unnumbered" id="optimisation-matérielle">Optimisation
matérielle</h3>
<p>Un autre avantage du GPU est qu’il possède une accélération
matérielle conçue pour optimiser certaines fonctions mathématiques
utilisées couramment lors de l’écriture des <em>shaders</em>, comme les
opérations sur les matrices ou les calculs trigonométriques.</p>
<h2
id="étapes-du-pipeline-graphique-du-vertex-au-fragment-shader">Étapes du
<em>pipeline</em> graphique : du <em>vertex</em> au <em>fragment
shader</em></h2>
<p>Le <em>pipeline</em> de traitement graphique assure la conversion des
attributs des sommets en une image tridimensionnelle qui est ensuite
affichée à l’écran. Les attributs habituels comprennent la coordonnée 3D
de chaque sommet, sa coordonnée de texture et sa couleur. Cependant, il
est possible d’ajouter n’importe quel attribut car la carte graphique
interprétera ces données comme de la « data » pure. Les différentes
étapes de ce <em>pipeline</em>, dans leur séquence chronologique,
comprennent le <em>vertex shader</em>, le <em>geometry shader</em>, la
rastérisation (<em>rasterization</em> en anglais) et le <em>fragment
shader</em>. Dans cette section, nous nous concentrerons sur une analyse
détaillée du <em>vertex shader</em>, du <em>geometry shader</em> et de
la rastérisation. Quant au <em>fragment shader</em>, qui constitue la
pierre angulaire du <em>livecoding</em>, il sera décortiqué dans le
prochain chapitre.</p>
<h3 class="unnumbered" id="le-vertex-shader">Le <em>vertex
shader</em></h3>
<h4 class="unnumbered" id="le-vertex-shader-en-code">Le <em>vertex
shader</em> en code</h4>
<p>Voici un exemple très basique d’un <em>vertex shader</em>. On peut
remarquer que les données de la scène sont réceptionnées dans les
variables <code>pos</code> (3 coordonnées en <span
class="math inline">\(X\)</span>, en <span
class="math inline">\(Y\)</span> et en <span
class="math inline">\(Z\)</span>) et <code>col</code> (3 valeurs pour le
rouge, le vert et le bleu et 1 valeur pour l’opacité). On a donc accès à
la position et à la couleur de chaque <em>vertex</em>.</p>
<div class="sourceCode" id="cb1" data-language="GLSL"
data-caption="\textit{Vertex shader} en GLSL"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">attribute</span> <span class="dt">vec3</span> pos<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">attribute</span> <span class="dt">vec4</span> col<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">main</span><span class="op">()</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">gl_Position</span> <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>pos<span class="op">,</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>La variable <code>gl_Position</code> est une variable de sortie, donc
le programme se contente de récupérer la position de chaque
<em>vertex</em> et de l’envoyer à la prochaine étape du
<em>pipeline</em> (la rastérisation) sans leur appliquer de
transformation. On remarque cependant l’ajout d’une quatrième composante
avec la valeur <span class="math inline">\(1\)</span>. Ce <span
class="math inline">\(1\)</span> indique que nous utilisons des
coordonnées homogènes<a href="#fn32" class="footnote-ref" id="fnref32"
role="doc-noteref"><sup>32</sup></a>. En simplifiant on peut retenir que
lorsque cette quatrième composante est à <span
class="math inline">\(1\)</span> cela signifie que l’on désigne une
position, et lorsqu’elle est à <span class="math inline">\(0\)</span>
que l’on désigne une direction.</p>
<h3 class="unnumbered"
id="comprendre-les-transformations-matricielles">Comprendre les
transformations matricielles</h3>
<p>Le rôle fondamental du <em>vertex shader</em> est de transformer les
coordonnées de chaque sommet dans différents espaces, comme nous
l’explorerons plus en détail dans la section suivante. Heureusement, les
matrices de transformation permettent d’appliquer facilement des
opérations telles que la translation, la rotation et la mise à l’échelle
sur des objets en 3D. Il est à noter qu’une quatrième composante, notée
<span class="math inline">\(w\)</span>, est utilisée pour décrire les
coordonnées des sommets. Cette composante facilite la représentation des
transformations projectives et simplifie les calculs mathématiques
nécessaires au rendu 3D.</p>
<h4 class="unnumbered" id="la-matrice-identité">La matrice identité</h4>
<p>La matrice identité<a href="#fn33" class="footnote-ref" id="fnref33"
role="doc-noteref"><sup>33</sup></a> est couramment utilisée comme point
de départ pour les transformations. En effet, elle permet de s’assurer
du contenu de la mémoire avant d’effectuer les transformations
matricielles. Elle agit comme un élément neutre pour la multiplication
matricielle, comme le <span class="math inline">\(0\)</span> pour
l’addition ou le <span class="math inline">\(1\)</span> pour la
multiplication. Elle est souvent modifiée en ajoutant des opérations de
translation, de rotation ou de mise à l’échelle pour produire des
transformations plus complexes. <span
class="math display">\[\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
1\\
2\\
3\\
4
\end{bmatrix}
=
\begin{bmatrix}
1\\
2\\
3\\
4
\end{bmatrix}\]</span></p>
<h4 class="unnumbered" id="la-matrice-de-mise-à-léchelle">La matrice de
mise à l’échelle</h4>
<p>Si nous remplaçons les <span class="math inline">\(1\)</span> de la
matrice d’identité par des <span class="math inline">\(3\)</span>, cela
signifie que chaque élément du vecteur serait multiplié par <span
class="math inline">\(3\)</span> lors de la multiplication matricielle.
En conséquence, le vecteur serait uniformément augmenté de <span
class="math inline">\(3\)</span> dans toutes les directions. En
représentant les facteurs d’échelle par <span class="math inline">\((S1,
S2, S3)\)</span>, nous pouvons définir une matrice d’échelle pour
n’importe quel vecteur <span class="math inline">\((x, y, z)\)</span>
comme suit : <span class="math display">\[\begin{bmatrix}
S1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; S2 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; S3 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
x\\
y\\
z\\
1
\end{bmatrix}
=
\begin{bmatrix}
x \cdot S1\\
y \cdot S2\\
z \cdot S3\\
1
\end{bmatrix}\]</span></p>
<h4 class="unnumbered" id="la-matrice-de-translation">La matrice de
translation</h4>
<p>La translation déplace un objet d’une certaine distance le long des
axes <span class="math inline">\(X\)</span>, <span
class="math inline">\(Y\)</span> et <span
class="math inline">\(Z\)</span>. Pour représenter une translation dans
une matrice de transformation, on utilise une matrice identité de taille
<span class="math inline">\(4\times4\)</span>, mais avec des valeurs
spécifiques dans la dernière colonne (les trois premières valeurs de la
dernière colonne représentent les translations le long des axes <span
class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span>
et <span class="math inline">\(Z\)</span> respectivement). Par exemple,
pour une translation de <span class="math inline">\(tx\)</span>, <span
class="math inline">\(ty\)</span>, <span
class="math inline">\(tz\)</span>, la matrice de transformation
ressemblerait à cela :</p>
<p><span class="math display">\[\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; T_x\\
0 &amp; 1 &amp; 0 &amp; T_y\\
0 &amp; 0 &amp; 1 &amp; T_z\\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
x\\
y\\
z\\
1
\end{bmatrix}
=
\begin{bmatrix}
x + T_x\\
y + T_y\\
z + T_z\\
1
\end{bmatrix}\]</span></p>
<h4 class="unnumbered" id="la-matrice-de-rotation-autour-de-laxe-x">La
matrice de rotation autour de l’axe X</h4>
<p>La rotation fait tourner un objet autour des axes <span
class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span>
et <span class="math inline">\(Z\)</span>. Les rotations peuvent être
définies en radians ou en degrés. Pour chaque axe de rotation, il existe
une matrice de rotation correspondante. Par exemple, pour une rotation
autour de l’axe <span class="math inline">\(X\)</span> par un angle
<span class="math inline">\(\theta\)</span>, la matrice de rotation
serait : <span class="math display">\[\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; \cos{\theta} &amp; -\sin{\theta} &amp; 0\\
0 &amp; \sin{\theta} &amp; \cos{\theta} &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
x\\
y\\
z\\
1
\end{bmatrix}
=
\begin{bmatrix}
x\\
\cos{\theta} \cdot y - \sin{\theta} \cdot z\\
\sin{\theta} \cdot y + \sin{\theta} \cdot z\\\\
1
\end{bmatrix}\]</span></p>
<h4 class="unnumbered" id="la-matrice-de-rotation-autour-de-laxe-y">La
matrice de rotation autour de l’axe Y</h4>
<p>Pour la matrice de rotation autour de l’axe <span
class="math inline">\(Y\)</span>, on observe que cette matrice est
semblable à celle de la rotation autour de l’axe <span
class="math inline">\(X\)</span>, à la différence près que des zéros ont
été insérés dans la deuxième ligne et la deuxième colonne, à l’exception
de la diagonale où un <span class="math inline">\(1\)</span> est
conservé pour maintenir la position inchangée.</p>
<p><span class="math display">\[\begin{bmatrix}
\cos{\theta} &amp; 0 &amp; \sin{\theta} &amp; 0\\
0 &amp; 1 &amp; 0 &amp; 0\\
-\sin{\theta} &amp; 0 &amp; \cos{\theta} &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
x\\
y\\
z\\
1
\end{bmatrix}
=
\begin{bmatrix}

\cos{\theta} \cdot x + \sin{\theta} \cdot z\\
y\\
-\sin{\theta} \cdot x + \cos{\theta} \cdot z\\
1
\end{bmatrix}\]</span></p>
<h4 class="unnumbered" id="la-matrice-de-rotation-autour-de-laxe-z">La
matrice de rotation autour de l’axe Z</h4>
<p>Le même phénomène se produit pour la rotation autour de l’axe <span
class="math inline">\(Z\)</span> mais avec la troisième ligne et la
troisième colonne.</p>
<p><span class="math display">\[\begin{bmatrix}
\cos{\theta} &amp; -\sin{\theta} &amp; 0 &amp; 0\\
\sin{\theta} &amp;  \cos{\theta} &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
x\\
y\\
z\\
1
\end{bmatrix}
=
\begin{bmatrix}
\cos{\theta} \cdot x - \sin{\theta} \cdot y\\
\sin{\theta} \cdot x + \cos{\theta} \cdot y\\
z\\
1
\end{bmatrix}\]</span></p>
<h3 class="unnumbered"
id="comprendre-les-systèmes-de-coordonnées-en-3d">Comprendre les
systèmes de coordonnées en 3D</h3>
<p>Il était utile d’aborder le fonctionnement des matrices de
transformation, car le <em>vertex shader</em> a pour objectif de
convertir efficacement une représentation spatiale en une autre. Le rôle
principal du <em>vertex shader</em> est de transformer les coordonnées
3D de notre objet en coordonnées 3D normalisées<a href="#fn34"
class="footnote-ref" id="fnref34" role="doc-noteref"><sup>34</sup></a>
qui s’afficheront à l’écran. Ces coordonnées doivent se situer dans
l’intervalle <span class="math inline">\([-1, 1]\)</span>, car les
sommets avec des coordonnées en dehors de cette plage ne seront pas
visibles à l’écran. Le problème dans le code précédent est que nous nous
contentons de passer les coordonnées 3D des sommets sans appliquer de
transformation. La transformation des coordonnées en NDC se fait étape
par étape, en passant par cinq systèmes de coordonnées différents :</p>
<div class="samepage">
<ol>
<li><p>Coordonnées du modèle (<em>Model Space</em>)</p></li>
<li><p>Coordonnées du monde (<em>World Space</em>)</p></li>
<li><p>Coordonnées de la vue (<em>View Space</em> ou <em>Eye
Space</em>)</p></li>
<li><p>Coordonnées de projection (<em>Clip Space</em>)</p></li>
<li><p>Coordonnées normalisées de l’écran (NDC)</p></li>
</ol>
</div>
<p>Le <em>vertex shader</em> est responsable de la transformation des
coordonnées du modèle en coordonnées normalisées de l’écran, en
appliquant une série de transformations matricielles appropriées à
chaque sommet de l’objet (voir <a href="#syscoord00"
data-reference-type="ref" data-reference="syscoord00">4.5</a>).
Effectivement, chaque étape de transformation des coordonnées vers les
coordonnées normalisées de l’écran s’appuie sur des matrices de
transformation, parmi lesquelles figurent les matrices de modèle, de vue
et de projection.</p>
<figure id="syscoord00">
<a href="./memoire/images//shaders/syscoord00.png" target="_blank"><img src="./memoire/images//shaders/syscoord00.png" style="width:90.0%" /></a>
<figcaption>Transformation des coordonnées dans le <em>vertex
shader</em></figcaption>
</figure>
<p>Initialement, nous disposons des coordonnées locales de notre objet
par rapport à son origine locale. L’espace local représente les
coordonnées locales de l’objet, c’est-à-dire l’endroit où il est créé ou
modélisé. Par exemple, si nous créons un cube dans un logiciel de
modélisation comme Blender, ce cube sera généralement centré autour de
l’origine de l’espace local.</p>
<p>Dans l’espace local, les coordonnées de chaque sommet sont définies
par rapport au centre de l’objet. Cependant, pour rendre cet objet dans
une scène 3D, nous devons le placer et l’orienter par rapport à la scène
globale. C’est là que la matrice de modèle entre en jeu : elle permet de
transformer les coordonnées locales de l’objet en coordonnées du monde,
en appliquant des transformations telles que la translation, la rotation
et la mise à l’échelle. Une fois que les coordonnées sont dans l’espace
du monde, elles sont transformées dans l’espace de vue (ou espace œil) à
l’aide de la matrice de vue.</p>
<p>Dans cet espace, la caméra est positionnée à l’origine et les objets
sont positionnés et orientés par rapport à la caméra. Cette
transformation permet de simuler le déplacement et l’orientation de la
caméra dans la scène.</p>
<p>Ensuite, les coordonnées de vue sont transformées dans l’espace de
projection à l’aide de la matrice de projection. Dans cet espace, les
coordonnées sont projetées dans un espace 3D canonique, où les
coordonnées <span class="math inline">\(X\)</span>, <span
class="math inline">\(Y\)</span> et <span
class="math inline">\(Z\)</span> sont normalisées et se trouvent dans la
plage <span class="math inline">\([-1, 1]\)</span>. Cette étape permet
de déterminer quels objets sont visibles à l’écran et on peut utiliser
soit la projection en perspective, soit la projection orthographique.
Enfin, les coordonnées de projection sont transformées en coordonnées
normalisées de l’écran (NDC) en divisant les coordonnées par leur
composante <span class="math inline">\(w\)</span> (homogène). Cela place
les coordonnées dans une plage standardisée de <span
class="math inline">\([-1, 1]\)</span>, ce qui permet de déterminer
quels sommets et quelles parties de la scène seront rendus à l’écran. Le
volume qui détermine si un sommet sera affiché ou non s’appelle le
<em>frustum</em><a href="#fn35" class="footnote-ref" id="fnref35"
role="doc-noteref"><sup>35</sup></a>.</p>
<p>Nous venons de mentionner qu’il existe deux types principaux de
matrices de projection : la matrice de projection orthographique et la
matrice de projection en perspective. Contrairement à la projection
perspective , où les objets plus éloignés sont réduits en taille, la
projection orthographique conserve la taille relative des objets,
indépendamment de leur distance par rapport à la caméra. Cela signifie
que les objets éloignés apparaissent de la même taille que les objets
proches. La projection orthographique, quant à elle, est souvent
utilisée dans les rendus 2D et dans certaines applications
architecturales ou d’ingénierie où l’on souhaite éviter les déformations
des objets dues à la perspective. Elle offre une représentation plus
fidèle des dimensions et des proportions des objets, ce qui peut être
préférable dans certains cas d’utilisation. Une application comme
Blender, qui est utilisée pour la modélisation 3D, utilise parfois la
projection orthographique pour la modélisation car elle représente plus
précisément les dimensions de chaque objet (voir <a href="#syscoord5"
data-reference-type="ref" data-reference="syscoord5">4.6</a>).</p>
<figure id="syscoord5">
<a href="./memoire/images//shaders/syscoord5.png" target="_blank"><img src="./memoire/images//shaders/syscoord5.png" style="width:90.0%" /></a>
<figcaption>Les deux types de projection dans Blender</figcaption>
</figure>
<p>Dans le processeur central (CPU), après avoir défini une matrice de
transformation pour chacune des étapes susmentionnées (modèle, vue et
projection), on transforme les coordonnées de chaque sommet en
coordonnées de l’espace NDC comme suit:</p>
<div class="sourceCode" id="cb2" data-language="GLSL"
data-caption="\textit{Vertex shader} en GLSL"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">attribute</span> <span class="dt">vec3</span> pos<span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">attribute</span> <span class="dt">vec4</span> col<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">main</span><span class="op">()</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">gl_Position</span> <span class="op">=</span> m_proj <span class="op">*</span> m_view <span class="op">*</span> m_model <span class="op">*</span> pos<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered" id="le-geometry-shader">Le <em>geometry
shader</em></h3>
<p>Le <em>geometry shader</em> (ou nuanceur de géométrie en français)
est aussi une étape programmable mais optionnelle qui se situe entre le
<em>vertex shader</em> et le <em>fragment shader</em>. Le <em>geometry
shader</em> prend en entrée un ensemble de sommets qui forment une
primitive unique, par exemple un point ou un triangle. Le <em>geometry
shader</em> peut ensuite transformer ces sommets comme il l’entend avant
de les envoyer à l’étape suivante du <em>pipeline</em>. Ce qui rend le
<em>geometry shader</em> intéressant, c’est qu’il est capable de
convertir la primitive d’origine (ensemble de sommets) en des primitives
complètement différentes, en générant éventuellement plus de sommets
qu’il n’y en avait au départ.</p>
<p>Il peut par exemple subdiviser un <em>quad</em><a href="#fn36"
class="footnote-ref" id="fnref36" role="doc-noteref"><sup>36</sup></a>
pour créer de nouveaux triangles et ainsi donner plus de détails à la
modélisation. On peut aussi s’en servir pour créer des formes complexes
à partir de formes très simples. Par exemple, on peut créer un cheveu à
partir d’un segment constitué de seulement deux sommets. En général, on
l’utilise pour des effets visuels en temps réel tels que la déformation
de la géométrie, la génération de particules, l’effet de feuillage pour
les arbres, les vagues dans l’eau, etc.</p>
<figure id="geo01">
<a href="./memoire/images/shaders/geometry_shader_00.png" target="_blank"><img src="./memoire/images/shaders/geometry_shader_00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="geometry_shader_01.png" target="_blank"><img src="geometry_shader_01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Geometry shader</em> - Création d’une
maison</figcaption>
</figure>
<p>Comme illustré plus haut (voir <a href="#geo01"
data-reference-type="ref" data-reference="geo01">[geo01]</a>), le
<em>geometry shader</em> prend une primitive de point comme entrée et
crée une primitive de ligne horizontale avec le point d’entrée en son
centre. Au départ nous avions seulement quatre points provenant du CPU,
et le <em>geometry shader</em> à créé de nouveaux points pour chacun et
empaqueté le tout dans une nouvelle primitive <code>LINE</code> avant de
l’envoyer aux étapes suivantes du <em>pipeline</em>. Bien qu’il s’agisse
d’un exemple relativement simple, il montre comment nous pouvons
utiliser les <em>geometry shaders</em> pour générer dynamiquement de
nouvelles formes à la volée. Rien ne nous empêche de complexifier la
tâche du <em>geometry shader</em>. Dans le code suivant, à partir d’un
seul point nous dessinons une maison en créant cinq nouveaux sommets
(voir <a href="#geo01" data-reference-type="ref"
data-reference="geo01">4.7</a>):</p>
<div class="sourceCode" id="cb3" data-language="GLSL"
data-caption="\textit{Geometry shader} en GLSL - Maison à partir d&#39;un seul \textit{vertex}"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#version 330 core</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">layout</span> <span class="op">(</span><span class="dt">points</span><span class="op">)</span> <span class="dt">in</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">layout</span> <span class="op">(</span><span class="dt">triangle_strip</span><span class="op">,</span> <span class="dt">max_vertices</span> <span class="op">=</span> <span class="dv">5</span><span class="op">)</span> <span class="dt">out</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">build_house</span><span class="op">(</span><span class="dt">vec4</span> position<span class="op">)</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span>    </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">gl_Position</span> <span class="op">=</span> position <span class="op">+</span> <span class="dt">vec4</span><span class="op">(-</span><span class="fl">0.2</span><span class="op">,</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span>    <span class="co">// 1:bottom-left</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">EmitVertex</span><span class="op">();</span>   </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">gl_Position</span> <span class="op">=</span> position <span class="op">+</span> <span class="dt">vec4</span><span class="op">(</span> <span class="fl">0.2</span><span class="op">,</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span>    <span class="co">// 2:bottom-right</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">EmitVertex</span><span class="op">();</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">gl_Position</span> <span class="op">=</span> position <span class="op">+</span> <span class="dt">vec4</span><span class="op">(-</span><span class="fl">0.2</span><span class="op">,</span>  <span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span>    <span class="co">// 3:top-left</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">EmitVertex</span><span class="op">();</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">gl_Position</span> <span class="op">=</span> position <span class="op">+</span> <span class="dt">vec4</span><span class="op">(</span> <span class="fl">0.2</span><span class="op">,</span>  <span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span>    <span class="co">// 4:top-right</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">EmitVertex</span><span class="op">();</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">gl_Position</span> <span class="op">=</span> position <span class="op">+</span> <span class="dt">vec4</span><span class="op">(</span> <span class="fl">0.0</span><span class="op">,</span>  <span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span>    <span class="co">// 5:top</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">EmitVertex</span><span class="op">();</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">EndPrimitive</span><span class="op">();</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span>    </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">build_house</span><span class="op">(</span><span class="va">gl_in</span><span class="op">[</span><span class="dv">0</span><span class="op">].</span><span class="fu">gl_Position</span><span class="op">);</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>  </span></code></pre></div>
<h3 class="unnumbered" id="le-rasterizer">Le <em>rasterizer</em></h3>
<p>La rastérisation est une étape cruciale du <em>pipeline</em>
graphique dans le processus de rendu en 3D. C’est l’étape qui consiste à
convertir toutes les données 3D en une image matricielle en deux
dimensions afin de pouvoir les afficher à l’écran (voir <a
href="#rasterizer" data-reference-type="ref"
data-reference="rasterizer">4.8</a>). Pour résumer, la rastérisation
prend entrée la liste des triangles de l’étape précédente (espace 3D) et
les convertit en <em>pixels</em> (ou plus exactement des fragments)
correspondant à chacun des triangles (espace 2D). C’est aussi lors de
cette étape qu’une interpolation des attributs des sommets (tels que les
couleurs, les coordonnées de texture, etc.) est effectuée sur les
<em>pixels</em> résultants. Le développeur n’a aucun contrôle sur cette
étape, c’est un élément <em>hardware</em> de la carte graphique qui est
dédié à ces calculs : le <em>rasterizer</em>.</p>
<figure id="rasterizer">
<a href="./memoire/images/shaders/raster00.png" target="_blank"><img src="./memoire/images/shaders/raster00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/rasterizer.png" target="_blank"><img src="./memoire/images/shaders/rasterizer.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Rastérisation</figcaption>
</figure>
<h4 class="unnumbered"
id="interpolation-des-attributs-lors-de-la-rastérisation">Interpolation
des attributs lors de la rastérisation</h4>
<p>Même si la couleur a été définie pour chaque <em>vertex</em>, lorsque
l’on se trouve à l’intérieur du <em>fragment shader</em> c’est une
valeur interpolée que l’on reçoit. Depuis le CPU, on associe des
attributs aux <em>vertices</em>: pour l’ordinateur il s’agit simplement
de data. À un seul <em>vertex</em>, en général on lui associe une
position, une couleur, et une coordonnée d’uv. Ces données sont ensuite
envoyées au GPU qui se chargera d’interpoler les valeurs via le
<em>rasterizer</em>. Ainsi, si l’on décrit un triangle dans le CPU, avec
du rouge du vert du bleu associé à chacun de ses <em>vertex</em>, le GPU
affichera un triangle aux couleurs interpolées. Tous les <em>pixels</em>
situés à l’intérieur de ce triangle posséderont une couleur qui sera la
combinaison des trois couleurs de chaque sommet, la quantité variant
selon la distance par rapport à ces sommets.</p>
<figure id="interpolation01">
<a href="./memoire/images/shaders/interpolation00.png" target="_blank"><img src="./memoire/images/shaders/interpolation00.png" alt="Image 1" class="side-by-side2" /></a> <span
id="interpolation00" label="interpolation00"></span>
<a href="./memoire/images/shaders/interpolation01.JPG" target="_blank"><img src="./memoire/images/shaders/interpolation01.JPG" alt="Image 2" class="side-by-side2" /></a> <span
id="interpolation01" label="interpolation01"></span>
<figcaption>Interpolation des couleurs</figcaption>
</figure>
<h2 id="conclusion">Conclusion</h2>
<p>Dans ce chapitre, nous avons plongé dans le cœur même du processus de
rendu graphique en explorant le <em>pipeline</em> graphique. Nous avons
commencé par une revue du <em>pipeline</em> de la carte graphique, de la
compréhension du GPU à son architecture optimisée. Ensuite, nous avons
parcouru les étapes essentielles du <em>pipeline</em> graphique, en nous
concentrant particulièrement sur le <em>vertex shader</em> et le
<em>geometry shader</em>. Le <em>vertex shader</em> joue un rôle
indispensable en transformant les coordonnées des sommets dans
différents espaces, tandis que le <em>geometry shader</em> offre une
flexibilité supplémentaire en permettant la création dynamique de
géométrie. Enfin, nous avons examiné l’étape de rastérisation, où les
primitives 3D sont converties en fragments 2D prêts à être affichés à
l’écran. En combinant ces différentes étapes, le <em>pipeline</em>
graphique accomplit la tâche complexe de convertir des données 3D en une
image 2D qui s’affiche sur nos écrans.</p>
<p>Nous allons consacrer le prochain chapitre à une étape fondamentale
du <em>pipeline</em> que nous n’avons volontairement pas traitée dans
cette section : le <em>fragment shader</em>. Cette étape revêt une
importance capitale dans la pratique du <em>livecoding</em>. Nous
examinerons en détail les techniques essentielles à maîtriser pour une
performance scénique réussie.</p>
<h1 id="la-pratique-du-livecoding-techniques-fondamentales">La pratique
du <em>livecoding</em>: techniques fondamentales</h1>
<div class="epigraph">
<p>Le <em>shader</em>, c’est un programme, un morceau de code qui décrit
généralement une matière. Au-delà du rendu d’un simple « matériau »,
c’est même une étape qui va permettre de représenter de la 3D sur nos
écrans 2D.</p>
<p><em>Flopine</em></p>
</div>
<h2 id="introduction-3">Introduction</h2>
<p>Bien qu’à ATI beaucoup d’entre nous soyons habitués à manipuler les
<em>fragment shaders</em> avec les <em>nodes</em><a href="#fn37"
class="footnote-ref" id="fnref37" role="doc-noteref"><sup>37</sup></a>,
ceux-ci sont en réalité des programmes écrits pour s’exécuter sur la
carte graphique. Les <em>fragment shaders</em>, également connus sous le
nom de <em>pixel shaders</em>, sont responsables de la production d’une
couleur unique pour chaque fragment<a href="#fn38" class="footnote-ref"
id="fnref38" role="doc-noteref"><sup>38</sup></a> rendu. Dans la plupart
des cas, un fragment correspond à un <em>pixel</em> affiché à l’écran.
La couleur du <em>pixel</em> est stockée dans des canaux séparés. Si on
considère le codage de couleurs RGBA, un premier canal représentera le
rouge, et les trois autres canaux décriront respectivement le vert, le
bleu et l’opacité. Chaque canal est représenté par des valeurs variant
de <span class="math inline">\(0.0\)</span> à <span
class="math inline">\(1.0\)</span>. Par exemple, <span
class="math inline">\((0.0, 0.0, 0.0, 1.0)\)</span> représentera le noir
opaque, <span class="math inline">\((1.0, 1.0, 1.0, 1.0)\)</span>
représentera le blanc opaque et <span class="math inline">\((1.0, 0.0,
0.0, 0.5)\)</span> représentera le rouge pur avec <span
class="math inline">\(50\%\)</span> d’opacité.</p>
<p>Pour récapituler, un <em>fragment shader</em> est un programme
contenant une seule fonction. Cette fonction reçoit les coordonnées uv
d’un <em>quad</em> représentant l’intégralité de l’écran en tant que
paramètre d’entrée. Elle calcule ensuite la couleur de rendu pour chaque
<em>pixel</em>.</p>
<p>Dans la pratique du <em>livecoding</em>, il est essentiel de pouvoir
coder « de mémoire », car en compétition, selon les règles en vigueur,
il peut être interdit de consulter Internet en cas d’oubli, tout comme
l’utilisation de textures peut être proscrite.</p>
<p>Dans cette section, nous nous efforcerons de décrire les principales
techniques de développement en <em>live</em> d’un <em>shader</em> tout
en abordant les concepts mathématiques sous-jacents. Ces principes
mathématiques sont indispensables pour comprendre la logique à laquelle
obéissent nos <em>shaders</em>. Sans cela, nous perdrons une liberté
créative ainsi que la capacité de débogage. Il n’est pas rare de se
retrouver sur scène devant un écran totalement noir sans parvenir à
trouver la source de l’anomalie. De plus, contrairement au développement
sur CPU, les fonctions d’affichage telles que <code>print()</code> en
langage C ne sont pas disponibles lors de la programmation pour la carte
graphique.</p>
<h3 class="unnumbered"
id="transition-entre-les-langages-facilité-et-subtilités">Transition
entre les langages : facilité et subtilités</h3>
<p>Il existe plusieurs langages pour écrire un <em>shader</em> : GLSL,
HLSL, Cg ou encore MSL. Le choix du langage dépend de facteurs tels que
la performance recherchée, la compatibilité avec la plate-forme ou les
logiciels choisis pour le projet.</p>
<p>Cependant, le point commun entre tous ces langages est qu’ils
possèdent une syntaxe héritée du langage C. On y retrouve le concept de
types, de déclarations de fonctions, de structures, etc. Une fois que
l’on maîtrise la syntaxe de l’un de ces langages, il est très aisé de
passer d’un langage à un autre ; il suffit simplement de s’adapter à
quelques subtilités. Par exemple, le type qui décrit les vecteurs à
trois dimensions peut être <code>vec3</code> dans un langage et
<code>vec3f</code> dans un autre. De même, les nombres flottants
(<code>float</code>) peuvent nécessiter un point (<code>.</code>) ou la
lettre <code>f</code> en suffixe (<code>float x = 1.0f</code>).</p>
<h2 id="lespace-uv">L’espace uv</h2>
<p>L’espace uv est un concept fondamental pour comprendre les
<em>shaders</em>, et tous les artistes en sont déjà au moins familiers,
sans avoir nécessairement besoin de comprendre les mathématiques qui se
cachent derrière, notamment lorsqu’ils appliquent des textures à la
surface de leurs modèles 3D.</p>
<p>Les textures apparaissent généralement en deux dimensions (bien qu’il
existe également des textures 1D et 3D) et sont décrites par une image.
Elles peuvent aussi bien concerner l’aspect visuel de « l’apparence » de
l’objet avec la <em>diffuse map</em><a href="#fn39" class="footnote-ref"
id="fnref39" role="doc-noteref"><sup>39</sup></a> que l’illusion de
relief avec la <em>normal map</em><a href="#fn40" class="footnote-ref"
id="fnref40" role="doc-noteref"><sup>40</sup></a>. Le terme anglais
<em>map</em> correspond au terme français cartographie. Cette
terminologie provient probablement de l’analogie avec la cartographie
géographique, où des informations sont représentées sur une carte en
deux dimensions pour refléter des éléments de la réalité en trois
dimensions.</p>
<p>Les textures existent dans un espace en deux dimensions, et à chaque
sommet, on associe une coordonnée uv comprise entre <span
class="math inline">\(0\)</span> et <span
class="math inline">\(1\)</span>, qui désigne un <em>texel</em><a
href="#fn41" class="footnote-ref" id="fnref41"
role="doc-noteref"><sup>41</sup></a> de la texture. Tout comme n’importe
quel attribut associé à un sommet, ces valeurs de coordonnée de texture
seront interpolées lors de la rastérisation.</p>
<figure id="maya_text01">
<a href="./memoire/images/shaders/maya_text00.png" target="_blank"><img src="./memoire/images/shaders/maya_text00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/maya_text01.png" target="_blank"><img src="./memoire/images/shaders/maya_text01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Texture sur un <em>mesh</em> dans Maya</figcaption>
</figure>
<p>Dans le contexte du <em>livecoding</em>, nous ne disposons pas d’un
modèle 3D complet, mais seulement de deux triangles formant un plan qui
remplit tout l’écran. Les données d’entrée du <em>shader</em> nous
fournissent par défaut la résolution du <em>viewport</em>
(<code>iResolution</code>) ainsi que les coordonnées de chaque
<em>pixel</em> (<code>fragCoord</code>). En divisant ces coordonnées par
la résolution, nous obtenons une valeur normalisée, comprise entre <span
class="math inline">\(0\)</span> et <span
class="math inline">\(1\)</span>, correspondant à nos coordonnées de
texture.</p>
<div class="sourceCode" id="cb4" data-language="GLSL"
data-caption="uv avec l&#39;origine en bas à gauche" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> uv <span class="op">=</span> fragCoord <span class="op">/</span> iResolution<span class="op">.</span><span class="fu">xy</span><span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>uv<span class="op">,</span><span class="fl">0.</span><span class="op">,</span><span class="fl">1.0</span><span class="op">);</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Dans l’image <a href="#meduse_00" data-reference-type="ref"
data-reference="meduse_00">[meduse_00]</a>, nous avons une
représentation visuelle de l’espace uv. Les coordonnées horizontales
sont codées dans la couleur rouge tandis que les coordonnées verticales
sont codées dans la couleur verte. L’origine du repère étant située en
bas à gauche, nous observons du noir. Le point en bas à droite est d’un
rouge pur car sa coordonnée en <span class="math inline">\(X\)</span>
vaut <span class="math inline">\(1\)</span> et sa coordonnée en <span
class="math inline">\(Y\)</span> vaut <span
class="math inline">\(0\)</span>. À l’inverse, la couleur en haut à
gauche du canvas est d’un vert pur. En haut à droite, nous obtenons un
jaune pur car les coordonnées <span class="math inline">\(X\)</span> et
<span class="math inline">\(Y\)</span> valent toutes les deux <span
class="math inline">\(1\)</span>. Tous les <em>pixels</em>
intermédiaires possèdent une couleur interpolée dépendante de leur
distance par rapport à chacun des quatre coins. Cela est effectué
automatiquement lors de l’étape de rastérisation.</p>
<figure id="meduse_01">
<a href="./memoire/images/meduse/meduse_00.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/meduse/meduse_01.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>À droite: repère centré et orthonormé</figcaption>
</figure>
<p>Pour une meilleure visualisation, nous pouvons observer séparément
les coordonnées en abscisse (voir <a href="#meduse_uv_00"
data-reference-type="ref"
data-reference="meduse_uv_00">[meduse_uv_00]</a>) et en ordonnée (voir
<a href="#meduse_uv_01" data-reference-type="ref"
data-reference="meduse_uv_01">5.3</a>).</p>
<figure id="meduse_uv_01">
<a href="./memoire/images/meduse/meduse_uv_00.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_uv_00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/meduse/meduse_uv_01.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_uv_01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>uv en x // uv en y</figcaption>
</figure>
<p>Cet espace uv, ou coordonnées uv, désigne l’espace dans lequel nos
<em>shaders</em> vont dessiner. Cette notion est cruciale car nous
n’appliquons pas les transformations à la forme dessinée elle-même, mais
plutôt à l’espace dans lequel cette forme est dessinée (voir <a
href="#animcarre" data-reference-type="ref"
data-reference="animcarre">5.4</a>).</p>
<figure id="animcarre">
<a href="./memoire/images/shaders/animcarre00.PNG" target="_blank"><img src="./memoire/images/shaders/animcarre00.PNG" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images/shaders/animcarre01.PNG" target="_blank"><img src="./memoire/images/shaders/animcarre01.PNG" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images/shaders/animcarre02.PNG" target="_blank"><img src="./memoire/images/shaders/animcarre02.PNG" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Ce n’est pas le rectangle qui est animé mais bien l’espace
uv</figcaption>
</figure>
<p>Il est souvent préférable d’utiliser un espace centré et orthonormé<a
href="#fn42" class="footnote-ref" id="fnref42"
role="doc-noteref"><sup>42</sup></a> pour faciliter le dessin. Ainsi, le
code d’un <em>shader</em> commencera souvent de la même manière :</p>
<div class="sourceCode" id="cb5" data-language="GLSL"
data-caption="Repère centré et orthonormé" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec2</span> uv <span class="op">=</span> <span class="op">(</span>fragCoord<span class="fl">-.5</span><span class="op">*</span>iResolution<span class="op">.</span><span class="fu">xy</span><span class="op">)/</span>iResolution<span class="op">.</span><span class="fu">xx</span><span class="op">;</span> <span class="co">//  permet de centrer nos coordonnees</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>L’espace résultant (voir <a href="#meduse_01"
data-reference-type="ref" data-reference="meduse_01">5.2</a>) trouve son
origine au centre, et les coordonnées varient entre <span
class="math inline">\(-0.5\)</span> et <span
class="math inline">\(+0.5\)</span>. Comme précédemment, la couleur
noire représente des valeurs négatives ou nulles. Le vert indique des
valeurs négatives en X et positives en Y, le rouge indique des valeurs
positives en X et négatives en Y, et enfin le jaune indique des valeurs
positives sur les deux axes. Avec une pratique régulière, ces
associations de couleurs deviennent presque instinctives, et
l’association entre les couleurs et les axes ne demande plus d’efforts
de réflexion.</p>
<h2 id="les-fonctions-de-distance-signée">Les fonctions de distance
signée</h2>
<p>Le deuxième concept essentiel à assimiler est le principe
mathématique d’une fonction de distance signée. Cette fonction est
souvent désignée par l’appellation anglaise <em>signed distance
function</em>, abrégée en SDF, que l’on retrouve couramment sur Internet
et dans la littérature. Ce sont elles qui vont nous permettre de décrire
les objets de notre scène mais aussi de les déformer, de les répéter,
etc.</p>
<h3 class="unnumbered" id="définition">Définition</h3>
<p>Schématiquement, une SDF est une fonction qui calcule une valeur
représentant la distance d’un point par rapport à une surface donnée. Le
signe de la valeur retournée nous indique si le point est situé à
l’intérieur ou à l’extérieur de la surface. Ce qui suit est une
explication équivalente, mais formulée en termes mathématiques.</p>
<p>Soit <span class="math inline">\(S\)</span> la surface de référence,
et <span class="math inline">\(p\)</span> un point dans l’espace. La
fonction de distance signée <span class="math inline">\(d(p,S)\)</span>
évalue la distance du point <span class="math inline">\(p\)</span> à la
surface <span class="math inline">\(S\)</span>, avec les propriétés
suivantes :</p>
<ul>
<li><p>Si le point <span class="math inline">\(p\)</span> est à
l’extérieur de la surface <span class="math inline">\(S\)</span>, la
distance est positive (<span
class="math inline">\(&gt;0\)</span>).</p></li>
<li><p>Si le point <span class="math inline">\(p\)</span> est à
l’intérieur de la surface <span class="math inline">\(S\)</span>, la
distance est négative (<span
class="math inline">\(&lt;0\)</span>).</p></li>
<li><p>Si le point <span class="math inline">\(p\)</span> est sur la
surface S, la distance est nulle (<span
class="math inline">\(=0\)</span>).</p></li>
</ul>
<p>Notons que dans un souci de simplification visuelle, nous nous
focaliserons sur les SDF en deux dimensions. Cependant, il est important
de noter que les mêmes principes s’appliquent également dans un espace
tridimensionnel. Dans les images ci-dessous (voir <a href="#sdf_00"
data-reference-type="ref" data-reference="sdf_00">[sdf_00]</a>, <a
href="#sdf_01" data-reference-type="ref"
data-reference="sdf_01">5.5</a>, <a href="#sdf_02"
data-reference-type="ref" data-reference="sdf_02">[sdf_02]</a> et <a
href="#sdf_03" data-reference-type="ref"
data-reference="sdf_03">5.6</a>), nous visualisons quatre SDF, chacune
représentant une forme différente (un cercle, une étoile, un cœur et une
vague sinusoïdale). Ces fonctions, créées par Inigo Quilez, sont
largement utilisées dans la création de <em>shaders</em>. De nombreuses
formes ont été codées et, comme nous le verrons un peu plus tard, il est
très facile de les combiner entre elles.</p>
<figure id="sdf_01">
<a href="./memoire/images/sdf/sdf_00.jpg" target="_blank"><img src="./memoire/images/sdf/sdf_00.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/sdf_01.jpg" target="_blank"><img src="./memoire/images/sdf/sdf_01.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>SDF d’un cercle // SDF d’une étoile</figcaption>
</figure>
<figure id="sdf_03">
<a href="./memoire/images/sdf/sdf_02.jpg" target="_blank"><img src="./memoire/images/sdf/sdf_02.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/sdf_03.jpg" target="_blank"><img src="./memoire/images/sdf/sdf_03.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>SDF d’un cœur // SDF d’une vague sinusoïdale</figcaption>
</figure>
<p>Sur les images, la couleur orangée représente l’espace qui se trouve
à l’extérieur de la forme, tandis que la couleur bleutée représente
l’espace à l’intérieur de la forme. Dans les deux cas, plus l’on se
rapproche de la surface de la forme, plus la couleur s’assombrit. Ceci
est logique puisque plus l’on se rapproche de la surface, plus la valeur
de la distance tend vers zéro. Le contour blanc est là pour indiquer que
l’on se trouve exactement sur la surface de la forme. Les ondulations
que l’on observe autour de la forme symbolisent la distance proprement
dite. Une analogie que j’aime employer est celle avec le sonar <a
href="#fn43" class="footnote-ref" id="fnref43"
role="doc-noteref"><sup>43</sup></a> utilisé par les sous-marins pour
détecter des objets sous l’eau. Grâce à cette fonction de distance,
l’utilisateur peut contrôler à la fois la taille de la forme et
l’épaisseur de son contour.</p>
<h3 class="unnumbered"
id="opérations-booléennes-avec-les-sdf">Opérations booléennes avec les
SDF</h3>
<p>Nous venons de voir comment dessiner des formes 2D primitives telles
que des cercles, des étoiles et des carrés, mais nous pouvons utiliser
les opérations SDF 2D pour créer des formes plus complexes en combinant
des formes primitives.</p>
<p>Les SDF possèdent une propriété mathématique très intéressante : il
est très commode d’utiliser des opérations booléennes pour combiner les
formes entre elles. Les trois opérateurs booléens sont l’union,
l’intersection et la soustraction. L’union permet d’assembler deux
objets, l’intersection est le résultat de la partie commune entre les
deux objets, et la soustraction est le résultat du premier objet auquel
on enlève le second objet. Les illustrations qui suivent considèrent
deux objets: un carré et un cercle. En code, ces opérations booléennes
sont triviales à traduire.</p>
<h5 class="unnumbered" id="lunion">L’union</h5>
<p>Pour l’union, on utilise la fonction <code>min()</code> avec les deux
SDF en tant qu’arguments (voir <a href="#sdf_op_00"
data-reference-type="ref"
data-reference="sdf_op_00">[sdf_op_00]</a>).</p>
<div class="sourceCode" id="cb6" data-language="GLSL"
data-caption="Union" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> d1 <span class="op">=</span> <span class="fu">sdCircle</span><span class="op">(</span>uv<span class="op">,</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">vec2</span><span class="op">(</span><span class="fl">0.</span><span class="op">,</span> <span class="fl">0.</span><span class="op">));</span> <span class="co">// le cercle</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> d2 <span class="op">=</span> <span class="fu">sdSquare</span><span class="op">(</span>uv<span class="op">,</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">vec2</span><span class="op">(</span><span class="fl">0.1</span><span class="op">,</span> <span class="dv">0</span><span class="op">));</span> <span class="co">// le carre</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> res<span class="op">;</span> <span class="co">// result</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  res <span class="op">=</span> <span class="bu">min</span><span class="op">(</span>d1<span class="op">,</span> d2<span class="op">);</span> <span class="co">// union</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<figure id="sdf_op_01">
<a href="./memoire/images/sdf/sdf_op_00.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/sdf_op_01.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Union // Intersection</figcaption>
</figure>
<h5 class="unnumbered" id="lintersection">L’intersection</h5>
<p>Pour l’intersection on utilise <code>max()</code> (voir <a
href="#sdf_op_01" data-reference-type="ref"
data-reference="sdf_op_01">5.7</a>).</p>
<div class="sourceCode" id="cb7" data-language="GLSL"
data-caption="Intersection" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  res <span class="op">=</span> <span class="bu">max</span><span class="op">(</span>d1<span class="op">,</span> d2<span class="op">);</span> <span class="co">// intersection</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h5 class="unnumbered" id="la-soustraction">La soustraction</h5>
<p>Pour la soustraction, on utilise toujours la fonction
<code>max()</code>, mais avec l’inverse de la seconde forme comme
deuxième argument (qu’on décrit avec l’opérateur <code>-</code>). En
effet, la soustraction est une intersection entre la première forme et
la « non » seconde forme (voir <a href="#sdf_op_02"
data-reference-type="ref"
data-reference="sdf_op_02">[sdf_op_02]</a>).</p>
<div class="sourceCode" id="cb8" data-language="GLSL"
data-caption="Soustraction" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">(...)</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  res <span class="op">=</span> <span class="bu">max</span><span class="op">(</span>d1<span class="op">,</span> <span class="op">-</span>d2<span class="op">);</span> <span class="co">// soustraction</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h5 class="unnumbered" id="le-ou-exclusif">Le « ou exclusif »</h5>
<p>Pour l’opérateur <code>XOR</code> on utilise une combinaison de
<code>min()</code> et <code>max()</code> (voir <a href="#sdf_op_03"
data-reference-type="ref" data-reference="sdf_op_03">5.8</a>).</p>
<div class="sourceCode" id="cb9" data-language="GLSL" data-caption="XOR"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">(...)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  res <span class="op">=</span> <span class="bu">max</span><span class="op">(</span><span class="bu">min</span><span class="op">(</span>d1<span class="op">,</span> d2<span class="op">),</span> <span class="op">-</span><span class="bu">max</span><span class="op">(</span>d1<span class="op">,</span> d2<span class="op">));</span> <span class="co">// xor</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<figure id="sdf_op_03">
<a href="./memoire/images/sdf/sdf_op_02.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_02.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/sdf_op_03.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_03.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Soustraction // XOR</figcaption>
</figure>
<p>Tous ces opérateurs booléens ont été réécrits par Inigo Quilez pour
prendre en compte un paramètre de lissage<a href="#fn44"
class="footnote-ref" id="fnref44" role="doc-noteref"><sup>44</sup></a>
(voir <a href="#sdf_op_04" data-reference-type="ref"
data-reference="sdf_op_04">[sdf_op_04]</a> et <a href="#sdf_op_05"
data-reference-type="ref" data-reference="sdf_op_05">5.9</a>).</p>
<div class="sourceCode" id="cb10" data-language="GLSL"
data-caption="Smoothness" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// smooth min</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> <span class="fu">smin</span><span class="op">(</span><span class="dt">float</span> a<span class="op">,</span> <span class="dt">float</span> b<span class="op">,</span> <span class="dt">float</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">float</span> h <span class="op">=</span> <span class="bu">clamp</span><span class="op">(</span><span class="fl">0.5+0.5</span><span class="op">*(</span>b<span class="op">-</span>a<span class="op">)/</span>k<span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">1.0</span><span class="op">);</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> <span class="bu">mix</span><span class="op">(</span>b<span class="op">,</span> a<span class="op">,</span> h<span class="op">)</span> <span class="op">-</span> k<span class="op">*</span>h<span class="op">*(</span><span class="fl">1.0</span><span class="op">-</span>h<span class="op">);</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// smooth max</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> <span class="fu">smax</span><span class="op">(</span><span class="dt">float</span> a<span class="op">,</span> <span class="dt">float</span> b<span class="op">,</span> <span class="dt">float</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> <span class="op">-</span><span class="fu">smin</span><span class="op">(-</span>a<span class="op">,</span> <span class="op">-</span>b<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<figure id="sdf_op_05">
<a href="./memoire/images/sdf/sdf_op_04.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_04.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/sdf_op_05.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_05.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Union <em>smooth</em> // Intersection <em>smooth</em></figcaption>
</figure>
<p>Inigo Quilez a également développé des fonctions pour agir
directement sur l’espace uv, permettant de dessiner rapidement tout en
améliorant les performances. Par exemple, si l’on souhaite créer une
scène symétrique, il peut être utile d’utiliser la fonction
<code>opSymX()</code>. Cette fonction crée une forme 2D dupliquée le
long de l’axe <span class="math inline">\(X\)</span> à l’aide du SDF
utilisé (voir <a href="#sdf_op_06" data-reference-type="ref"
data-reference="sdf_op_06">[sdf_op_06]</a>). De même, si nous voulons
dessiner un nombre infini d’objets 2D sur un ou plusieurs axes, la
fonction <code>opRep()</code> est parfaitement adaptée (voir <a
href="#sdf_op_07" data-reference-type="ref"
data-reference="sdf_op_07">5.10</a>).</p>
<figure id="sdf_op_07">
<a href="./memoire/images/sdf/sdf_op_06.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_06.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/sdf_op_07.JPG" target="_blank"><img src="./memoire/images/sdf/sdf_op_07.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Symétrie // Répétition de l’espace</figcaption>
</figure>
<p>Pour des raisons de lisibilité, nous avons traité la notion des SDF
dans un espace bidimensionnel. Bien évidemment, tous ces concepts
fonctionnent de la même manière dans un espace tridimensionnel. Il
existe des fonctions pour décrire des formes 3D primitives comme des
cubes ou des sphères, mais aussi des formes plus complexes comme des
pyramides ou des tores. Les opérations booléennes demeurent inchangées
(voir <a href="#union" data-reference-type="ref"
data-reference="union">[union]</a>, <a href="#intersection"
data-reference-type="ref"
data-reference="intersection">[intersection]</a>, <a
href="#soustraction" data-reference-type="ref"
data-reference="soustraction">5.11</a>), et en les combinant, nous
pouvons obtenir facilement des formes évoluées (voir <a href="#sdf00"
data-reference-type="ref" data-reference="sdf00">[sdf00]</a> et <a
href="#shaderat01" data-reference-type="ref"
data-reference="shaderat01">5.12</a>).</p>
<figure id="soustraction">
<a href="./memoire/images//sdf/union.png" target="_blank"><img src="./memoire/images//sdf/union.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images//sdf/intersection.png" target="_blank"><img src="./memoire/images//sdf/intersection.png" alt="Image 2" class="side-by-side3"/></a>
<a href="./memoire/images//sdf/soustraction.png" target="_blank"><img src="./memoire/images//sdf/soustraction.png" alt="Image 3" class="side-by-side3"/></a>
<figcaption>Union 3D // Intersection 3D // Soustraction 3D</figcaption>
</figure>
<figure id="shaderat01">
<a href="./memoire/images/sdf/sdf00.png" target="_blank"><img src="./memoire/images/sdf/sdf00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shaderatelier_01.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_01.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Construction booléenne // Deux sphères moins un cylindre</figcaption>
</figure>
<h2 id="exploration-de-la-construction-dune-sdf">Exploration de la
construction d’une SDF</h2>
<p>Après avoir expliqué en détail ce qu’est une SDF et comment elle est
utilisée dans le domaine du <em>creative coding</em>, il me paraissait
pertinent d’approfondir la compréhension en examinant la fabrication
mathématique de ces fonctions. Bien que de nombreux créateurs de
<em>shaders</em> se contentent souvent d’adopter une SDF préexistante
développée par des figures reconnues comme Inigo Quilez, il est
regrettable de constater que cela se fait souvent au détriment d’une
réelle compréhension de la démonstration mathématique. Pourtant, cette
démarche ouvre la voie à une appropriation intelligente des formes
existantes et, surtout, à la création de SDF personnalisées.</p>
<p>Nous étudierons deux exemples illustrant la construction mathématique
d’une SDF. Le premier exemple consistera en une exploration de l’espace
bidimensionnel à travers la représentation d’un simple carré. Dans le
second exemple, nous nous pencherons sur la création d’un tore
(<em>torus</em> en anglais), en partant cette fois-ci d’un espace
tridimensionnel. En comprenant la logique et les principes mathématiques
derrière la création de ces SDF, nous serons en mesure non seulement
d’adapter efficacement les formes déjà existantes, mais également de
développer nos propres fonctions SDF, ouvrant ainsi de nouvelles
possibilités créatives.</p>
<h3 class="unnumbered" id="sdf-dun-carré">SDF d’un carré</h3>
<p>Nous commençons par examiner un carré en 2D centré à l’origine. Pour
simplifier le calcul et tirer parti de la symétrie, nous nous
concentrons initialement sur un seul quadrant<a href="#fn45"
class="footnote-ref" id="fnref45" role="doc-noteref"><sup>45</sup></a>
de la forme. Calculer la distance d’un point situé en dessous du
troisième quadrant, équivaut à calculer la distance du point symétrique
par rapport à l’origine, qui se trouverait au-dessus du troisième
quadrant (voir <a href="#box00" data-reference-type="ref"
data-reference="box00">[box00]</a>). Nous définissons <span
class="math inline">\(R_x\)</span> et <span
class="math inline">\(R_y\)</span> comme étant respectivement la largeur
et la hauteur du premier quadrant.</p>
<p>En se référant au premier quadrant, nous pouvons distinguer les
différents cas qui se présentent. En généralisant la solution à l’aide
de la fonction <code>abs()</code>, nous prenons en compte la symétrie.
L’espace peut être divisé en trois parties distinctes : une partie juste
au-dessus du quadrant, une partie juste à droite du quadrant et une
troisième partie « en haut à droite » du quadrant (voir <a href="#box01"
data-reference-type="ref" data-reference="box01">[box01]</a>).</p>
<figure id="box02">
<a href="./memoire/images//shaders/box00.png" target="_blank"><img src="./memoire/images//shaders/box00.png" alt="Image 1" class="side-by-side3"/></a>
<a href="./memoire/images//shaders/box01.png" target="_blank"><img src="./memoire/images//shaders/box01.png" alt="Image 2" class="side-by-side3" /></a>
<a href="./memoire/images//shaders/box02.png" target="_blank"><img src="./memoire/images//shaders/box02.png" alt="Image 3" class="side-by-side3" /></a>
<figcaption>Géométrie derrière le SDF d'un carré</figcaption>
</figure>
<p>Dans la première zone, le calcul est relativement simple : il s’agit
de la distance de la composante <span class="math inline">\(x\)</span>
du point par rapport au côté droit du carré, ce qui se traduit par <span
class="math inline">\(d = P_x - R_x\)</span>. Pour la deuxième zone, la
logique est similaire, mais appliquée verticalement, conduisant à <span
class="math inline">\(d = P_y - R_y\)</span>. Cependant, pour la
troisième zone, nous devons faire appel au théorème de Pythagore<a
href="#fn46" class="footnote-ref" id="fnref46"
role="doc-noteref"><sup>46</sup></a> pour calculer la distance entre le
point et le coin supérieur droit du quadrant (voir <a href="#box02"
data-reference-type="ref" data-reference="box02">5.13</a>). Ainsi, nous
obtenons:</p>
<p><span class="math display">\[\begin{aligned}
d = \sqrt{(P_x-R_x)^2 + (P_y-R_y)^2}
\end{aligned}\]</span></p>
<p>Notre objectif est de combiner ces trois expressions mathématiques
pour exprimer la distance <span class="math inline">\(d\)</span> en une
seule. Nous remarquons que les deux premières expressions apparaissent
dans la troisième. En gardant uniquement la troisième expression, nous
aimerions que la composante <span class="math inline">\(y\)</span>
s’annule si nous sommes dans la première zone, et que la composante
<span class="math inline">\(x\)</span> s’annule si nous sommes dans la
deuxième zone. Nous remarquons que dans chaque cas, la composante que
nous aimerions annuler est négative. En utilisant la fonction
<code>max()</code>, nous pouvons distinguer chaque cas. Finalement, nous
concluons que:</p>
<p><span class="math display">\[\begin{aligned}
d = \sqrt{max(P_x-R_x,0)^2 + max(P_y-R_y,0)^2}
\end{aligned}\]</span> Avec la notation vectorielle, nous pouvons
simplifier l’écriture en écrivant: <span
class="math display">\[\begin{aligned}
d = length(max(abs(P)-R, 0))
\end{aligned}\]</span></p>
<p>Une traduction en code GLSL donnerait alors:</p>
<div class="sourceCode" id="cb11" data-language="GLSL"
data-caption="SDF d&#39;un carré" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">// p: position du point, s: size du carre</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">box</span><span class="op">(</span><span class="dt">vec2</span> p<span class="op">,</span> <span class="dt">vec2</span> s<span class="op">)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> d<span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="bu">abs</span><span class="op">(</span>p<span class="op">);</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> m <span class="op">=</span> <span class="bu">max</span><span class="op">(</span>p<span class="op">-</span>s<span class="op">,</span> <span class="dt">vec2</span><span class="op">(</span><span class="fl">0.</span><span class="op">));</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">length</span><span class="op">(</span>m<span class="op">);</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered" id="sdf-dun-tore">SDF d’un tore</h3>
<p>Pour le tore (<em>torus</em> en anglais), nous aborderons les détails
mathématiques de manière concise, mais la méthode de raisonnement reste
la même que celle exposée précédemment. Si nous imaginons le tore
positionné à l’origine, nous pouvons le décrire à l’aide de deux cercles
ou de deux rayons d’un cercle. Tout d’abord, il y a le cercle plus grand
situé dans le plan <span class="math inline">\(XZ\)</span> (le plan
horizontal), puis il y a un cercle plus petit qui tourne autour de ce
premier cercle (voir <a href="#tore01" data-reference-type="ref"
data-reference="tore01">5.14</a>).</p>
<figure id="tore01">
<a href="./memoire/images//sdf/tore01.png" target="_blank"><img src="./memoire/images//sdf/tore01.png" style="width:90.0%" /></a>
<figcaption>Représentation d’un tore dans l’espace</figcaption>
</figure>
<p>Lorsque nous cherchons à déterminer la distance qui sépare un point
<span class="math inline">\(P\)</span> situé au-dessus du plan <span
class="math inline">\(XZ\)</span> à la surface de ce tore, nous devons
d’abord calculer la distance <span class="math inline">\(d\)</span>
résultant des composantes <span class="math inline">\(x\)</span> et
<span class="math inline">\(y\)</span> du vecteur <span
class="math inline">\(\vec{PC}\)</span> (cela revient à calculer la
norme du vecteur <span class="math inline">\(\vec{PC}\)</span>). L’image
projetée de <span class="math inline">\(P\)</span> sur le plan <span
class="math inline">\(XZ\)</span> nous fournit la valeur de <span
class="math inline">\(x\)</span>. Nous pouvons l’obtenir en soustrayant
le rayon du cercle plus grand de la distance totale de <span
class="math inline">\(P\)</span> à l’origine. La valeur <span
class="math inline">\(y\)</span> correspond simplement à la position
verticale de <span class="math inline">\(P\)</span>.</p>
<div class="sourceCode" id="cb12" data-language="GLSL"
data-caption="SDF d&#39;un tore" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// p: position du point, r: rayon du grand et du petit cercle</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">torus</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">vec2</span> r<span class="op">)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> x <span class="op">=</span> <span class="bu">length</span><span class="op">(</span>p<span class="op">.</span><span class="fu">xz</span><span class="op">)-</span>r<span class="op">.</span><span class="fu">x</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">length</span><span class="op">(</span><span class="dt">vec2</span><span class="op">(</span>x<span class="op">,</span>p<span class="op">.</span><span class="fu">y</span><span class="op">)-</span>r<span class="op">.</span><span class="fu">y</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Avec ces valeurs de <span class="math inline">\(x\)</span> et <span
class="math inline">\(y\)</span>, nous pouvons former un vecteur. Sa
longueur correspond à la distance <span
class="math inline">\(d\)</span>. En soustrayant le rayon du cercle plus
petit de cette longueur, nous obtenons la distance finale à la surface
du tore. En combinant cette fonction de distance signée avec la méthode
permettant de passer aux coordonnées polaires (que nous verrons par la
suite), nous pouvons obtenir des représentations intéressantes où les
repères uv tournent autour de la forme sur les deux axes (voir <a
href="#tore03" data-reference-type="ref"
data-reference="tore03">[tore03]</a> et <a href="#tore05"
data-reference-type="ref" data-reference="tore05">5.15</a>).</p>
<figure id="tore05">
<a href="./memoire/images//sdf/tore03.png" target="_blank"><img src="./memoire/images//sdf/tore03.png" alt="Image 1" class="side-by-side2" /></a>
<a href="./memoire/images//sdf/tore05.png" target="_blank"><img src="./memoire/images//sdf/tore05.png" alt="Image 2" class="side-by-side2" /></a>
<figcaption>uv autour de l’axe <span
  class="math inline">\(Y\)</span> // uv autour de l’axe <span
class="math inline">\(X\)</span></figcaption>
</figure>
<h2 id="le-fonctionnement-du-ray-marching">Le fonctionnement du <em>ray
marching</em></h2>
<p>Au début de mon apprentissage des <em>shaders</em>, je parvenais à
décortiquer le fonctionnement de certains <em>shaders</em> 2D mais je me
sentais incapable de comprendre la « magie » qui se cachait derrière les
<em>shaders</em> 3D. Or une grande proportion des <em>shaders</em> 3D
visibles sur Shadertoy sont basés sur l’algorithme du <em><em>ray
marching</em></em>. Il est donc indispensable de décomposer la logique
qui se cache derrière avant d’aborder les techniques plus avancées qui
en découlent.</p>
<p>Bien que d’autres algorithmes plus chers en calculs comme le <em>ray
tracing</em> ou le <em>path tracing</em> permettent de représenter une
scène 3D sur un écran 2D nous nous intéresserons surtout ici au <em>ray
marching</em> qui est très populaire dans le monde de la
<em>demoscene</em>. Le <em>ray marching</em> est utilisé pour dessiner
des scènes 3D sur un écran 2D à l’aide de rayons.</p>
<p>Dans notre monde réel, les sources de lumière telles que le soleil
projettent des rayons lumineux sous forme de photons dans des millions
de directions différentes. Lorsqu’un photon touche un objet, l’énergie
est absorbée par le réseau cristallin d’atomes de l’objet et un autre
photon est libéré. En fonction de la structure cristalline du réseau
atomique du matériau, les photons peuvent être émis dans une direction
aléatoire (réflection diffuse) ou sous le même angle avec lequel ils ont
pénétré le matériau (réflection spéculaire ou miroir).</p>
<p>Avec un ordinateur, si nous essayons de modéliser une scène en 3D en
simulant les rayons d’une source de lumière et en dessinant les objets
visibles depuis le point de vue de la caméra, nous gaspillons des
ressources informatiques. En effet, cette simulation « vers l’avant »
fait en sorte qu’un grand nombre de ces rayons n’atteignent jamais la
caméra. Le <em>ray marching</em> est une simulation « à l’envers » où
les rayons sont tirés à partir d’une caméra. Nous travaillons donc à
l’envers ! Notre caméra émet des rayons dans des directions différentes
(un rayon par <em>pixel</em>). Il faut donc s’imaginer le <em>ray
marching</em> comme une multitude de rayons émanant de notre œil (le
point de vue du spectateur), chaque rayon étant dirigé vers un
<em>pixel</em> spécifique de l’écran (voir <a href="#raymarching00"
data-reference-type="ref"
data-reference="raymarching00">[raymarching00]</a>).</p>
<p>C’est alors que la boucle de <em>ray marching</em> se met en route.
Au départ notre point se situe au niveau de la caméra. Notre scène étant
décrite grâce aux fonctions de distance signée<a href="#fn47"
class="footnote-ref" id="fnref47" role="doc-noteref"><sup>47</sup></a>
expliquées précédemment, nous sommes à même de calculer la distance qui
nous sépare de l’objet le plus proche. Cette distance est représentée
par les cercles verts dans la figure ci-dessous (voir <a
href="#raymarching01" data-reference-type="ref"
data-reference="raymarching01">5.16</a>).</p>
<figure id="raymarching01">
<a href="./memoire/images//raymarching/raymarching00.png" target="_blank"><img src="./memoire/images//raymarching/raymarching00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images//raymarching/raymarching01.png" target="_blank"><img src="./memoire/images//raymarching/raymarching01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Ray marching</em> en perspective // <em>Ray marching</em> en vue de côté</figcaption>
</figure>
<p>Si cette valeur est très petite on considère que l’on a touché
l’objet et on peut sortir de la boucle. On peut le signaler en changeant
la couleur du <em>pixel</em>. Par contre, si la distance est élevée cela
signifie que nous ne sommes pas à la surface d’un objet, c’est alors que
l’on fait avancer le point selon un vecteur normalisé<a href="#fn48"
class="footnote-ref" id="fnref48" role="doc-noteref"><sup>48</sup></a>
représentant la direction du rayon car l’on est certain de ne pas
rencontrer d’objet. On continue le processus soit jusqu’à rencontrer un
objet soit jusqu’à dépasser une distance définie par le développeur: si
au bout de <span class="math inline">\(128\)</span> boucles de <em>ray
marching</em> le rayon n’a touché aucun objet on considère qu’il touche
le « ciel » et on rend une couleur d’arrière-plan.</p>
<p>Voici à quoi ressemble la fonction de <em>ray marching</em> dans un
contexte GLSL, avec une simple sphère comme seul objet de notre
scène.</p>
<div class="sourceCode" id="cb13" data-language="GLSL"
data-caption="Ray marching" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">float</span> r <span class="op">)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="bu">length</span><span class="op">(</span>p<span class="op">)</span> <span class="op">-</span> r<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">rayMarch</span><span class="op">(</span><span class="dt">vec3</span> ro<span class="op">,</span> <span class="dt">vec3</span> rd<span class="op">,</span> <span class="dt">float</span> start<span class="op">,</span> <span class="dt">float</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> depth <span class="op">=</span> start<span class="op">;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">255</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> p <span class="op">=</span> ro <span class="op">+</span> depth <span class="op">*</span> rd<span class="op">;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> d <span class="op">=</span> <span class="fu">sdSphere</span><span class="op">(</span>p<span class="op">,</span> <span class="fl">1.</span><span class="op">);</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    depth <span class="op">+=</span> d<span class="op">;</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">(</span>d <span class="op">&lt;</span> <span class="fl">0.001</span> <span class="op">||</span> depth <span class="op">&gt;</span> end<span class="op">)</span> <span class="kw">break</span><span class="op">;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> depth<span class="op">;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec2</span> uv <span class="op">=</span> <span class="op">(</span>fragCoord<span class="fl">-.5</span><span class="op">*</span>iResolution<span class="op">.</span><span class="fu">xy</span><span class="op">)/</span>iResolution<span class="op">.</span><span class="fu">y</span><span class="op">;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> col <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> ro <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> <span class="co">// ray origin that represents camera position</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> rd <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>uv<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">));</span> <span class="co">// ray direction</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> d <span class="op">=</span> <span class="fu">rayMarch</span><span class="op">(</span>ro<span class="op">,</span> rd<span class="op">,</span> <span class="fl">0.</span><span class="op">,</span> <span class="fl">100.</span><span class="op">);</span> <span class="co">// distance to sphere</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">if</span> <span class="op">(</span>d <span class="op">&gt;</span> <span class="fl">100.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    col <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.6</span><span class="op">);</span> <span class="co">// ray didn&#39;t hit anything</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    col <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span> <span class="co">// ray hit something</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Output to screen</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>col<span class="op">,</span> <span class="fl">1.0</span><span class="op">);</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="repère-main-gauche-vs.-repère-main-droite">Repère « main
gauche » <em>VS.</em> repère « main droite »</h2>
<p>Avant d’aborder les normales, je vais brièvement discuter des
différents systèmes de coordonnées utilisés pour se repérer dans
l’espace.</p>
<p>Dans les logiciels de modélisation 3D ou les moteurs de jeu, on
entend souvent parler des termes de « main gauche » et « main droite ».
La « main gauche » fait référence à un système de coordonnées où l’axe
des <span class="math inline">\(X\)</span> pointe vers la droite, l’axe
des <span class="math inline">\(Y\)</span> pointe vers le haut, et l’axe
des <span class="math inline">\(Z\)</span> pointe « vers l’intérieur de
l’écran ». C’est le système utilisé dans Unity. La « main droite » est
un système de coordonnées où l’axe des <span
class="math inline">\(X\)</span> pointe vers la droite, l’axe des <span
class="math inline">\(Y\)</span> pointe vers le haut, et l’axe des <span
class="math inline">\(Z\)</span> pointe « vers l’extérieur de l’écran »,
c’est-à-dire « vers nous ». C’est le système utilisé dans Blender. Il
existe également une différenciation en ce qui concerne la
représentation de l’axe vertical par <span
class="math inline">\(Y\)</span> ou <span
class="math inline">\(Z\)</span>. Comme le montre l’image ci-dessous
(voir <a href="#lr_handed" data-reference-type="ref"
data-reference="lr_handed">5.17</a>), il existe au total quatre
configurations possibles.</p>
<p>Ce qui est amusant de noter, c’est qu’Unreal se retrouve seul dans sa
catégorie. Je n’ai pas pu le vérifier, mais la légende raconte que cela
est dû au fait que l’ingénieur en charge de la mise en place du système
de coordonnées pour Unreal était totalement étranger au monde de la 3D,
et a donc choisi ce système de coordonnées au hasard, sans se référer à
ce qui existait déjà.</p>
<figure id="lr_handed">
<div class="center">
<a href="./memoire/images/shaders/lr_handed.png" target="_blank"><img src="./memoire/images/shaders/lr_handed.png" style="width:90%" /></a>
</div>
<figcaption>Systèmes « main gauche » / « main droite » dans les
logiciels 3D</figcaption>
</figure>
<h2 id="calcul-de-la-normale">Calcul de la normale</h2>
<p>Maintenant que nous avons mis en place l’algorithme de <em>ray
marching</em> qui nous permet de savoir si on a touché ou non un objet,
nous devons nous intéresser à la normale à la surface en ce point. Tous
les calculs d’éclairage que nous verrons par la suite se baseront sur
cette normale.</p>
<h3 class="unnumbered" id="dans-le-geometry-shader">Dans le <em>geometry
shader</em></h3>
<p>Si nous étions dans le contexte d’un <em>pipeline</em> graphique «
standard » avec une modélisation en entrée, le calcul de normales
s’effectuerait aisément dans le <em>geometry shader</em>. Comme le
<em>geometry shader</em> reçoit en entrée des primitives sous forme de
triangles (des paquets de trois sommets), il est très facile d’obtenir
la normale avec le produit vectoriel entre deux côtés adjacents du
triangle (voir <a href="#norm00" data-reference-type="ref"
data-reference="norm00">[norm00]</a>).</p>
<p>Supposons un triangle <span class="math inline">\(ABC\)</span>, on
peut déterminer les vecteurs adjacents <span
class="math inline">\(\vec{AB}\)</span> et <span
class="math inline">\(\vec{AC}\)</span> en faisant la différence entre
la position des deux sommets de chaque vecteur.</p>
<p><span class="math display">\[\begin{aligned}
\vec{AB} = B - A \\
\vec{AC} = C - A
\end{aligned}\]</span></p>
<figure id="norm01">
<a href="./memoire/images/shaders/norm00.png" target="_blank"><img src="./memoire/images/shaders/norm00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/norm01.png" target="_blank"><img src="./memoire/images/shaders/norm01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Le <em>geometry shader</em> dans le
<em>pipeline</em></figcaption>
</figure>
<p>Si maintenant on effectue le produit vectoriel<a href="#fn49"
class="footnote-ref" id="fnref49" role="doc-noteref"><sup>49</sup></a>
entre ces deux vecteurs nous obtenons la normale au triangle (voir <a
href="#crossprod00" data-reference-type="ref"
data-reference="crossprod00">[crossprod00]</a>).</p>
<p><span class="math display">\[\begin{aligned}
\vec{N} = \vec{AB} \times \vec{AC}
\end{aligned}\]</span></p>
<figure id="crossprod01">
<a href="./memoire/images//shaders/crossprod00.png" target="_blank"><img src="./memoire/images//shaders/crossprod00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images//shaders/crossprod01.png" target="_blank"><img src="./memoire/images//shaders/crossprod01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Calcul de la normale d’un plan à partir de deux
axes</figcaption>
</figure>
<p>Ensuite, comme d’habitude on normalise le vecteur en divisant chaque
composante par la norme<a href="#fn50" class="footnote-ref" id="fnref50"
role="doc-noteref"><sup>50</sup></a> du vecteur car seule sa direction
nous intéresse. On obtient une normale unitaire.</p>
<p><span class="math display">\[\begin{aligned}
\vec{N}_{unitaire} = \frac{\vec{N}}{\|N\|}
\end{aligned}\]</span></p>
<figure id="norm02">
<div class="center">
<a href="./memoire/images/shaders/norm02.png" target="_blank"><img src="./memoire/images/shaders/norm02.png" style="width:90%" /></a>
</div>
<figcaption>Création de sommets à partir d’une sphère dans le
<em>node</em> <em>geometry shader</em> de TouchDesigner</figcaption>
</figure>
<h3 class="unnumbered" id="dans-le-fragment-shader">Dans le <em>fragment
shader</em></h3>
<p>Cependant dans un contexte de <em>livecoding</em> cette méthode ne
peut pas fonctionner puisque nous n’avons pas de <em>mesh</em> en
entrée, la scène étant décrite non pas par une collection de triangles
mais par des SDF.</p>
<p>Pour calculer la normale à la surface nous devons utiliser le
gradient<a href="#fn51" class="footnote-ref" id="fnref51"
role="doc-noteref"><sup>51</sup></a> pour chaque point de la surface. Ce
calcul s’effectue pendant le <em>ray marching</em> au moment où le rayon
atteint l’objet. Ce concept de gradient me semblait assez flou lors de
mes débuts, mais finalement si l’on se réfère au monde en deux
dimensions tout devient plus limpide. Trouver le gradient en un point
équivaut à trouver la pente d’une courbe 2D comme nous savons le faire
avec les dérivées (voir <a href="#grad01" data-reference-type="ref"
data-reference="grad01">5.21</a>).</p>
<p>Dans un graphe à deux dimensions, si voulons calculer la pente d’un
point situé sur une courbe, il nous suffit de calculer la pente de la
droite passant par deux points situés de part et d’autre du point
originel à une distance infiniment petite. Si on ramène cela à un espace
en trois dimensions, ce n’est plus la pente d’une courbe que l’on
cherche à évaluer mais la « pente » d’une surface.</p>
<p>Ainsi pour calculer la normale nous avons besoin de deux points: un
point à l’extérieur du volume de la forme et un autre à l’intérieur, les
deux devant se situer à une distance infinitésimale de la surface. Cette
grandeur infinitésimale est souvent notée <span
class="math inline">\(\epsilon\)</span> (<em>epsilon</em>) en
mathématiques. En GLSL, nous allons donc créer une fonction appelée
<code>calcNormal()</code> qui prend en paramètre un point de contact
avec la surface obtenu par la fonction <code>rayMarch()</code>. Pour
chaque composante (ou pour chaque axe) on calcule la différence entre
deux points situés très proches de la surface (un à l’intérieur et un
autre à l’extérieur). Et comme le résultat attendu est une direction on
le normalise.</p>
<div class="sourceCode" id="cb14" data-language="GLSL"
data-caption="Calcul de la normale" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">calcNormal</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> e <span class="op">=</span> <span class="fl">0.0005</span><span class="op">;</span> <span class="co">// epsilon</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> r <span class="op">=</span> <span class="fl">1.</span><span class="op">;</span> <span class="co">// rayon de la sphere</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span> <span class="op">+</span> e<span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">),</span> r<span class="op">)</span> <span class="op">-</span> <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span> <span class="op">-</span> e<span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">),</span> r<span class="op">),</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span> <span class="op">+</span> e<span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">),</span> r<span class="op">)</span> <span class="op">-</span> <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span> <span class="op">-</span> e<span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">),</span> r<span class="op">),</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span> <span class="op">+</span> e<span class="op">),</span> r<span class="op">)</span> <span class="op">-</span> <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span> <span class="op">-</span> e<span class="op">),</span> r<span class="op">)</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">));</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Il est important de comprendre que la fonction
<code>calcNormal()</code> renvoie une direction de rayon qui représente
la direction vers laquelle un point de la sphère est orienté. C’est
grâce à ce vecteur que nous pourrons implémenter les fonctions qui se
chargeront du calcul de la lumière (voir <a href="#meduse_02"
data-reference-type="ref"
data-reference="meduse_02">[meduse_02]</a>).</p>
<figure id="grad01">
<a href="./memoire/images/shaders/shaderatelier_08.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_08.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/grad01.png" target="_blank"><img src="./memoire/images/shaders/grad01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Représentation des normales // Gradient en 2D</figcaption>
</figure>
<h2 id="modèles-déclairage">Modèles d’éclairage</h2>
<p>Maintenant que nous avons accès à la normale pour chaque point de la
surface de nos objets nous pouvons commencer à réfléchir à leur rendu.
En d’autres termes c’est bien le <em>fragment shader</em> qui sera
responsable du calcul de la lumière.</p>
<p>Pour simuler l’éclairage (le <em>lighting</em> en anglais) du monde
réel sur nos ordinateurs on se base sur des modèles qui sont une
approximation de la physique de la lumière telle que nous la
connaissons. L’un de ces modèles est appelé le modèle d’éclairage Phong
et ses principales composantes sont au nombre de trois: l’éclairage
ambiant, l’éclairage diffus et l’éclairage spéculaire (voir <a
href="#phong00" data-reference-type="ref"
data-reference="phong00">5.22</a>).</p>
<figure id="phong00">
<a href="./memoire/images//shaders/phong00.png" target="_blank"><img src="./memoire/images//shaders/phong00.png" style="width:90.0%" /></a>
<figcaption>Modèle d’éclairage Phong</figcaption>
</figure>
<h2 id="les-trois-composantes-du-modèle-de-phong">Les trois composantes
du modèle de Phong</h2>
<p>L’éclairage ambiant est celui que l’on observe dans un lieu sombre.
Si notre environnement est obscur nous parvenons tout de même à
distinguer des formes dans le noir car il existe quelque part une faible
source lumineuse qui éclaire (la lune par exemple).</p>
<p>L’éclairage diffus quant à lui simule l’impact directionnel d’une
source lumineuse sur un objet. C’est celle que l’on observe le plus dans
la vie de tous les jours (un mur éclairé par exemple). Ce que l’on
remarque avec cette composante, c’est que plus une partie d’un objet est
orientée vers la source de lumière, plus elle devient lumineuse. Pour
s’en convaincre, on peut jouer avec l’inclinaison d’une lampe torche
dirigée vers un mur.</p>
<p>Enfin, l’éclairage spéculaire simule le point lumineux d’une lumière
qui apparaît sur les objets brillants. Un exemple caractéristique est
celui de la tâche brillante qui apparaît sur la carrosserie des voitures
en plein soleil.</p>
<p>Tout l’art de l’éclairage consiste à simuler ces trois composantes
pour créer des scènes intéressantes.</p>
<h3 class="unnumbered"
id="les-trois-composantes-du-modèle-de-phong-en-code">Les trois
composantes du modèle de Phong en code</h3>
<h4 class="unnumbered" id="lumière-ambiante">Lumière ambiante</h4>
<p>Pour appliquer la composante de lumière ambiante en GLSL il nous
suffit de rajouter une constante d’éclairage qui donnera toujours une
couleur à l’objet (voir <a href="#ambiant00" data-reference-type="ref"
data-reference="ambiant00">5.23</a>). Nous prenons la couleur de la
lumière, nous la multiplions avec un petit facteur ambiant constant,
puis nous la multiplions avec la couleur de l’objet et enfin nous
l’utilisons comme couleur du fragment dans le <em>shader</em> de
l’objet. Nous n’avons pas besoin de modéliser la source lumineuse car
l’ajout de l’éclairage ambiant en code est entièrement artificiel.</p>
<div class="sourceCode" id="cb15" data-language="GLSL"
data-caption="Lumière ambiante" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> ambientStrength <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> ambient <span class="op">=</span> ambientStrength <span class="op">*</span> lightColor<span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> result <span class="op">=</span> ambient <span class="op">*</span> objectColor<span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>FragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>result<span class="op">,</span> <span class="fl">1.0</span><span class="op">);</span></span></code></pre></div>
<h4 class="unnumbered" id="lumière-diffuse">Lumière diffuse</h4>
<p>Pour l’éclairage diffus, nous aurons besoin d’outils mathématiques
mais aussi d’une représentation de la lumière. Cette dernière peut être
définie par une position dans l’espace 3D. Dans la section consacrée au
calcul de normales nous symbolisions la direction par un vecteur avec
trois composantes mais rien ne nous empêche d’utiliser cette même
structure pour traduire la position de la source lumineuse.</p>
<div class="sourceCode" id="cb16" data-language="GLSL"
data-caption="Position de la lumière avec un 
\lstinline{vec3}" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> lightPosition <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span></code></pre></div>
<p>Ici on considère une source de lumière positionnelle comme une
ampoule, c’est à dire que chaque point de la surface de nos objets
recevra un rayon lumineux différent (tous les rayons ont une direction
différente selon le point de la surface, voir <a href="#diffuse00"
data-reference-type="ref"
data-reference="diffuse00">[diffuse00]</a>).</p>
<figure id="ambiant00">
<a href="./memoire/images/shaders/diffuse00.png" target="_blank"><img src="./memoire/images/shaders/diffuse00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/ambiant00.png" target="_blank"><img src="./memoire/images/shaders/ambiant00.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Calcul de la diffuse // Représentation de la lumière ambiante</figcaption>
</figure>
<p>Pour représenter cette direction du rayon lumineux qui diffère pour
chaque point de la surface de l’objet nous devons calculer le vecteur
représentant la direction du rayon lumineux. Le calcul est assez simple,
la direction du rayon lumineux sera la différence entre la position de
la lumière et le point que nous obtenons en retour de la boucle de
<em>ray marching</em>. Il ne faut pas oublier de normaliser le résultat
car seule la direction nous importe.</p>
<div class="sourceCode" id="cb17" data-language="GLSL"
data-caption="Direction de la lumière" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> lightDirection <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>lightPosition <span class="op">-</span> p<span class="op">);</span></span></code></pre></div>
<p>Pour connaître la quantité de lumière qui frappe la surface de notre
objet, nous devons utiliser le produit scalaire<a href="#fn52"
class="footnote-ref" id="fnref52" role="doc-noteref"><sup>52</sup></a>
entre le rayon lumineux et la normale. Le produit scalaire se révèle
souvent très pratique car il permet de connaître le degré de
colinéarité<a href="#fn53" class="footnote-ref" id="fnref53"
role="doc-noteref"><sup>53</sup></a> de deux vecteurs. Si les deux
vecteurs ont la même direction, le résultat du produit scalaire sera
<span class="math inline">\(1\)</span>. S’ils ont des directions
opposées il renverra <span class="math inline">\(-1\)</span>. S’ils sont
orthogonaux<a href="#fn54" class="footnote-ref" id="fnref54"
role="doc-noteref"><sup>54</sup></a> le résultat sera nul. Enfin, dans
tous les autres cas le produit scalaire retournera une valeur comprise
entre <span class="math inline">\(-1\)</span> et <span
class="math inline">\(1\)</span> qui correspondra au degré de
colinéarité des deux vecteurs.</p>
<p>Le produit scalaire renvoie donc un scalaire que nous pouvons
utiliser pour calculer l’impact de la lumière sur la couleur du
fragment, ce qui donne des fragments éclairés différemment en fonction
de leur orientation par rapport à la lumière.</p>
<p>En GLSL, nous utilisons la fonction <code>dot()</code> pour calculer
cette valeur.</p>
<div class="sourceCode" id="cb18" data-language="GLSL"
data-caption="Quantité de lumière diffuse" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> dif <span class="op">=</span> <span class="bu">dot</span><span class="op">(</span>normal<span class="op">,</span> lightDirection<span class="op">);</span> <span class="co">// dif = diffuse reflection</span></span></code></pre></div>
<p>Lorsque nous effectuons le produit scalaire entre les vecteurs de la
normale et de la direction de la lumière, il se peut que nous obtenions
une valeur négative car <code>dot()</code> renvoie des valeurs entre
<span class="math inline">\(-1\)</span> et <span
class="math inline">\(+1\)</span>. Pour maintenir la valeur entre <span
class="math inline">\(0\)</span> et <span
class="math inline">\(1\)</span> afin d’obtenir une plage de valeurs
plus correcte, nous pouvons utiliser la fonction
<code>clamp()</code>.</p>
<div class="sourceCode" id="cb19" data-language="GLSL"
data-caption="\lstinline{clamp()} sur diffuse" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> dif <span class="op">=</span> <span class="bu">clamp</span><span class="op">(</span><span class="bu">dot</span><span class="op">(</span>normal<span class="op">,</span> lightDirection<span class="op">),</span> <span class="fl">0.</span><span class="op">,</span> <span class="fl">1.</span><span class="op">);</span></span></code></pre></div>
<p>Maintenant si on veut rajouter un peu de couleur à notre objet il
suffit de multiplier la valeur de la réflection diffuse par un vecteur
de couleur qui simulera la couleur du matériau:</p>
<div class="sourceCode" id="cb20" data-language="GLSL"
data-caption="Couleur diffuse" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span>dif<span class="op">)</span> <span class="op">*</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="fl">0.58</span><span class="op">,</span> <span class="fl">0.29</span><span class="op">);</span></span></code></pre></div>
<h4 class="unnumbered" id="lumière-spéculaire">Lumière spéculaire</h4>
<p>La dernière composante de lumière à implémenter est l’éclairage
spéculaire. Dans la réalité, les matériaux tels que les métaux et les
surfaces polies présentent une réflexion spéculaire qui semble plus
brillante en fonction de l’angle de la caméra ou de l’endroit où le
spectateur fait face à l’objet. Comme l’éclairage diffus, l’éclairage
spéculaire est basé sur le vecteur de direction de la lumière et les
vecteurs de normales de l’objet, mais cette fois il est également basé
sur la direction de la vue, c’est-à-dire la direction à partir de
laquelle l’observateur regarde le fragment.</p>
<p>Comme l’éclairage spéculaire est basé sur les propriétés
réfléchissantes des surfaces, si nous considérons la surface de l’objet
comme un miroir, l’éclairage spéculaire est le plus fort là où nous
voyons la lumière se refléter sur la surface (voir <a href="#specular00"
data-reference-type="ref" data-reference="specular00">[specular00]</a>).
Sur le schéma, plus l’angle formé par le vecteur <span
class="math inline">\(\vec{R}\)</span> et le vecteur de vue (en gris)
est petit plus l’impact de la lumière spéculaire sera important.</p>
<figure id="specular01">
<a href="./memoire/images/shaders/specular00.png" target="_blank"><img src="./memoire/images/shaders/specular00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/specular01.png" target="_blank"><img src="./memoire/images/shaders/specular01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Calcul de la spéculaire // Éclairage spéculaire</figcaption>
</figure>
<p>Nous avons vu précédemment comment mesurer un angle entre deux
vecteurs avec la fonction <code>dot()</code>. Avec la fonction
intégrée<a href="#fn55" class="footnote-ref" id="fnref55"
role="doc-noteref"><sup>55</sup></a> <code>reflect()</code> nous pouvons
calculer la direction du rayon réfléchi à partir du rayon incident.
Cette fonction prend deux paramètres : le vecteur de direction du rayon
incident et le vecteur normal.</p>
<p>Nous avons déjà calculé le vecteur de direction de la lumière pour le
calcul de la lumière diffuse. La seule variable supplémentaire dont nous
avons besoin pour calculer l’éclairage spéculaire est le vecteur de vue.
Mais celui-ci est assez simple à calculer, c’est le vecteur qui part du
point d’origine de notre <em>ray marching</em> et qui se dirige vers le
point de notre surface.</p>
<p>Dans le code GLSL, la valeur <span
class="math inline">\(k\_s\)</span> est la constante de réflexion
spéculaire qui influera sur l’étalement de la tâche brillante, la valeur
<span class="math inline">\(i\_s\)</span> représente la couleur de la
spéculaire, ici un blanc pur.</p>
<div class="sourceCode" id="cb21" data-language="GLSL"
data-caption="Spéculaire" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">mat3</span> <span class="fu">camera</span><span class="op">(</span><span class="dt">vec3</span> cameraPos<span class="op">,</span> <span class="dt">vec3</span> lookAtPoint<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// specular</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> k_s <span class="op">=</span> <span class="fl">0.6</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> dotRV <span class="op">=</span> <span class="bu">clamp</span><span class="op">(</span><span class="bu">dot</span><span class="op">(</span><span class="bu">reflect</span><span class="op">(</span>lightDir<span class="op">,</span> normal<span class="op">),</span> <span class="op">-</span>rd<span class="op">),</span> <span class="fl">0.</span><span class="op">,</span> <span class="fl">1.</span><span class="op">);</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> i_s <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> alpha <span class="op">=</span> <span class="fl">10.</span><span class="op">;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> specular <span class="op">=</span> k_s <span class="op">*</span> <span class="bu">pow</span><span class="op">(</span>dotRV<span class="op">,</span> alpha<span class="op">)</span> <span class="op">*</span> i_s<span class="op">;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>En conclusion, la spéculaire peut réellement améliorer l’aspect de
notre scène en ajoutant un peu d’éclat ou de brillance à nos objets.</p>
<h3 class="unnumbered" id="code-complet-de-léclairage-de-phong">Code
complet de l’éclairage de Phong</h3>
<div class="sourceCode" id="cb22" data-language="GLSL"
data-caption="Code complet" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">int</span> MAX_MARCHING_STEPS <span class="op">=</span> <span class="dv">255</span><span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">float</span> MIN_DIST <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">float</span> MAX_DIST <span class="op">=</span> <span class="fl">100.0</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">float</span> PRECISION <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">float</span> r <span class="op">)</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> <span class="dt">offset</span> <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="op">-</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="bu">length</span><span class="op">(</span>p <span class="op">-</span> <span class="dt">offset</span><span class="op">)</span> <span class="op">-</span> r<span class="op">;</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">rayMarch</span><span class="op">(</span><span class="dt">vec3</span> ro<span class="op">,</span> <span class="dt">vec3</span> rd<span class="op">,</span> <span class="dt">float</span> start<span class="op">,</span> <span class="dt">float</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> depth <span class="op">=</span> start<span class="op">;</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_MARCHING_STEPS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> p <span class="op">=</span> ro <span class="op">+</span> depth <span class="op">*</span> rd<span class="op">;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> d <span class="op">=</span> <span class="fu">sdSphere</span><span class="op">(</span>p<span class="op">,</span> <span class="fl">1.</span><span class="op">);</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    depth <span class="op">+=</span> d<span class="op">;</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">(</span>d <span class="op">&lt;</span> PRECISION <span class="op">||</span> depth <span class="op">&gt;</span> end<span class="op">)</span> <span class="kw">break</span><span class="op">;</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> depth<span class="op">;</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">calcNormal</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> e <span class="op">=</span> <span class="dt">vec2</span><span class="op">(</span><span class="fl">1.0</span><span class="op">,</span> <span class="op">-</span><span class="fl">1.0</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.0005</span><span class="op">;</span> <span class="co">// epsilon</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> r <span class="op">=</span> <span class="fl">1.</span><span class="op">;</span> <span class="co">// rayon de la sphere</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">normalize</span><span class="op">(</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>      e<span class="op">.</span><span class="fu">xyy</span> <span class="op">*</span> <span class="fu">sdSphere</span><span class="op">(</span>p <span class="op">+</span> e<span class="op">.</span><span class="fu">xyy</span><span class="op">,</span> r<span class="op">)</span> <span class="op">+</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>      e<span class="op">.</span><span class="fu">yyx</span> <span class="op">*</span> <span class="fu">sdSphere</span><span class="op">(</span>p <span class="op">+</span> e<span class="op">.</span><span class="fu">yyx</span><span class="op">,</span> r<span class="op">)</span> <span class="op">+</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>      e<span class="op">.</span><span class="fu">yxy</span> <span class="op">*</span> <span class="fu">sdSphere</span><span class="op">(</span>p <span class="op">+</span> e<span class="op">.</span><span class="fu">yxy</span><span class="op">,</span> r<span class="op">)</span> <span class="op">+</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>      e<span class="op">.</span><span class="fu">xxx</span> <span class="op">*</span> <span class="fu">sdSphere</span><span class="op">(</span>p <span class="op">+</span> e<span class="op">.</span><span class="fu">xxx</span><span class="op">,</span> r<span class="op">));</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">mainImage</span><span class="op">(</span> <span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">,</span> <span class="dt">in</span> <span class="dt">vec2</span> fragCoord <span class="op">)</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec2</span> uv <span class="op">=</span> <span class="op">(</span>fragCoord<span class="fl">-.5</span><span class="op">*</span>iResolution<span class="op">.</span><span class="fu">xy</span><span class="op">)/</span>iResolution<span class="op">.</span><span class="fu">y</span><span class="op">;</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> backgroundColor <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.835</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> col <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> ro <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span> <span class="co">// ray origin qui represente la position de la camera</span></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> rd <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>uv<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">));</span> <span class="co">// ray direction</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> d <span class="op">=</span> <span class="fu">rayMarch</span><span class="op">(</span>ro<span class="op">,</span> rd<span class="op">,</span> MIN_DIST<span class="op">,</span> MAX_DIST<span class="op">);</span> <span class="co">// distance par rapport a la sphere</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>  <span class="kw">if</span> <span class="op">(</span>d <span class="op">&gt;</span> MAX_DIST<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  col <span class="op">=</span> backgroundColor<span class="op">;</span> <span class="co">// le rayon n a rien touche</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> p <span class="op">=</span> ro <span class="op">+</span> rd <span class="op">*</span> d<span class="op">;</span> <span class="co">// le rayon a touche la sphere au point p</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> normal <span class="op">=</span> <span class="fu">calcNormal</span><span class="op">(</span>p<span class="op">);</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> lightPosition <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> lightDirection <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>lightPosition <span class="op">-</span> p<span class="op">);</span></span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">// calculer la diffuse grace au produit scalaire</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// entre la normale et la direction de la lumiere.</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> dif <span class="op">=</span> <span class="bu">clamp</span><span class="op">(</span><span class="bu">dot</span><span class="op">(</span>normal<span class="op">,</span> lightDirection<span class="op">),</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">1.</span><span class="op">);</span></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">// ajouter la couleur orange</span></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">// et une couleur pour le background</span></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>    col <span class="op">=</span> dif <span class="op">*</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="fl">0.58</span><span class="op">,</span> <span class="fl">0.29</span><span class="op">)</span> <span class="op">+</span> backgroundColor <span class="op">*</span> <span class="op">.</span><span class="fu">2</span><span class="op">;</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>  <span class="co">// sortie vers l ecran</span></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>  fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>col<span class="op">,</span> <span class="fl">1.0</span><span class="op">);</span></span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="discriminer-les-objets">Discriminer les objets</h2>
<p>Une stratégie particulièrement efficace en <em>livecoding</em>
consiste à pouvoir différencier les objets afin de leur appliquer des
matériaux distincts. Pour ce faire, il est nécessaire de refactoriser le
code, notamment les fonctions décrivant les objets à l’aide des SDF, de
manière à ce qu’elles retournent un identifiant en plus de la
distance.</p>
<div class="sourceCode" id="cb23" data-language="GLSL"
data-caption="SDF avec id" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> <span class="dt">float</span> <span class="fu">_cube</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">vec3</span> s<span class="op">)</span> <span class="co">// s pour size en X,Y,Z</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> l <span class="op">=</span> <span class="bu">abs</span><span class="op">(</span>p<span class="op">)-</span>s<span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">max</span><span class="op">(</span>l<span class="op">.</span><span class="fu">x</span><span class="op">,</span><span class="bu">max</span><span class="op">(</span>l<span class="op">.</span><span class="fu">y</span><span class="op">,</span>l<span class="op">.</span><span class="fu">z</span><span class="op">));</span> <span class="co">// combinaisons d intersection des 3 axes</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>L’autre fonction à redéfinir est la fonctions <code>min()</code> qui
nous permettait de combiner nos formes. Désormais, comme elle reçoit en
paramètre un <code>vec2</code> contenant la distance et l’identifiant,
elle doit comparer les distances avant de retourner le
<code>vec2</code>.</p>
<div class="sourceCode" id="cb24" data-language="GLSL"
data-caption="Nouvelle fonction \lstinline{min()}" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> <span class="fu">_min</span><span class="op">(</span><span class="dt">vec2</span> a<span class="op">,</span> <span class="dt">vec2</span> b<span class="op">)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span><span class="op">(</span>a<span class="op">.</span><span class="fu">x</span> <span class="op">&lt;</span> b<span class="op">.</span><span class="fu">x</span><span class="op">)</span> <span class="kw">return</span> a<span class="op">;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> b<span class="op">;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>D’autres parties du code doivent être refactorisées en conséquence,
tel que le calcul de la normale qui dépendait de la fonction de calcul
de distance qui est maintenant modifiée. Le calcul de la normale devient
alors:</p>
<div class="sourceCode" id="cb25" data-language="GLSL"
data-caption="Nouvelle fonction \lstinline{getNorm()}"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">getNorm</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> eps <span class="op">=</span> <span class="dt">vec2</span><span class="op">(.</span><span class="fu">01</span><span class="op">,</span><span class="fl">0.</span><span class="op">);</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// on rajoute .x pour recuperer la composante qui decrit la distance</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">normalize</span><span class="op">(</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">vec3</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span>p<span class="op">-</span>eps<span class="op">.</span><span class="fu">xyy</span><span class="op">).</span><span class="fu">x</span><span class="op">,</span><span class="fu">map</span><span class="op">(</span>p<span class="op">-</span>eps<span class="op">.</span><span class="fu">yxy</span><span class="op">).</span><span class="fu">x</span><span class="op">,</span><span class="fu">map</span><span class="op">(</span>p<span class="op">-</span>eps<span class="op">.</span><span class="fu">yyx</span><span class="op">).</span><span class="fu">x</span><span class="op">)</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span><span class="dt">vec3</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span>p<span class="op">+</span>eps<span class="op">.</span><span class="fu">xyy</span><span class="op">).</span><span class="fu">x</span><span class="op">,</span><span class="fu">map</span><span class="op">(</span>p<span class="op">+</span>eps<span class="op">.</span><span class="fu">yxy</span><span class="op">).</span><span class="fu">x</span><span class="op">,</span><span class="fu">map</span><span class="op">(</span>p<span class="op">+</span>eps<span class="op">.</span><span class="fu">yyx</span><span class="op">).</span><span class="fu">x</span><span class="op">)</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Ensuite, lors du rendu, il est possible d’assigner des couleurs à
chaque objet en examinant l’identifiant de l’objet le plus proche
renvoyé par l’algorithme de <em>ray marching</em>. Lorsqu’il est établi
qu’un objet a été touché par le rayon, il est possible de déterminer
lequel en effectuant un test sur son identifiant.</p>
<div class="sourceCode" id="cb26" data-language="GLSL"
data-caption="Discriminer les objets avec l&#39;id dans le  \textit{ray marching}"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span><span class="op">(</span><span class="dt">float</span> i<span class="op">=</span><span class="fl">0.</span><span class="op">;</span> i<span class="op">&lt;</span><span class="fl">128.</span><span class="op">;</span>i<span class="op">++)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">// cartographie la scene, le vec2 contient la distance et l&#39;id des objets de la scene</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">vec2</span> res <span class="op">=</span> <span class="fu">map</span><span class="op">(</span>p<span class="op">);</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">// on compare la distance</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span><span class="op">(</span>res<span class="op">.</span><span class="fu">x</span> <span class="op">&lt;</span> <span class="op">.</span><span class="fu">01</span><span class="op">)</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span>            </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>            <span class="co">// on discrimine les objets</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> <span class="op">(</span>res<span class="op">.</span><span class="fu">y</span> <span class="op">&gt;</span> <span class="fl">2.</span><span class="op">)</span> <span class="op">(...);</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> <span class="op">(</span>res<span class="op">.</span><span class="fu">y</span> <span class="op">&gt;</span> <span class="fl">1.</span><span class="op">)</span> <span class="op">(...);</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> <span class="op">(</span>res<span class="op">.</span><span class="fu">y</span> <span class="op">&gt;</span> <span class="fl">0.</span><span class="op">)</span> <span class="op">(...);</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>            <span class="kw">break</span><span class="op">;</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        p<span class="op">+=</span> rd<span class="op">*</span>res<span class="op">.</span><span class="fu">x</span><span class="op">;</span>  </span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered" id="problème-valeurs-fractionnaires">Problème
valeurs fractionnaires</h3>
<p>On peut remarquer un détail dans le code : les identifiants des
objets sont représentés par des valeurs fractionnaires
(<code>float</code>), c’est-à-dire des nombres à virgule dans le langage
courant. Ensuite, nous vérifions l’identifiant dans la fonction de rendu
en examinant si cette valeur fractionnaire est supérieure à un nombre
entier.</p>
<p>Une alternative aurait été d’utiliser des nombres entiers pour
identifier les objets, puis d’utiliser l’opérateur d’égalité
<code>==</code> pour déterminer quel objet est touché par le rayon.
Cependant, cette méthode, bien que plus naturelle et intuitive, ne
fonctionne pas de manière fiable avec tous les compilateurs. En effet,
le comportement de l’opérateur <code>==</code> peut varier selon les
architectures, ce qui peut entraîner des situations difficiles à
déboguer.</p>
<p>La méthode la plus sûre reste l’utilisation de valeurs fractionnaires
et d’une vérification avec l’opérateur « supérieur à »
(<code>&gt;</code>) car cela garantit un rendu correct de la scène.</p>
<h2 id="dautres-manières-de-discriminer-les-objets">D’autres manières de
discriminer les objets</h2>
<p>Cette méthode de discrimination des objets est extrêmement utile en
<em>livecoding</em>, car elle est intuitive et rapide à mettre en œuvre.
Bien qu’il existe d’autres approches, elles sont souvent plus complexes
à implémenter, et donc peu adaptées à la scène.</p>
<p>Parmi ces techniques, de nombreuses utilisent les structures
inspirées du langage C++ (<code>struct</code>), qui sont un autre moyen
pour organiser le code en GLSL. Les structures peuvent être imaginées
comme une combinaison de variables pour représenter des concepts. Par
exemple, on peut définir une structure spécifique pour représenter le
concept de surface dans le monde physique :</p>
<div class="sourceCode" id="cb27" data-language="GLSL"
data-caption="Utilisation d&#39;une structure" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Surface <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> signedDistance<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vec3</span> color<span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>À la relecture du code, on comprend clairement que la surface possède
deux propriétés: sa distance par rapport à la caméra et une couleur
associée à son matériau. Toute l’astuce ensuite consiste à réadapter son
code (cohérence des valeurs de retour, refactorisation de certaines
fonctions). Une fonction de distance prenant en compte cette nouvelle
structure pourrait être réécrite de la manière suivante :</p>
<div class="sourceCode" id="cb28" data-language="GLSL"
data-caption="Refactorisation d&#39;une SDF" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>Surface <span class="fu">sdSphere</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">float</span> r<span class="op">,</span> <span class="dt">vec3</span> <span class="dt">offset</span><span class="op">,</span> <span class="dt">vec3</span> col<span class="op">)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> d <span class="op">=</span> <span class="bu">length</span><span class="op">(</span>p <span class="op">-</span> <span class="dt">offset</span><span class="op">)</span> <span class="op">-</span> r<span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="fu">Surface</span><span class="op">(</span>d<span class="op">,</span> col<span class="op">);</span> <span class="co">// We&#39;re initializing a new &quot;Surface&quot; struct here and then returning it</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Dans un contexte en dehors du <em>livecoding</em>, l’utilisation de
structures semble être le choix le plus judicieux pour améliorer la
lisibilité du code, car elles permettent une organisation claire et
cohérente des données. Les structures rendent le code plus facile à
interpréter et donnent un aspect plus soigné.</p>
<p>Cette approche de conceptualisation du code, similaire à la
programmation orientée objet, pourrait également être appliquée aux
lumières. En effet, chaque lumière pourrait être représentée par une
structure regroupant ses différentes caractéristiques telles que sa
couleur, sa position et son intensité. Cela faciliterait la gestion et
la manipulation des lumières dans le code, rendant ainsi le programme
plus modulaire et plus facile à maintenir.</p>
<h2 id="mise-en-place-dune-caméra">Mise en place d’une caméra</h2>
<p>Maintenant que avons la capacité de dessiner notre scène et de
calculer son éclairage, on pourrait rajouter une caméra pour permettre
de naviguer dans la scène. Cela offrirait davantage de contrôle sur ce
que le spectateur observe, enrichissant ainsi l’expérience visuelle.</p>
<p>Jusqu’à présent, nous avons représenté la caméra comme un simple
point fixe dirigé vers la scène. Cependant, pour créer une caméra plus
flexible, similaire à celles que nous utilisons couramment dans les
logiciels de modélisation 3D tels que Maya (permettant des rotations
autour des objets ou le ciblage de certaines parties de la scène), nous
devons utiliser des concepts mathématiques relativement simples à
assimiler.</p>
<p>Pour intégrer la caméra souhaitée, nous aurions besoin d’une fonction
prenant en paramètre l’origine du rayon et le point à observer qui nous
renverrait une matrice de dimensions <span
class="math inline">\(3\times3\)</span> à multiplier pour obtenir la
nouvelle direction du rayon pour le calcul du <em>ray marching</em>.
Avant d’expliquer les mathématiques qui se cachent derrière, examinons
le code final:</p>
<div class="sourceCode" id="cb29" data-language="GLSL"
data-caption="Fonction \lstinline{camera()}" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dt">mat3</span> <span class="fu">camera</span><span class="op">(</span><span class="dt">vec3</span> cameraPos<span class="op">,</span> <span class="dt">vec3</span> lookAtPoint<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>	<span class="dt">vec3</span> cd <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>lookAtPoint <span class="op">-</span> cameraPos<span class="op">);</span> <span class="co">// camera direction</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>	<span class="dt">vec3</span> cr <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span><span class="bu">cross</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> cd<span class="op">));</span> <span class="co">// camera right</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>	<span class="dt">vec3</span> cu <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span><span class="bu">cross</span><span class="op">(</span>cd<span class="op">,</span> cr<span class="op">));</span> <span class="co">// camera up</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>	</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>	<span class="kw">return</span> <span class="dt">mat3</span><span class="op">(-</span>cr<span class="op">,</span> cu<span class="op">,</span> <span class="op">-</span>cd<span class="op">);</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<figure id="camera00">
<div class="center">
<a href="./memoire/images/shaders/camera00.png" target="_blank"><img src="./memoire/images/shaders/camera00.png" style="width:90.0%" /></a>
</div>
<figcaption>Intégration d’une caméra</figcaption>
</figure>
<p>L’image <a href="#camera00" data-reference-type="ref"
data-reference="camera00">5.25</a> nous permet de comprendre comment
cette matrice <span class="math inline">\(3\times3\)</span> a été
construite. Nous devons déterminer où la caméra regarde et comment elle
est inclinée en analysant trois vecteurs importants de la caméra : le
vecteur « direction de la caméra » (<code>cd</code>), le vecteur
« droite de la caméra » (<code>cr</code>) et le vecteur « haut de la
caméra » (<code>cu</code>).</p>
<p>À la première étape, nous recevons simplement l’origine du rayon
comme position de la caméra. La deuxième étape permet de calculer la
direction du rayon. Elle s’obtient en faisant la soustraction entre le
point que l’on vise et la position de la caméra. Encore une fois on
normalise ce vecteur car seule la direction nous importe.</p>
<div class="sourceCode" id="cb30" data-language="GLSL"
data-caption="Direction de la caméra" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> cd <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>lookAtPoint <span class="op">-</span> cameraPos<span class="op">);</span> <span class="co">// direction de la camera</span></span></code></pre></div>
<p>Lors de la troisième étape on veut calculer le vecteur « à droite de
la caméra ». Pour cela on utilise le produit vectoriel (<em>cross
product</em> en anglais, <code>cross()</code> en code) entre un vecteur
unitaire toujours dirigé vers le haut (<code>vec3(0, 1, 0)</code>) et le
vecteur de direction obtenu à l’étape précédente:</p>
<div class="sourceCode" id="cb31" data-language="GLSL"
data-caption="Vecteur « à droite de la caméra »"
data-captionpos="b"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> cd <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>lookAtPoint <span class="op">-</span> cameraPos<span class="op">);</span> <span class="co">// direction de la camera</span></span></code></pre></div>
<p>Enfin à la dernière étape, toujours avec le produit vectoriel nous
obtenons le vecteur « caméra vers le haut » grâce aux vecteurs « caméra
vers la droite » et « direction des rayons ».</p>
<div class="sourceCode" id="cb32" data-language="GLSL"
data-caption="Vecteur « caméra vers le haut »" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> cu <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span><span class="bu">cross</span><span class="op">(</span>cd<span class="op">,</span> cr<span class="op">));</span> <span class="co">// camera up</span></span></code></pre></div>
<p>Nous pouvons alors créer une matrice de transformation <span
class="math inline">\(3\times3\)</span> en combinant tous ces vecteurs
nouvellement calculés.</p>
<div class="sourceCode" id="cb33" data-language="GLSL"
data-caption="Matrice $3\times3$ pour la caméra" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">return</span> <span class="dt">mat3</span><span class="op">(-</span>cr<span class="op">,</span> cu<span class="op">,</span> <span class="op">-</span>cd<span class="op">);</span></span></code></pre></div>
<p>Le signe négatif devant <code>cr</code> et <code>cd</code> est une
convention simple qui indique le sens de la direction le long de chaque
axe. En pratique, il suffit désormais de spécifier un point
d’observation et un point d’origine, puis de les passer à notre fonction
<code>camera()</code>. Cela nous permettra d’obtenir le nouveau rayon de
direction, à partir duquel nous pouvons ensuite démarrer l’algorithme de
<em>ray marching</em>.</p>
<div class="sourceCode" id="cb34" data-language="GLSL"
data-caption="Transformation du rayon" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> lp <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span> <span class="co">// le point qu&#39;on observe</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> ro <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span> <span class="co">// la position de la camera</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> rd <span class="op">=</span> <span class="fu">camera</span><span class="op">(</span>ro<span class="op">,</span> lp<span class="op">)</span> <span class="op">*</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>uv<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">));</span> <span class="co">// le nouveau rayon de direction</span></span></code></pre></div>
<p>Nous obtenons ainsi une caméra bien plus flexible, capable d’ajuster
la direction des rayons en fonction de sa position et/ou du point
qu’elle observe. Par exemple, pour effectuer une rotation autour d’un
objet, il suffit de décrire une trajectoire circulaire de la caméra en
utilisant les coordonnées polaires pour la position d’origine, tout en
maintenant la hauteur constante. Cette rotation peut être réalisée en
modifiant les coordonnées polaires de la position d’origine de la
caméra, et en utilisant les fonctions trigonométriques telles que
<code>cos()</code> et <code>sin()</code> appliquées au temps pour
obtenir un mouvement circulaire cyclique et constant.</p>
<div class="sourceCode" id="cb35" data-language="GLSL"
data-caption="Rotation de la caméra autour d&#39;un objet"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> lp <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="op">-</span><span class="dv">4</span><span class="op">);</span> <span class="co">// point observe</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> ro <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span> <span class="co">// position de la camera</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">// on fixe une distance pour la camera</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> cameraRadius <span class="op">=</span> <span class="fl">10.</span><span class="op">;</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">// on modifie la position de la camera en fonction du temps</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>ro<span class="op">.</span><span class="fu">x</span> <span class="op">=</span> cameraRadius <span class="op">*</span> <span class="bu">cos</span><span class="op">(</span>iTime<span class="op">)</span> <span class="op">+</span> lp<span class="op">.</span><span class="fu">x</span><span class="op">;</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>ro<span class="op">.</span><span class="fu">z</span> <span class="op">=</span> cameraRadius <span class="op">*</span> <span class="bu">sin</span><span class="op">(</span>iTime<span class="op">)</span> <span class="op">+</span> lp<span class="op">.</span><span class="fu">z</span><span class="op">;</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> rd <span class="op">=</span> <span class="fu">camera</span><span class="op">(</span>ro<span class="op">,</span> lp<span class="op">)</span> <span class="op">*</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>uv<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">));</span> <span class="co">// nouvelle direction de rayon</span></span></code></pre></div>
<h2 id="répétition-de-domaine">Répétition de domaine</h2>
<h3 class="unnumbered" id="introduction-4">Introduction</h3>
<p>Nous avons récemment exploré la représentation d’une scène 3D en
utilisant l’algorithme de <em>ray marching</em> appliqué à nos SDF
décrivant la scène. Avec seulement une vingtaine de lignes de code, il
est possible d’animer et de rendre un objet 3D, sans avoir besoin d’un
moteur de rendu externe.</p>
<p>Auparavant, nous avons également introduit la fonction
<code>smoothmin()</code>, qui facilite la fusion harmonieuse des objets.
Nous allons désormais nous pencher sur la répétition de domaine, une
technique qui permet de reproduire un objet un nombre infini de fois
avec une seule ligne de code, évitant ainsi la nécessité de créer une
infrastructure d’instanciation complexe. Cette section est dédiée à
l’exploration approfondie de cette méthode, en mettant en évidence ses
avantages, ses limites et ses applications.</p>
<figure id="shadat04">
<a href="./memoire/images/shaders/shaderatelier_02.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_02.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shaderatelier_04.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_04.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Répétition sur trois axes // Répétition sur deux axes</figcaption>
</figure>
<h3 class="unnumbered" id="définition-répétition-de-domaine">Définition:
répétition de domaine</h3>
<p>La répétition de domaine vise à transformer une SDF, exprimée sous
forme de fonction mathématique, en une forme périodique, la faisant se
répéter continuellement dans l’espace, à l’image d’une fonction
<code>sin(x)</code>. Pour illustrer, voici une méthode simple pour
rendre une SDF périodique dans la direction <span
class="math inline">\(X\)</span> :</p>
<div class="sourceCode" id="cb36" data-language="GLSL"
data-caption="Répétition de l&#39;espace sur l&#39;axe $X$"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// repetition de l&#39;espace</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">repeated</span><span class="op">(</span> <span class="dt">vec3</span> p <span class="op">)</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span><span class="fu">x</span> <span class="op">=</span> p<span class="op">.</span><span class="fu">x</span> <span class="op">-</span> <span class="bu">round</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">);</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="fu">sdf</span><span class="op">(</span>p<span class="op">);</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Dans ce contexte, <code>sdf()</code> représente la forme fondamentale
que nous souhaitons répéter. La fonction <code>round()</code> détermine
l’entier le plus proche de <span class="math inline">\(x\)</span> et
l’utilise comme nouveau centre de coordonnées. Cela établit un nouveau
système de coordonnées tous les <span class="math inline">\(1\)</span>
unité de distance, formant ainsi une mosaïque spatiale dans la direction
<span class="math inline">\(x\)</span>. Autrement dit, cette opération
recentre continuellement le domaine de la fonction, <span
class="math inline">\(p\)</span>, dans l’intervalle <span
class="math inline">\((-0.5, 0.5)\)</span>. Si la SDF
<code>sdf(p)</code> (représentée par une boîte arrondie dans les images
<a href="#repet00" data-reference-type="ref"
data-reference="repet00">[repet00]</a> et <a href="#repet01"
data-reference-type="ref" data-reference="repet01">5.27</a>) est définie
dans cet intervalle, elle adoptera un comportement périodique.</p>
<figure id="repet01">
<a href="./memoire/images/sdf/repet00.png" target="_blank"><img src="./memoire/images/sdf/repet00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/repet01.png" target="_blank"><img src="./memoire/images/sdf/repet01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Répétition de domaine en <span class="math inline">\(X\)</span> // Répétition de domaine en <span class="math inline">\(X\)</span> et en <span class="math inline">\(Y\)</span></figcaption>
</figure>
<p>Il est possible d’améliorer la méthode en offrant la possibilité de
contrôler l’espacement entre les répétitions, correspondant à la période
de la fonction. Cette personnalisation s’effectue en ajustant l’échelle
du domaine avant de réinitialiser le système de coordonnées périodique,
et en corrigeant cette échelle par la suite.</p>
<div class="sourceCode" id="cb37" data-language="GLSL"
data-caption="Répétition de l&#39;espace avec espacement contrôlé"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">// repeter l&#39;espace tous les s unites</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">repeated</span><span class="op">(</span> <span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">float</span> s <span class="op">)</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> r <span class="op">=</span> p <span class="op">-</span> s<span class="op">*</span><span class="bu">round</span><span class="op">(</span>p<span class="op">/</span>s<span class="op">);</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="fu">sdf</span><span class="op">(</span>r<span class="op">);</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered"
id="répétition-de-domaine-avec-identifiant">Répétition de domaine avec
identifiant</h3>
<p>La nature ne présente que rarement des formes parfaitement
régulières, de sorte que rien ne se reproduit à l’identique ou à des
intervalles strictement égaux. Il est donc souhaitable que chaque
instance de nos SDF se distingue légèrement, voire radicalement, des
autres.</p>
<p>La première étape consiste à définir un mécanisme permettant
d’identifier chaque instance au sein de notre grille infinie et de lui
attribuer un identifiant unique. Cette tâche est facilitée par la
fonction <code>round()</code>, qui nous permet de positionner notre
système de coordonnées sur l’entier le plus proche du domaine. Ainsi,
cet entier devient un identifiant unique pour chaque instance de SDF.
Dans un espace 2D ou 3D, cet identifiant sera également en 2D ou 3D,
assurant ainsi un identifiant distinct par dimension. En 3D, la création
et l’utilisation de cet identifiant se ferait en modifiant le code
précédent comme suit :</p>
<div class="sourceCode" id="cb38" data-language="GLSL"
data-caption="Répétition de l&#39;espace avec identifiant"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">// repeter l&#39;espace tous les s unites</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">repeated</span><span class="op">(</span> <span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">float</span> s <span class="op">)</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> id <span class="op">=</span> <span class="bu">round</span><span class="op">(</span>p<span class="op">/</span>s<span class="op">);</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> r <span class="op">=</span> p <span class="op">-</span> s<span class="op">*</span>id<span class="op">;</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="fu">sdf</span><span class="op">(</span>r<span class="op">,</span> id<span class="op">);</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered" id="discontinuité">Discontinuité</h3>
<p>On peut exploiter cet identifiant pour moduler la taille de notre
SDF. Néanmoins, la méthode de répétition de domaine que nous avons
précédemment décrite présente une erreur, comme le montre l’image
ci-dessous (<a href="#repet03" data-reference-type="ref"
data-reference="repet03">[repet03]</a> et <a href="#repet04"
data-reference-type="ref" data-reference="repet04">5.28</a>). On observe
des discontinuités où les lignes de distance ne s’alignent pas
parfaitement. Une zone problématique est mise en évidence en jaune dans
la version agrandie de cette image. Ces discontinuités sont révélatrices
d’une SDF incorrectement définie.</p>
<figure id="repet04">
<a href="./memoire/images/sdf/repet03.png" target="_blank"><img src="./memoire/images/sdf/repet03.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/sdf/repet04.png" target="_blank"><img src="./memoire/images/sdf/repet04.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Discontinuité dans les lignes de distance</figcaption>
</figure>
<p>Le problème provient de l’usage de la fonction <code>round()</code>
dans la fonction <code>repeated()</code>, qui assigne chaque point à une
cellule spécifique de la grille, ne connaissant ainsi qu’une seule
instance de <code>sdf(p)</code>. Bien que cela soit efficace, cela
échoue si l’instance la plus proche n’est pas dans la même cellule que
<code>p</code>. Cette situation peut se produire si une cellule voisine
contient une instance significativement plus grande, rendant l’instance
la plus proche celle de cette cellule voisine.</p>
<p>Ce problème de distances incorrectes se produit en général lorsqu’on
effectue une opération qui casse la symétrie le long des frontières des
cellules (comme la rotation ou la mise à l’échelle).</p>
<h3 class="unnumbered" id="résoudre-le-problème">Résoudre le
problème</h3>
<p>Lorsque nous évaluons notre SDF au point <code>p</code> avec notre
fonction <code>repeated(sdf(p))</code>, il ne suffit pas de se limiter à
l’instance centrale de la cellule actuelle. En effet, la forme la plus
proche pourrait se situer dans une cellule adjacente. Ainsi, nous devons
vérifier les cellules voisines, évaluer <code>sdf(p)</code> et
déterminer la distance la plus courte parmi elles. Bien que cela puisse
paraître comme un nombre d’évaluations supplémentaires conséquentes de
<code>sdf(p)</code> (notre boîte arrondie ici), nous pouvons optimiser
cette approche. Il nous faut explorer uniquement les cellules voisines
susceptibles de contenir une instance plus proche que celle du point
actuel. Ces cellules se limitent aux côtés les plus proches de notre
point d’échantillonnage <code>p</code>. Ainsi, en 2D, au lieu de
vérifier les <span class="math inline">\(9\)</span> cellules attendues
(la cellule actuelle et ses <span class="math inline">\(8\)</span>
voisines), nous en examinons seulement <span
class="math inline">\(4\)</span> (la cellule actuelle et <span
class="math inline">\(3\)</span> voisines). En 1D, nous échantillonnons
<span class="math inline">\(2\)</span> cellules (actuelle et une
voisine) au lieu de <span class="math inline">\(3\)</span>, et en 3D, ce
sont <span class="math inline">\(8\)</span> cellules (actuelle et <span
class="math inline">\(7\)</span> voisines) au lieu de <span
class="math inline">\(27\)</span>.</p>
<div class="sourceCode" id="cb39" data-language="GLSL"
data-caption="Résoudre le problème" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">repeated</span><span class="op">(</span> <span class="dt">vec2</span> p<span class="op">,</span> <span class="dt">float</span> s <span class="op">)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> id <span class="op">=</span> <span class="bu">round</span><span class="op">(</span>p<span class="op">/</span>s<span class="op">);</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span>  o <span class="op">=</span> <span class="bu">sign</span><span class="op">(</span>p<span class="op">-</span>s<span class="op">*</span>id<span class="op">);</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> d <span class="op">=</span> <span class="fl">1e20</span><span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span><span class="op">(</span> <span class="dt">int</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span> j<span class="op">&lt;</span><span class="dv">2</span><span class="op">;</span> j<span class="op">++</span> <span class="op">)</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span><span class="op">(</span> <span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">2</span><span class="op">;</span> i<span class="op">++</span> <span class="op">)</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">vec2</span> rid <span class="op">=</span> id <span class="op">+</span> <span class="dt">vec2</span><span class="op">(</span>i<span class="op">,</span>j<span class="op">)*</span>o<span class="op">;</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">vec2</span> r <span class="op">=</span> p <span class="op">-</span> s<span class="op">*</span>rid<span class="op">;</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="bu">min</span><span class="op">(</span> d<span class="op">,</span> <span class="fu">sdf</span><span class="op">(</span>r<span class="op">)</span> <span class="op">);</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> d<span class="op">;</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Ici, la fonction <code>sign()</code> se charge de déterminer si le
voisin gauche ou droit doit être vérifié pour la proximité de forme (ou
haut contre face avant et haut contre bas). La SDF ainsi calculée est
correcte (voir <a href="#repet05" data-reference-type="ref"
data-reference="repet05">[repet05]</a>).</p>
<figure id="shadat05">
<a href="./memoire/images/sdf/repet05.png" target="_blank"><img src="./memoire/images/sdf/repet05.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shaderatelier_05.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_05.jpg" alt="Image 1" class="side-by-side2"/></a>
<figcaption>Répétition de l’espace</figcaption>
</figure>
<p>Nous observons également (<a href="#shadat05"
data-reference-type="ref" data-reference="shadat05">5.29</a>) que la
répétition de domaine peut être étendue aux coordonnées polaires plutôt
qu’aux coordonnées cartésiennes. Les coordonnées polaires constitueront
le sujet de notre prochaine section.</p>
<h1 id="la-pratique-du-livecoding-techniques-avancées">La pratique du
<em>livecoding</em> : techniques avancées</h1>
<div class="epigraph">
<p><em>Alt paa sin rette Plads!</em></p>
<p><em>Hans Christian Andersen</em></p>
</div>
<p>Une explication s’avère nécessaire quant au choix délibéré de
l’épigraphe située ci-dessus. <em>Alt paa sin rette Plads!</em> est à la
fois le titre d’un conte d’Andersen et une expression danoise qui se
traduit littéralement par « Tout à sa place correcte ! ». C’est un clin
d’œil à Andersen, célèbre pour ses contes adaptés en films d’animation
par Disney, bien que ces adaptations soient souvent très éloignées de
ses œuvres originales qui nous ont marqués, comme « La Petite Sirène »
ou « La Reine des Neiges ». Mais au-delà de cet hommage, c’est aussi une
manière pour moi de mettre en lumière le fait que l’écriture d’un
<em>shader</em> requiert un haut degré d’organisation, de logique, et ne
se base pas uniquement sur l’intuition. Avant l’art, il y a la
technique.</p>
<h2 id="coordonnées-polaires">Coordonnées polaires</h2>
<p>Le passage aux coordonnées polaires revêt une importance
particulière. En effet, il est courant d’utiliser les coordonnées
polaires pour passer d’un système de référence cartésien, tel qu’une
grille rectangulaire, à un système de référence circulaire, mieux adapté
à certaines formes comme les images <a href="#meduse_05_01"
data-reference-type="ref" data-reference="meduse_05_01">6.1</a> où l’on
voit que le rayon de la sphère est sculpté à intervalles réguliers sur
le plan <span class="math inline">\(XZ\)</span>.</p>
<figure id="meduse_05_01">
<a href="./memoire/images/meduse/meduse_04.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_04.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/meduse/meduse_05_01.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_05_01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Rayon dépendant des coordonnées polaires</figcaption>
</figure>
<figure id="coord_polar">
<a href="./memoire/images/shaders/coord_polar.png" target="_blank"><img src="./memoire/images/shaders/coord_polar.png" style="width:90.0%" /></a>
<figcaption>Géométrie des coordonnées polaires</figcaption>
</figure>
<p>Jusqu’à présent, nous avons travaillé avec les coordonnées
cartésiennes<a href="#fn56" class="footnote-ref" id="fnref56"
role="doc-noteref"><sup>56</sup></a>, où le centre de l’écran
correspondait à l’origine. À partir de ce système cartésien, nous
pouvons calculer les coordonnées polaires, permettant ainsi une
représentation de l’espace sous une forme circulaire. Alors que dans
l’espace cartésien 2D le <em>pixel</em> est décrit par ses coordonnées
<span class="math inline">\(X\)</span> et <span
class="math inline">\(Y\)</span>, dans le système de coordonnées
polaires, chaque <em>pixel</em> est défini par son angle <span
class="math inline">\(\theta\)</span> et sa distance <span
class="math inline">\(r\)</span> par rapport à l’origine. Dans le schéma
(<a href="#coord_polar" data-reference-type="ref"
data-reference="coord_polar">6.2</a>) le <em>pixel</em> n’est plus
défini en termes de <span class="math inline">\(X\)</span> et <span
class="math inline">\(Y\)</span> mais termes de <span
class="math inline">\(r\)</span> et de l’angle <span
class="math inline">\(\theta\)</span>.</p>
<p>En code nous utilisons la fonction trigonométrique
<code>atan(uv.y,uv.x)</code> pour obtenir l’angle et à la fonction
<code>length(uv)</code> pour obtenir le rayon. Nous pouvons ensuite
stocker le résultat dans un vecteur <code>vec2</code> (voir <a
href="#polarX" data-reference-type="ref"
data-reference="polarX">[polarX]</a> et <a href="#polarY"
data-reference-type="ref" data-reference="polarY">6.3</a>). Les images
<a href="#polarX" data-reference-type="ref"
data-reference="polarX">[polarX]</a> et <a href="#polarY"
data-reference-type="ref" data-reference="polarY">6.3</a> représentent
respectivement l’angle des coordonnées uv et la distance des
<em>pixels</em> par rapport au centre.</p>
<div class="sourceCode" id="cb40" data-language="GLSL"
data-caption="Calculer les coordonnées polaires" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> pixel_angle <span class="op">=</span> <span class="bu">atan</span><span class="op">(</span>uv<span class="op">.</span><span class="fu">x</span><span class="op">,</span>uv<span class="op">.</span><span class="fu">y</span><span class="op">)</span> <span class="op">;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> pixel_distance <span class="op">=</span>  <span class="bu">length</span><span class="op">(</span>uv<span class="op">)*</span> <span class="fl">2.0</span> <span class="op">;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> st <span class="op">=</span> <span class="dt">vec2</span><span class="op">(</span>pixel_angle <span class="op">,</span> pixel_distance<span class="op">);</span></span></code></pre></div>
<figure id="polarY">
<a href="./memoire/images/polarX.JPG" target="_blank"><img src="./memoire/images/polarX.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/polarY.JPG" target="_blank"><img src="./memoire/images/polarY.JPG" alt="Image 2" class="side-by-side2" /></a>
<figcaption>Contenu de la variable <code>st.x</code> // Contenu de la variable <code>st.y</code></figcaption>
</figure>
<p>Cependant, la représentation de l’angle n’est pas correcte car la
fonction <code>atan()</code> renvoie l’angle en radians compris entre
<span class="math inline">\(0\)</span> et <span
class="math inline">\(2\pi\)</span>. Pour corriger cela, il est
nécessaire de remapper<a href="#fn57" class="footnote-ref" id="fnref57"
role="doc-noteref"><sup>57</sup></a> ces valeurs dans l’intervalle de
<span class="math inline">\(0\)</span> à <span
class="math inline">\(1\)</span> en divisant le résultat par <span
class="math inline">\(2\pi\)</span> (voir <a href="#polar00"
data-reference-type="ref" data-reference="polar00">[polar00]</a>).
Cependant, même après ce remappage, la moitié gauche de l’écran reste
complètement noire en raison des valeurs négatives. Pour résoudre ce
problème, nous ajoutons <span class="math inline">\(0.5\)</span> au
résultat pour obtenir un dégradé complet (voir <a href="#polar01"
data-reference-type="ref" data-reference="polar01">6.4</a>).</p>
<div class="sourceCode" id="cb41" data-language="GLSL"
data-caption="Remap de l&#39;angle" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>st<span class="op">.</span><span class="fu">x</span> <span class="op">/</span> PI_2 <span class="op">+</span> <span class="fl">0.5</span> <span class="op">);</span></span></code></pre></div>
<figure id="polar01">
<a href="./memoire/images/polar00.JPG" target="_blank"><img src="./memoire/images/polar00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/polar01.JPG" target="_blank"><img src="./memoire/images/polar01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Après avoir divisé par <span class="math inline">\(2\pi\)</span> // Après avoir ajouté <span class="math inline">\(0.5\)</span></figcaption>
</figure>
<p>Lorsque nous assignons une texture dans ces coordonnées polaires,
nous obtenons effectivement une représentation circulaire (voir <a
href="#polar02" data-reference-type="ref"
data-reference="polar02">[polar02]</a>).</p>
<figure id="tent01">
<a href="./memoire/images/polar02.JPG" target="_blank"><img src="./memoire/images/polar02.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/meduse/meduse_06_1.JPG" target="_blank"><img src="./memoire/images/meduse/meduse_06_1.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Texture en coordonnées polaires // Tentacules grâce aux coordonnées polaires</figcaption>
</figure>
<p>En combinaison avec la répétition de l’espace on pourrait aussi
sectoriser l’espace des coordonnées polaires, afin par exemple de
pouvoir créer tentacules ou tout autre objet à intervalles réguliers
(voir <a href="#tent01" data-reference-type="ref"
data-reference="tent01">6.5</a>).</p>
<h2
id="post-traitement-application-dune-texture-sur-un-objet">Post-traitement
: application d’une texture sur un objet</h2>
<p>Les effets de post-traitement<a href="#fn58" class="footnote-ref"
id="fnref58" role="doc-noteref"><sup>58</sup></a> (<em>post-process</em>
en anglais), tels que le flou<a href="#fn59" class="footnote-ref"
id="fnref59" role="doc-noteref"><sup>59</sup></a> ou l’aberration
chromatique<a href="#fn60" class="footnote-ref" id="fnref60"
role="doc-noteref"><sup>60</sup></a>, sont finalement relativement
simples à implémenter dans le <em>fragment shader</em> (voir <a
href="#blur00" data-reference-type="ref"
data-reference="blur00">[blur00]</a> et <a href="#chr_ab00"
data-reference-type="ref" data-reference="chr_ab00">6.6</a> ).</p>
<figure id="chr_ab00">
<a href="./memoire/images/post_process/blur00.JPG" target="_blank"><img src="./memoire/images/post_process/blur00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/post_process/chr_ab00.JPG" target="_blank"><img src="./memoire/images/post_process/chr_ab00.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Flou // Aberration chromatique</figcaption>
</figure>
<p>En OpenGL, la texture d’origine serait gérée dans un <em>frame
buffer</em><a href="#fn61" class="footnote-ref" id="fnref61"
role="doc-noteref"><sup>61</sup></a> plutôt compliqué à manipuler.
Cependant, dans des environnements de développement tels que Shadertoy
ou KodeLife la démarche est plus aisée car il suffit de créer des passes
successives (voir <a href="#shadertoy00" data-reference-type="ref"
data-reference="shadertoy00">[shadertoy00]</a> et <a href="#kodelife000"
data-reference-type="ref" data-reference="kodelife000">6.7</a>).</p>
<p>En pratique, il suffit d’appliquer un <em>shader</em> d’effet sur un
<em>shader</em> d’origine (voir <a href="#mapuv01"
data-reference-type="ref" data-reference="mapuv01">[mapuv01]</a> et <a
href="#mapuv00" data-reference-type="ref"
data-reference="mapuv00">6.8</a>), qui sera interprété comme une
texture. Dans l’image <a href="#mapuv00" data-reference-type="ref"
data-reference="mapuv00">6.8</a>, nous avons appliqué un <em>shader</em>
en tant que texture sur une télévision.</p>
<p>Il est à noter que le <em>shader</em> d’origine utilise les
L-systèmes<a href="#fn62" class="footnote-ref" id="fnref62"
role="doc-noteref"><sup>62</sup></a>, également connus sous le nom de
systèmes de Lindenmayer, pour représenter l’arbre.</p>
<figure id="kodelife000">
<a href="./memoire/images/shaders/shadertoy00.png" target="_blank"><img src="./memoire/images/shaders/shadertoy00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/kodelife00.png" target="_blank"><img src="./memoire/images/shaders/kodelife00.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Post-process</em> dans Shadertoy // <em>Post-process</em> dans KodeLife</figcaption>
</figure>
<figure id="mapuv00">
<a href="./memoire/images/shaders/mapuv01.png" target="_blank"><img src="./memoire/images/shaders/mapuv01.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/mapuv00.png" target="_blank"><img src="./memoire/images/shaders/mapuv00.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Mappage d’une texture sur un cube qui tourne</figcaption>
</figure>
<p>Grâce à la technique du <em>ray marching</em>, nous créons la scène
constituée d’un cube qui tourne pour représenter une télévision et d’un
cube vu de l’intérieur qui représente la pièce. Lorsque le rayon touche
la pièce, nous appliquons un éclairage classique. En revanche, lorsque
nous touchons le téléviseur, nous voulons appliquer la texture. La
difficulté rencontrée réside donc dans la récupération des bonnes
valeurs de coordonnées de l’espace sur lequel nous allons appliquer la
texture. La principale difficulté en termes de code est de bien penser à
sauvegarder l’espace de la SDF qui tourne dans une variable globale.</p>
<div class="sourceCode" id="cb42" data-language="GLSL"
data-caption="Sauvegarde de l&#39;espace dans une variable globale"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">// variable globale pour sauvegarder </span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">// l espace de la tv qui tourne pour mapper la texture plus tard</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> ptv<span class="op">;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">// la description de la scene refactorisee, renvoie la distance + un id</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> <span class="fu">map</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">)</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">(...)</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// on sauvegarde un espace dedie pour le cube qui tourne</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> p2 <span class="op">=</span> p<span class="op">;</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// on le translate en Y</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">-=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.</span><span class="op">,-</span><span class="fl">1.5</span><span class="op">+</span><span class="bu">sin</span><span class="op">(</span>iTime<span class="op">),</span><span class="fl">5.</span><span class="op">);</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// on le rot sur Y</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    p2<span class="op">.</span><span class="fu">xz</span> <span class="op">*=</span> <span class="fu">r2d</span><span class="op">(</span>iTime<span class="op">);</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// important: on sauvegarde l espace dans la variable globale en vue</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// de dessiner la texture</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    ptv <span class="op">=</span> p2<span class="op">;</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// une variable pour controler l effet bombe de la tv</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> thick <span class="op">=</span> <span class="bu">mix</span><span class="op">(.</span><span class="fu">4</span><span class="op">,.</span><span class="fu">2</span><span class="op">,</span><span class="bu">sin</span><span class="op">(</span>p2<span class="op">.</span><span class="fu">y</span><span class="op">*</span><span class="fl">2.</span><span class="op">-</span><span class="fl">1.57</span><span class="op">)*.</span><span class="fu">5</span><span class="fl">+.5</span><span class="op">);</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> tv <span class="op">=</span> <span class="fu">_cube</span><span class="op">(</span>p2<span class="op">,</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">1.</span><span class="op">,</span><span class="fl">0.7</span><span class="op">,</span>thick<span class="op">)*</span><span class="fl">2.</span><span class="op">);</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">//room = min(room, length(p2)-1.);  </span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// on l&#39;ajoute</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>    acc <span class="op">=</span> <span class="fu">_min</span><span class="op">(</span>acc<span class="op">,</span> <span class="dt">vec2</span><span class="op">(</span>tv<span class="op">,</span> <span class="fl">1.</span><span class="op">));</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> acc<span class="op">;</span></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>De cette manière, nous pouvons réutiliser cet espace au moment du
rendu du téléviseur. En discriminant les objets, nous pouvons déterminer
quand nous faisons référence au téléviseur. En ajoutant une condition
sur la profondeur, nous sommes en mesure de projeter la texture
uniquement sur la face avant de l’objet.</p>
<div class="sourceCode" id="cb43" data-language="GLSL"
data-caption="Mapper des textures" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">// dans la fonction de  \textit{ray marching}</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>res<span class="op">.</span><span class="fu">y</span> <span class="op">==</span> <span class="fl">1.</span> <span class="op">&amp;&amp;</span> ptv<span class="op">.</span><span class="fu">z</span> <span class="op">&lt;</span> <span class="fl">0.</span><span class="op">)</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// on projette la texture sur XY</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// bien penser a equilibrer les valeurs</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    col <span class="op">=</span> <span class="bu">texture</span><span class="op">(</span>iChannel0<span class="op">,</span> ptv<span class="op">.</span><span class="fu">xy</span><span class="op">*</span><span class="dt">vec2</span><span class="op">(</span><span class="fl">1.</span><span class="op">,</span><span class="fl">2.</span><span class="op">)*.</span><span class="fu">25</span><span class="fl">+.5</span><span class="op">+</span><span class="dt">vec2</span><span class="op">(</span><span class="fl">0.</span><span class="op">,.</span><span class="fu">5</span><span class="op">)).</span><span class="fu">xyz</span><span class="op">;</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="le-bruit">Le bruit</h2>
<h3 class="unnumbered" id="introduction-5">Introduction</h3>
<p>Dans le domaine des images de synthèse, un défi récurrent est
l’apparence souvent trop lisse et parfaite de ces rendus. Dans la
nature, les objets présentent des aspérités, des irrégularités et
diverses imperfections.</p>
<p>La problématique centrale réside dans la recherche de méthodes pour
intégrer cette complexité naturelle dans les images générées. Bien qu’il
soit tentant de capturer des images réelles pour simuler un aspect plus
naturel, une approche alternative consiste à recourir aux mathématiques
pour générer des motifs qui, bien que déterministes, donnent l’illusion
de l’aléatoire. En ajustant judicieusement les paramètres, on peut
obtenir des résultats qui semblent naturellement aléatoires, ouvrant
ainsi des perspectives intéressantes pour améliorer nos
<em>shaders</em>.</p>
<figure>
<div class="center">
<a href="./memoire/images/shaders/shaderatelier_13.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_13.jpg" style="width:90.0%" /></a>
</div>
<figcaption>Un terrain dont le relief dépend du bruit</figcaption>
</figure>
<h3 class="unnumbered" id="random-en-code"><em>Random</em> en code</h3>
<h4 class="unnumbered" id="random-unidimensionnel"><em>Random</em>
unidimensionnel</h4>
<p>Pour obtenir une génération pseudo-aléatoire mathématique, nous
établissons une fonction qui prend un nombre en entrée et retourne un
résultat aléatoire compris entre <span class="math inline">\(0\)</span>
et <span class="math inline">\(1\)</span>. Dans notre approche initiale,
la coordonnée <code>uv.x</code> est utilisée comme référence pour ce
calcul.</p>
<p>Ce nombre est ensuite intégré dans une fonction sinusoïdale, le
positionnant ainsi sur cette courbe. Pour augmenter la complexité de
notre fonction, nous multiplions ce nombre par un facteur important,
intensifiant la fréquence de l’onde sinusoïdale.</p>
<p>Étant donné que l’onde sinusoïdale a une amplitude oscillant entre
<span class="math inline">\(-1\)</span> et <span
class="math inline">\(1\)</span>, nous ajustons notre résultat en le
multipliant par un coefficient. Cela élargit la plage d’amplitude,
faisant varier les valeurs entre des niveaux bien plus élevés et plus
bas. Enfin, nous utilisons la fonction <code>fract()</code> pour
extraire la partie fractionnaire de ce résultat.</p>
<div class="sourceCode" id="cb44" data-language="GLSL"
data-caption="Random unidimensionnel" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> c <span class="op">=</span> <span class="bu">fract</span><span class="op">(</span><span class="bu">sin</span><span class="op">(</span>uv<span class="op">.</span><span class="fu">x</span><span class="op">*</span><span class="fl">100.</span><span class="op">)*</span><span class="fl">5647.</span><span class="op">);</span></span></code></pre></div>
<p>Le rendu final présente un schéma similaire à un code-barres, où
chaque colonne de <em>pixels</em> affiche des nuances de couleurs
variées, oscillant entre le noir et le blanc (voir <a href="#noise00"
data-reference-type="ref" data-reference="noise00">[noise00]</a> et <a
href="#noise01" data-reference-type="ref"
data-reference="noise01">6.9</a>).</p>
<figure id="noise01">
<a href="./memoire/images/noise/noise00.JPG" target="_blank"><img src="./memoire/images/noise/noise00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise01.JPG" target="_blank"><img src="./memoire/images/noise/noise01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Random unidimensionnel sur <span class="math inline">\(X\)</span> // Random unidimensionnel sur <span class="math inline">\(Y\)</span></figcaption>
</figure>
<h4 class="unnumbered" id="random-bidimensionnel"><em>Random</em>
bidimensionnel</h4>
<p>Le prochain objectif est de produire une représentation
bidimensionnelle du bruit aléatoire, similaire au grain présent sur les
anciennes télévisions cathodiques. Pour parvenir à cela, nous incluons
la composante <code>uv.y</code> dans notre calcul de génération
pseudo-aléatoire, en utilisant une fréquence significativement
supérieure à celle de la composante <code>uv.x</code> (voir <a
href="#noise02" data-reference-type="ref"
data-reference="noise02">[noise02]</a>).</p>
<p>Il est possible de varier ces paramètres pour obtenir diverses sortes
de motifs (<em>patterns</em><a href="#fn63" class="footnote-ref"
id="fnref63" role="doc-noteref"><sup>63</sup></a> en anglais). Il est à
noter que les résultats peuvent légèrement varier selon la carte
graphique utilisée.</p>
<p>Il est possible de regrouper ces calculs au sein d’une fonction, non
seulement pour améliorer la lisibilité du code, mais également pour
faciliter sa réutilisation. Nous nommons cette fonction
<code>N21()</code> car elle accepte une coordonnée 2D en entrée et
produit un nombre flottant aléatoire dans l’intervalle <span
class="math inline">\([0, 1]\)</span>.</p>
<div class="sourceCode" id="cb45" data-language="GLSL"
data-caption="Random bidimensionnel" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">N21</span><span class="op">(</span><span class="dt">vec2</span> p<span class="op">)</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">fract</span><span class="op">(</span><span class="bu">sin</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">*</span><span class="fl">100.</span><span class="op">+</span> p<span class="op">.</span><span class="fu">y</span><span class="op">*</span><span class="fl">546.</span><span class="op">)*</span><span class="fl">5647.</span><span class="op">);</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<figure id="noise03">
<a href="./memoire/images/noise/noise02.JPG" target="_blank"><img src="./memoire/images/noise/noise02.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise03.JPG" target="_blank"><img src="./memoire/images/noise/noise03.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Apparition de motifs</figcaption>
</figure>
<p>L’inconvénient majeur de cette approche, est que lorsque nous zoomons
sur les uv, on distingue un motif qui montre que ce n’est pas de
l’aléatoire mais du pseudo-aléatoire (voir <a href="#noise03"
data-reference-type="ref" data-reference="noise03">6.10</a>).</p>
<h3 class="unnumbered" id="value-noise">Value <em>noise</em></h3>
<p>Une autre méthode pour générer de l’aléatoire consiste à utiliser
l’interpolation. Nous commençons par établir une grille de cellules en
appliquant la fonction <code>fract()</code> à des coordonnées uv
multipliées. Chaque cellule est définie par des coordonnées variant dans
l’intervalle <span class="math inline">\([0,1]\)</span> tant en <span
class="math inline">\(X\)</span> qu’en <span
class="math inline">\(Y\)</span>. Il nous faut également un identifiant
pour déterminer dans quelle cellule nous nous trouvons. La fonction
<code>floor()</code> nous permet d’obtenir la partie entière d’un
nombre. Les fonctions <code>fract()</code> et <code>floor()</code> sont
complémentaires. Par exemple, <code>fract(1.53)</code> retourne <span
class="math inline">\(0.53\)</span>, tandis que <code>floor(1.53)</code>
retourne <span class="math inline">\(1\)</span> (voir <a href="#noise04"
data-reference-type="ref" data-reference="noise04">[noise04]</a> et <a
href="#noise05" data-reference-type="ref"
data-reference="noise05">6.11</a>).</p>
<figure id="noise05">
<a href="./memoire/images/noise/noise04.JPG" target="_blank"><img src="./memoire/images/noise/noise04.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise05.JPG" target="_blank"><img src="./memoire/images/noise/noise05.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>La fonction <code>fract()</code> // La fonction <code>floor()</code></figcaption>
</figure>
<div class="sourceCode" id="cb46" data-language="GLSL"
data-caption="Les fonctions \lstinline{fract()} et \lstinline{floor()}"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>uv<span class="op">*=</span><span class="fl">10.</span><span class="op">;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> lv <span class="op">=</span> <span class="bu">fract</span><span class="op">(</span>uv<span class="op">);</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> id <span class="op">=</span> <span class="bu">floor</span><span class="op">(</span>uv<span class="op">);</span></span></code></pre></div>
<p>Pour chaque coin de ces cellules, nous appliquons notre fonction de
bruit, générant ainsi une valeur aléatoire pour chaque coin. Puis nous
interpolons les valeurs en trois étapes. D’abord entre les coins
inférieurs et les coins supérieurs sur l’axe horizontal, et enfin avec
une interpolation entre ces résultats sur l’axe vertical.</p>
<div class="sourceCode" id="cb47" data-language="GLSL"
data-caption="Interpolation pour chaque cellule" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> bl <span class="op">=</span> <span class="fu">N21</span><span class="op">(</span>id<span class="op">);</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> br <span class="op">=</span> <span class="fu">N21</span><span class="op">(</span>id<span class="op">+</span><span class="dt">vec2</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">0</span><span class="op">));</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">// interpolation entre les coins bas gauche et bas droite selon X</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> b <span class="op">=</span> <span class="bu">mix</span><span class="op">(</span>bl<span class="op">,</span>br<span class="op">,</span>lv<span class="op">.</span><span class="fu">x</span><span class="op">);</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> ul <span class="op">=</span> <span class="fu">N21</span><span class="op">(</span>id<span class="op">+</span><span class="dt">vec2</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="op">));</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> ur <span class="op">=</span> <span class="fu">N21</span><span class="op">(</span>id<span class="op">+</span><span class="dt">vec2</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">));</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co">// interpolation entre les coins haut gauche et haut droite selon X</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> u <span class="op">=</span> <span class="bu">mix</span><span class="op">(</span>ul<span class="op">,</span>ur<span class="op">,</span>lv<span class="op">.</span><span class="fu">x</span><span class="op">);</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co">// interpolation des valeur calculees selon Y</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> c <span class="op">=</span> <span class="bu">mix</span><span class="op">(</span>b<span class="op">,</span>u<span class="op">,</span>lv<span class="op">.</span><span class="fu">y</span><span class="op">);</span></span></code></pre></div>
<figure id="noise07">
<a href="./memoire/images/noise/noise06.JPG" target="_blank"><img src="./memoire/images/noise/noise06.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise07.JPG" target="_blank"><img src="./memoire/images/noise/noise07.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Adoucissement du <em>noise</em></figcaption>
</figure>
<p>Le rendu obtenu est plus doux que celui précédemment obtenu.
Cependant, un inconvénient est que les frontières entre nos cellules
sont visibles, créant ainsi des halos en forme de croix, comme illustré
dans l’image <a href="#noise06" data-reference-type="ref"
data-reference="noise06">[noise06]</a>. Ce phénomène est dû à la nature
linéaire de notre interpolation. En effet, sur notre grille
<code>lv</code>, les valeurs progressent de manière linéaire de <span
class="math inline">\(0\)</span> à <span
class="math inline">\(1\)</span>. Grâce à la fonction
<code>smoothstep()</code>, nous avons la possibilité d’atténuer cette
linéarité, permettant à l’évolution des valeurs de suivre une
trajectoire en « S » plutôt qu’une ligne droite. Le résultat est visible
dans l’image <a href="#noise07" data-reference-type="ref"
data-reference="noise07">6.12</a>.</p>
<div class="sourceCode" id="cb48" data-language="GLSL"
data-caption="\lstinline{smoothstep()} pour adoucir le bruit"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec2</span> lv <span class="op">=</span> <span class="bu">smoothstep</span><span class="op">(</span><span class="fl">0.</span><span class="op">,</span><span class="fl">1.</span><span class="op">,</span><span class="bu">fract</span><span class="op">(</span>uv<span class="op">));</span></span></code></pre></div>
<h3 class="unnumbered" id="perlin-noise">Perlin <em>noise</em></h3>
<p>Le bruit de Perlin<a href="#fn64" class="footnote-ref" id="fnref64"
role="doc-noteref"><sup>64</sup></a>, bien qu’étroitement lié au
<em>value noise</em>, produit généralement des résultats de meilleure
qualité. Une méthode alternative pour son calcul consiste à évaluer la
colinéarité entre un vecteur aléatoire et le vecteur s’étendant du coin
de chaque cellule vers son centre (voir <a href="#noise12"
data-reference-type="ref" data-reference="noise12">[noise12]</a> et <a
href="#noise13" data-reference-type="ref"
data-reference="noise13">6.13</a>).</p>
<figure id="noise13">
<a href="./memoire/images/noise/noise12.JPG" target="_blank"><img src="./memoire/images/noise/noise12.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise13.JPG" target="_blank"><img src="./memoire/images/noise/noise13.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Degré de colinéarité avec le vecteur dirigé vers le centre
de chaque cellule</figcaption>
</figure>
<h3 class="unnumbered" id="billow-noise"><em>Billow noise</em></h3>
<p>Le <em>Billow noise</em> est une variante du bruit de Perlin qui
produit une apparence de nuage ou de fumée. Il est caractérisé par des
transitions douces et des formes arrondies, donnant un aspect ondulé ou
nuageux. Contrairement au bruit standard qui varie linéairement entre
<span class="math inline">\(-1\)</span> et <span
class="math inline">\(1\)</span>, le <em>Billow noise</em> utilise des
valeurs absolues des contributions du bruit, créant des formes plus
arrondies et douces (voir <a href="#noise10" data-reference-type="ref"
data-reference="noise10">[noise10]</a>).</p>
<div class="sourceCode" id="cb49" data-language="GLSL"
data-caption="\textit{Billow noise}" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">// billow</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> billow <span class="op">=</span> <span class="bu">abs</span><span class="op">(</span>perlin<span class="op">);</span></span></code></pre></div>
<figure id="noise11">
<a href="./memoire/images/noise/noise10billow.JPG" target="_blank"><img src="./memoire/images/noise/noise10billow.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise11ridged.JPG" target="_blank"><img src="./memoire/images/noise/noise11ridged.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Billow</em> <em>Noise</em> // <em>Ridge</em> <em>Noise</em></figcaption>
</figure>
<h3 class="unnumbered" id="ridge-noise"><em>Ridge noise</em></h3>
<p>Le <em>Ridge noise</em> est une autre variante du bruit de Perlin qui
produit des crêtes ou des formations montagneuses. Il est similaire au
<em>Billow noise</em>, mais utilise des valeurs négatives pour certaines
composantes du bruit, créant des formes pointues ou en crêtes. Cette
caractéristique lui permet de générer des terrains avec des sommets
pointus et des vallées profondes, donnant un aspect plus accidenté ou
montagneux (voir <a href="#noise11" data-reference-type="ref"
data-reference="noise11">6.14</a>).</p>
<div class="sourceCode" id="cb50" data-language="GLSL"
data-caption="\textit{Ridge noise}" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> ridged <span class="op">=</span> <span class="fl">1.0</span><span class="op">-</span> <span class="bu">abs</span><span class="op">(</span>perlin<span class="op">);</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>ridged <span class="op">=</span> ridged<span class="op">*</span>ridged<span class="op">;</span></span></code></pre></div>
<h3 class="unnumbered" id="voronoi-worley">Voronoi / Worley</h3>
<p>Diverses fonctions de bruit génèrent des effets différents. Nous
avons abordé le <em>value noise</em>, une forme de bruit doux couramment
utilisée pour élaborer des terrains procéduraux infinis, à l’image de
ceux de Minecraft ou No Man’s Sky.</p>
<p>Le Voronoi est particulièrement adapté pour créer des motifs
organiques rappelant des structures naturelles comme les ailes de
libellule, les nervures de feuilles ou encore les taches de la peau des
girafes. Il constitue également une base solide pour simuler des nuages
réalistes. Ainsi, le bruit de Voronoi peut représenter une technique à
inclure dans une boîte à outils dédiée à la conception de
<em>shaders</em>.</p>
<figure id="noise15">
<a href="./memoire/images/noise/noise14.JPG" target="_blank"><img src="./memoire/images/noise/noise14.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise15.JPG" target="_blank"><img src="./memoire/images/noise/noise15.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Voronoi</figcaption>
</figure>
<p>La mise en place du Voronoi débute par la création d’une grille de
cellules, exactement comme pour le <em>value noise</em> (voir <a
href="#noise04" data-reference-type="ref"
data-reference="noise04">[noise04]</a>). Chaque cellule de cette grille
peut inclure un point central (voir <a href="#noise16"
data-reference-type="ref" data-reference="noise16">[noise16]</a>). Par
la suite, une itération est effectuée sur chaque <em>pixel</em> afin de
calculer la distance minimale vers le point le plus proche (voir <a
href="#noise17" data-reference-type="ref"
data-reference="noise17">6.16</a>).</p>
<figure id="noise17">
<a href="./memoire/images/noise/noise16.JPG" target="_blank"><img src="./memoire/images/noise/noise16.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise17.JPG" target="_blank"><img src="./memoire/images/noise/noise17.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Voronoi: affichage des distances</figcaption>
</figure>
<p>Visuellement, il est manifeste que chaque <em>pixel</em> identifie
son point le plus proche à l’intérieur de sa cellule respective. Une
représentation graphique de cette distance produit une distribution
uniforme des résultats.</p>
<p>Pour apporter une touche plus organique à cette démarche, des
décalages peuvent être ajoutés aux points de la grille grâce à l’ajout
de bruit. Il est à noter que cette incorporation de bruit entraîne une
augmentation du nombre de vérifications dans l’algorithme. Ainsi, chaque
<em>pixel</em> doit déterminer le point le plus proche au sein de sa
cellule actuelle et dans les huit cellules adjacentes.</p>
<div class="sourceCode" id="cb51" data-language="GLSL"
data-caption="Voronoi" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> minDistFromPixel<span class="op">;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="op">(</span><span class="dt">float</span> i <span class="op">=</span> <span class="op">-</span><span class="fl">1.0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="fl">1.0</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="op">(</span><span class="dt">float</span> j <span class="op">=</span> <span class="op">-</span><span class="fl">1.0</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="fl">1.0</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">vec2</span> adjGridCoords <span class="op">=</span> <span class="dt">vec2</span><span class="op">(</span>i<span class="op">,</span> j<span class="op">);</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">vec2</span> pointOnAdjGrid <span class="op">=</span> adjGridCoords<span class="op">;</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">vec2</span> <span class="bu">noise</span> <span class="op">=</span> <span class="fu">noise2x2</span><span class="op">(</span>currentGridId <span class="op">+</span> adjGridCoords<span class="op">);</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>      pointOnAdjGrid <span class="op">=</span> adjGridCoords <span class="op">+</span> <span class="bu">sin</span><span class="op">(</span>iTime <span class="op">*</span> <span class="bu">noise</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">float</span> dist <span class="op">=</span> <span class="bu">length</span><span class="op">(</span>currentGridCoord <span class="op">-</span> pointOnAdjGrid<span class="op">);</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>      minDistFromPixel <span class="op">=</span> <span class="bu">min</span><span class="op">(</span>dist<span class="op">,</span> minDistFromPixel<span class="op">);</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>      pointsOnGrid <span class="op">+=</span> <span class="bu">smoothstep</span><span class="op">(</span><span class="fl">0.95</span><span class="op">,</span> <span class="fl">0.96</span><span class="op">,</span> <span class="fl">1.0</span> <span class="op">-</span> dist<span class="op">);</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Pour simuler des nuages, il suffit de soustraire la distance minimale
du <em>pixel</em> dans le code, ce qui rendra une apparence
nuageuse.</p>
<h2 id="le-fractional-brownian-motion">Le <em>Fractional Brownian
Motion</em></h2>
<p>Le <em>Fractional Brownian Motion</em> (FBM) est une technique qui,
malgré son nom complexe, se révèle assez simple à mettre en œuvre en
<em>livecoding</em> pour ceux qui maîtrisent déjà les concepts du bruit.
En résumé, la technique du FBM consiste à superposer des couches de
bruit afin de composer une texture très détaillée présentant des
propriétés d’auto-similarité, présentes aussi dans les fractales (voir
<a href="#noise09" data-reference-type="ref"
data-reference="noise09">[noise09]</a> et <a href="#noise08"
data-reference-type="ref" data-reference="noise08">6.17</a>).</p>
<figure id="noise08">
<a href="./memoire/images/noise/noise09.JPG" target="_blank"><img src="./memoire/images/noise/noise09.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/noise/noise08.JPG" target="_blank"><img src="./memoire/images/noise/noise08.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>FBM</figcaption>
</figure>
<p>Par analogie avec la musique, cette approche de superposition de
bruits est souvent qualifiée d’ajout d’octaves de bruit. À chaque
nouvelle octave, nous doublons la fréquence et ajustons l’amplitude en
conséquence. Bien que chaque octave apporte sa propre richesse visuelle,
la combinaison de plusieurs octaves crée une texture plus détaillée,
offrant des possibilités de représentation pour des éléments variés tels
que les nuages, les vagues, les montagnes, etc (voir <a href="#fbm00"
data-reference-type="ref" data-reference="fbm00">[fbm00]</a> et <a
href="#fbm01" data-reference-type="ref"
data-reference="fbm01">6.18</a>).</p>
<div class="sourceCode" id="cb52" data-language="GLSL"
data-caption="FBM" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> c <span class="op">=</span> <span class="fu">SmoothNoise</span><span class="op">(</span>uv<span class="op">*</span><span class="fl">4.</span><span class="op">)*</span><span class="fl">1.</span><span class="op">;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>c<span class="op">+=</span> <span class="fu">SmoothNoise</span><span class="op">(</span>uv<span class="op">*</span><span class="fl">8.</span><span class="op">)*.</span><span class="fu">50</span><span class="op">;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>c<span class="op">+=</span> <span class="fu">SmoothNoise</span><span class="op">(</span>uv<span class="op">*</span><span class="fl">16.</span><span class="op">)*.</span><span class="fu">25</span><span class="op">;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>c<span class="op">+=</span> <span class="fu">SmoothNoise</span><span class="op">(</span>uv<span class="op">*</span><span class="fl">32.</span><span class="op">)*.</span><span class="fu">125</span><span class="op">;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>c<span class="op">+=</span> <span class="fu">SmoothNoise</span><span class="op">(</span>uv<span class="op">*</span><span class="fl">64.</span><span class="op">)*.</span><span class="fu">0625</span><span class="op">;</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>c<span class="op">/=(</span><span class="fl">1.</span><span class="op">+.</span><span class="fu">5</span><span class="op">);</span></span></code></pre></div>
<figure id="fbm01">
<a href="./memoire/images/post_process/fbm00.JPG" target="_blank"><img src="./memoire/images/post_process/fbm00.JPG" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/post_process/fbm01.JPG" target="_blank"><img src="./memoire/images/post_process/fbm01.JPG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Génération de terrain avec le FBM</figcaption>
</figure>
<h2 id="les-ombres">Les ombres</h2>
<p>Le calcul des ombres est en réalité plus simple qu’il n’y paraît.
Actuellement, nous utilisons notre méthode de <em>ray marching</em> pour
identifier un point de la scène en contact avec nos objets (voir <a
href="#shad00" data-reference-type="ref"
data-reference="shad00">[shad00]</a>). Cette même méthode peut être
réutilisée pour générer un second rayon pointant vers la source
lumineuse de la scène. Si ce rayon intersecte un objet lors de son
trajet entre le point sur la surface et la source lumineuse, cela
signifie qu’il y a une occlusion et que le point sur la surface se
trouve dans l’ombre.</p>
<figure id="shad01">
<a href="./memoire/images/shaders/shad00.png" target="_blank"><img src="./memoire/images/shaders/shad00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shad01.png" target="_blank"><img src="./memoire/images/shaders/shad01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Scène sans le calcul des ombres // Scène avec le calcul des ombres</figcaption>
</figure>
<p>Dans notre implémentation GLSL, nous répéterons le <em>ray
marching</em> une seconde fois, en prenant comme origine le point
<code>p</code>, découvert lors de la première étape du <em>ray
marching</em> lorsque nous avons identifié les objets de la scène. La
direction du nouveau rayon sera définie par <code>lightDirection</code>.
Dans notre code, cela se traduit simplement par l’ajout de trois lignes
après le calcul de la réflexion diffuse.</p>
<div class="sourceCode" id="cb53" data-language="GLSL"
data-caption="Calcul des ombres" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> dif <span class="op">=</span> <span class="bu">clamp</span><span class="op">(</span><span class="bu">dot</span><span class="op">(</span>normal<span class="op">,</span> lightDirection<span class="op">),</span> <span class="fl">0.</span><span class="op">,</span> <span class="fl">1.</span><span class="op">);</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">// diffuse reflection clamped between zero and one</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> newRayOrigin <span class="op">=</span> p<span class="op">;</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">// cast shadow ray to the light source</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> shadowRayLength <span class="op">=</span> <span class="fu">rayMarch</span><span class="op">(</span>newRayOrigin<span class="op">,</span> lightDirection<span class="op">);</span> </span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>shadowRayLength <span class="op">&lt;</span> <span class="bu">length</span><span class="op">(</span>lightPosition <span class="op">-</span> newRayOrigin<span class="op">))</span> dif <span class="op">*=</span> <span class="fl">0.</span><span class="op">;</span> </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">// if the shadow ray hits the sphere,</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="co">// set the diffuse reflection to zero,</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co">// simulating a shadow</span></span></code></pre></div>
<p>Lors de l’exécution du code, l’écran affiche presque entièrement un
noir total. Cette obscurité est en réalité due à une raison assez
intuitive. Lorsque nous lançons notre second rayon de <em>ray
marching</em> vers la source lumineuse, l’algorithme considère le point
<code>p</code>, qui est en contact direct avec la surface. Par
conséquent, dès le premier tour de la boucle, l’algorithme détecte une
collision avec un objet, faisant ainsi croire que la plupart de la scène
est dans l’ombre, d’où l’écran noir.</p>
<p>Pour résoudre ce problème, il est nécessaire de décaler légèrement le
point d’origine du second rayon par rapport à <code>p</code>. Fort
heureusement, nous sommes en mesure de calculer la normale au point de
la surface, ce qui nous permet de nous éloigner subtilement de la
surface en suivant la direction de cette normale. Une méthode couramment
employée consiste à ajouter la normale du point de la surface,
multipliée par une petite valeur, à la position de <code>p</code>, afin
d’obtenir un point voisin plus approprié pour l’origine du second
rayon.</p>
<div class="sourceCode" id="cb54" data-language="GLSL"
data-caption="S&#39;éloigner de la surface" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> newRayOrigin <span class="op">=</span> p <span class="op">+</span> normal <span class="op">*</span> PRECISION<span class="op">;</span></span></code></pre></div>
<p>L’ombre apparaît encore assez sombre. Pour la rendre plus claire,
nous pouvons ajuster la proportion de la réflexion diffuse.
Actuellement, nous attribuons la couleur de la réflexion diffuse à zéro
pour les points identifiés comme étant dans l’ombre. En modifiant le «
facteur d’échelle » et en le fixant à <span
class="math inline">\(0.2\)</span>, nous pouvons obtenir une ombre plus
légère et plus réaliste (voir <a href="#shad01"
data-reference-type="ref" data-reference="shad01">6.19</a>).</p>
<div class="sourceCode" id="cb55" data-language="GLSL"
data-caption="Ajuster la proportion de la réflexion diffuse"
data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>shadowRayLength <span class="op">&lt;</span> <span class="bu">length</span><span class="op">(</span>lightPosition <span class="op">-</span> newRayOrigin<span class="op">))</span> dif <span class="op">*=</span> <span class="fl">0.2</span><span class="op">;</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">// shadow</span></span></code></pre></div>
<p>L’ombre est désormais plus esthétique, permettant d’apercevoir la
couleur diffuse du sol à travers elle.</p>
<h2 id="le-glow">Le <em>glow</em></h2>
<p>Le <em>glow</em><a href="#fn65" class="footnote-ref" id="fnref65"
role="doc-noteref"><sup>65</sup></a>, ou effet de brillance, désigne
cette capacité d’un objet à paraître lumineux à émettre de la lumière.
Dans notre environnement quotidien, plusieurs éléments naturels ou
artificiels présentent cette caractéristique, tels que les lucioles, les
ampoules, les méduses et même les étoiles dans le ciel. Ces entités
peuvent émettre une lumière qui illumine leur environnement, qu’il
s’agisse d’une lumière discrète s’étendant sur une courte distance ou
d’une lueur intense comparable à celle de la pleine lune.</p>
<p>Pour obtenir un effet de <em>glow</em> réussi, il est crucial
d’assurer un contraste prononcé entre la teinte de l’objet et celle de
son fond, ainsi qu’un dégradé coloré qui s’atténue progressivement à
mesure que l’on s’éloigne de l’objet. En observant ces deux critères,
nous pouvons élaborer un effet lumineux efficace (voir <a href="#glow1"
data-reference-type="ref" data-reference="glow1">[glow1]</a>).</p>
<p>Dans le contexte du code, les SDF génèrent une valeur de distance
signée indiquant la distance par rapport à un objet donné. Il convient
de rappeler que les <em>shaders</em> dessinent chaque <em>pixel</em> de
manière parallèle, ce qui signifie que chaque <em>pixel</em> est
positionné à une distance définie de l’objet. Ensuite, nous avons la
possibilité de créer une fonction qui introduira un effet de
<em>glow</em> proportionnel à la distance par rapport au centre de
l’objet. Pour illustrer cette fonction, Desmos<a href="#fn66"
class="footnote-ref" id="fnref66" role="doc-noteref"><sup>66</sup></a>
peut être utilisé en saisissant l’équation <span class="math inline">\(y
= \frac{1}{x}\)</span>. Dans ce contexte, <span
class="math inline">\(x\)</span> représente la valeur de distance signée
pour l’objet. À mesure que cette valeur s’accroît, la sortie, <span
class="math inline">\(y\)</span>, se réduit (voir <a href="#glow2"
data-reference-type="ref" data-reference="glow2">6.20</a>).</p>
<figure id="glow2">
<a href="./memoire/images/shaders/glow1.png" target="_blank"><img src="./memoire/images/shaders/glow1.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/glow2.png" target="_blank"><img src="./memoire/images/shaders/glow2.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Distance du <em>glow</em></figcaption>
</figure>
<p>La fonction <span class="math inline">\(y = \frac{1}{x}\)</span> peut
générer des valeurs imprévues lorsque <span
class="math inline">\(x\)</span> est négatif (<span
class="math inline">\(x\leq0\)</span>). Cette situation peut conduire le
compilateur à réaliser des calculs inhabituels, ce qui entraîne des
couleurs non anticipées. Pour pallier ce problème, nous pouvons faire
appel à la fonction <code>clamp()</code> afin de s’assurer que la valeur
de l’effet de <em>glow</em> demeure comprise entre <span
class="math inline">\(0\)</span> et <span
class="math inline">\(1\)</span> (voir <a href="#glow3"
data-reference-type="ref" data-reference="glow3">[glow3]</a>).</p>
<div class="sourceCode" id="cb56" data-language="GLSL"
data-caption="Glow" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> d <span class="op">=</span> <span class="bu">length</span><span class="op">(</span>uv<span class="op">)</span> <span class="op">-</span> <span class="fl">0.2</span><span class="op">;</span> <span class="co">// signed distance function</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> col <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="bu">step</span><span class="op">(</span><span class="fl">0.</span><span class="op">,</span> <span class="op">-</span>d<span class="op">));</span> <span class="co">// create white circle with black background</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> glow <span class="op">=</span> <span class="fl">0.01</span><span class="op">/</span>d<span class="op">;</span> <span class="co">// create glow and diminish it with distance</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>glow <span class="op">=</span> <span class="bu">clamp</span><span class="op">(</span>glow<span class="op">,</span> <span class="fl">0.</span><span class="op">,</span> <span class="fl">1.</span><span class="op">);</span> <span class="co">// remove artifacts</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>col <span class="op">+=</span> glow<span class="op">;</span> <span class="co">// add glow</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>col<span class="op">,</span><span class="fl">1.0</span><span class="op">);</span> <span class="co">// output color</span></span></code></pre></div>
<p>Il est possible de multiplier l’effet de <em>glow</em> par une valeur
pour rendre l’objet plus lumineux pour faire en sorte que l’effet de
<em>glow</em> s’étende sur une plus grande distance (voir <a
href="#glow4" data-reference-type="ref"
data-reference="glow4">6.21</a>).</p>
<div class="sourceCode" id="cb57" data-language="GLSL"
data-caption="Intensité du glow" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>col <span class="op">+=</span> glow <span class="op">*</span> <span class="fl">5.</span><span class="op">;</span> <span class="co">// add glow</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>col<span class="op">,</span><span class="fl">1.0</span><span class="op">);</span> <span class="co">// output color</span></span></code></pre></div>
<figure id="glow4">
<a href="./memoire/images/shaders/glow3.png" target="_blank"><img src="./memoire/images/shaders/glow3.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/glow4.png" target="_blank"><img src="./memoire/images/shaders/glow4.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Étendre l’effet de <em>glow</em></figcaption>
</figure>
<p>Nous venons de détailler la manière de créer un effet de
<em>glow</em> pour des formes 2D dans un <em>shader</em> en exploitant
les SDF et en instaurant un contraste entre la couleur de la forme et
celle de l’arrière-plan. De plus, nous avons généré un dégradé autour
des contours de la forme. En combinant ces deux éléments, nous avons
réussi à obtenir un effet de brillance simulé dans nos
<em>shaders</em>.</p>
<p>En 3D, le principe reste identique, à la différence près que nous
accumulons l’effet de brillance lorsque les rayons du <em>ray
marching</em> s’approchent de l’objet (voir <a href="#shadat15"
data-reference-type="ref" data-reference="shadat15">[shadat15]</a> et <a
href="#shadat14" data-reference-type="ref"
data-reference="shadat14">6.22</a>).</p>
<figure id="shadat14">
<a href="./memoire/images/shaders/shaderatelier_15.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_15.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shaderatelier_14.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_14.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Atelier Fuz avec <em>glow</em></figcaption>
</figure>
<div class="sourceCode" id="cb58" data-language="GLSL"
data-caption="Glow 3D" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">// couleur pour le bloom</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> accCol <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.</span><span class="op">);</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co">// depart du ray marching</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span><span class="op">(</span><span class="dt">float</span> i<span class="op">=</span><span class="fl">0.</span><span class="op">;</span> i<span class="op">&lt;</span><span class="fl">128.</span><span class="op">;</span>i<span class="op">++)</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> res <span class="op">=</span> <span class="fu">map</span><span class="op">(</span>p<span class="op">);</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">(</span><span class="bu">distance</span><span class="op">(</span>p<span class="op">,</span> ro<span class="op">)</span> <span class="op">&gt;</span> <span class="fl">20.</span><span class="op">)</span> <span class="co">// astuce pour pas aller trop loin</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>     <span class="kw">break</span><span class="op">;</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span><span class="op">(</span>res<span class="op">.</span><span class="fu">x</span> <span class="op">&lt;</span> <span class="op">.</span><span class="fu">01</span><span class="op">)</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">(...)</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    p<span class="op">+=</span> rd<span class="op">*</span>res<span class="op">.</span><span class="fu">x</span><span class="op">;</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// accumulation du bloom</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// degrade selon l&#39;id de l objet entre rouge et bleu</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> rgb <span class="op">=</span> <span class="bu">mix</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span><span class="fl">1.</span><span class="op">,</span> <span class="fl">0.</span><span class="op">,</span><span class="fl">0.</span><span class="op">),</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.</span><span class="op">,</span><span class="fl">0.</span><span class="op">,</span><span class="fl">1.</span><span class="op">),</span> res<span class="op">.</span><span class="fu">y</span><span class="op">);</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// permet de definir ou commence ou plutot finit le bloom, ici a 1.5 de la surface</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> stBl <span class="op">=</span> <span class="op">(</span><span class="fl">1.</span><span class="op">-</span><span class="fu">sat</span><span class="op">(</span>res<span class="op">.</span><span class="fu">x</span><span class="op">/</span><span class="fl">1.5</span><span class="op">));</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    accCol <span class="op">+=</span> rgb<span class="op">*</span><span class="fl">0.04</span><span class="op">*</span>stBl<span class="op">;</span> <span class="co">// ajout du bloom</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a><span class="co">// ajout du bloom</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>col <span class="op">+=</span> accCol<span class="op">;</span></span></code></pre></div>
<h2 id="conclusion-1">Conclusion</h2>
<p>Nous avons initialement entrepris l’étude des techniques
fondamentales nécessaires à la programmation d’un <em>fragment
shader</em> en temps réel, avant d’approfondir notre exploration avec
des techniques avancées visant à améliorer la qualité visuelle.
Malheureusement, plusieurs concepts auraient mérité d’être mis en
lumière, notamment le Fresnel, le flou, le Truchet, les fractales, la
<em>cubemap</em>, la réflexion de la lumière, et dans le domaine sonore,
la synthèse sonore générée par les <em>shaders</em>.</p>
<p>En décrivant davantage, le Fresnel fait référence à l’interaction
optique entre la lumière et une surface, influençant la manière dont
celle-ci se réfléchit en fonction de l’angle d’incidence. Le flou, quant
à lui, représente un effet appliqué en post-traitement. Le Truchet se
rapporte à la disposition de motifs réguliers pour créer un pavage. Les
fractales sont des structures mathématiques caractérisées par leur
auto-similarité à différentes échelles. La <em>cubemap</em> est utilisée
pour simuler un environnement tridimensionnel autour d’une scène. La
réflexion de la lumière dans un contexte de <em>ray marching</em> fait
rebondir la trajectoire du rayon de manière symétrique. Enfin, la
synthèse sonore en <em>shader</em> permet d’accomplir des tâches
généralement réalisées dans des environnements tels que
SuperCollider.</p>
<p>Pour améliorer la compréhension de ces techniques non explicitées
dans le mémoire, j’ai décidé d’ajouter quelques illustrations des
ateliers correspondants, accompagnées d’un <a
href="https://wiki.fuz.re/doku.php?id=atelier:creative_coding:code_des_ateliers">lien
vers le code source commenté</a> de ces <em>shaders</em>, hébergé sur le
<a href="https://wiki.fuz.re/doku.php?id=start">wiki du Fuz</a>.</p>
<figure id="shadat12">
<a href="./memoire/images/shaders/shaderatelier_06.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_06.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shaderatelier_12.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_12.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Réflexion sur l'eau // Réflexion sur la croix</figcaption>
</figure>
<figure id="shadat11">
<a href="./memoire/images/shaders/shaderatelier_10.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_10.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/shaders/shaderatelier_11.jpg" target="_blank"><img src="./memoire/images/shaders/shaderatelier_11.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Méduses avec effet de Fresnel</figcaption>
</figure>
<h1
id="expérimentations-vers-une-interaction-avec-la-musique">Expérimentations:
vers une interaction avec la musique</h1>
<h2 id="introduction-6">Introduction</h2>
<p>Ce chapitre sera consacré à mes expérimentations antérieures visant à
explorer l’interaction entre la musique et les <em>shaders</em> en temps
réel. Mon choix s’est orienté vers des outils permettant de générer un
flux MIDI afin d’animer mes <em>shaders</em> en fonction des hauteurs
des notes. Dans cette optique, j’ai entrepris une étude approfondie de
la structure MIDI afin de mieux appréhender et localiser les
informations clés telles que la hauteur de la note, sa vélocité et sa
durée (une section sera dédiée à cette exploration).</p>
<p>Il existe de nombreux logiciels de <em>livecoding</em> musical parmi
lesquels choisir. Dans cette multitude, j’ai sélectionné Orca (voir <a
href="#orca00" data-reference-type="ref"
data-reference="orca00">[orca00]</a>) pour sa syntaxe ésotérique et
FoxDot (voir <a href="#foxdot00" data-reference-type="ref"
data-reference="foxdot00">7.1</a>) pour son intégration avec Python
ainsi que pour sa syntaxe intuitive proche de celle d’une partition
papier.</p>
<figure id="foxdot00">
<a href="./memoire/images/experiments/orca00.jpg" target="_blank"><img src="./memoire/images/experiments/orca00.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/foxdot00.jpg" target="_blank"><img src="./memoire/images/experiments/foxdot00.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Orca // FoxDot</figcaption>
</figure>
<p>J’approfondirai ces deux solutions plus en détail dans la suite de ce
mémoire. Il est à noter que parmi les <em>demosceners</em>, chacun a ses
propres préférences en matière de logiciel, souvent influencées par des
affinités personnelles ou par leur expérience professionnelle ou
artistique. Parmi les logiciels les plus appréciés figurent TidalCycles,
Sonic Pi, SuperCollider (qui demeure la référence en matière de synthèse
sonore) ainsi que Max/MSP (voir <a href="#tidal00"
data-reference-type="ref" data-reference="tidal00">[tidal00]</a>, <a
href="#sonicpi00" data-reference-type="ref"
data-reference="sonicpi00">7.2</a>, <a href="#sc00"
data-reference-type="ref" data-reference="sc00">[sc00]</a> et <a
href="#maxmsp00" data-reference-type="ref"
data-reference="maxmsp00">7.3</a>).</p>
<figure id="sonicpi00">
<a href="./memoire/images/experiments/tidal00.png" target="_blank"><img src="./memoire/images/experiments/tidal00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/sonicpi00.jpg" target="_blank"><img src="./memoire/images/experiments/sonicpi00.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>TidalCycles // Sonic Pi</figcaption>
</figure>
<figure id="maxmsp00">
<a href="./memoire/images/experiments/supercollider00.jpg" target="_blank"><img src="./memoire/images/experiments/supercollider00.jpg" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/maxmsp00.jpg" target="_blank"><img src="./memoire/images/experiments/maxmsp00.jpg" alt="Image 2" class="side-by-side2"/></a>
<figcaption>SuperCollider // MAX/MSP</figcaption>
</figure>
<p>Au cours de mon intensif de M1, j’ai élaboré le <em>pipeline</em>
suivant : d’abord générer le MIDI avec Orca, puis transférer vers
Ableton via loopMIDI<a href="#fn67" class="footnote-ref" id="fnref67"
role="doc-noteref"><sup>67</sup></a>, puis intégrer le MIDI dans
TouchDesigner à l’aide d’un <em>plugin</em> pour finalement animer les
visuels grâce aux <em>nodes</em> de TouchDesigner. J’ai été agréablement
surpris de ma facilité à maîtriser Orca, malgré sa réputation de langage
difficile à appréhender. Cependant, je restais insatisfait, les étapes
du processus manquant de réactivité pour une utilisation en conditions
réelles lors de performances sur scène.</p>
<p>C’est pourquoi, lors de mon intensif de M2, j’ai choisi une approche
légèrement revisitée en concevant un <em>pipeline</em> à la fois
similaire et unique. Cette fois-ci, le MIDI était généré par FoxDot et
ensuite acheminé vers TouchDesigner via loopMIDI. Au sein de cette
configuration, le MIDI anime des variables uniformes intégrées au code
GLSL de TouchDesigner, qui propose un <em>node</em> dédié. Cette
démarche m’a offert l’occasion d’approfondir mes compétences avec FoxDot
et de constater la facilité avec laquelle on peut traduire un
<em>shader</em> dans TouchDesigner. Bien que cette approche m’ait paru
plus efficace que la précédente, mon objectif demeure de réduire au
maximum l’usage de logiciels tiers pour la création d’animations de
<em>shaders</em>, un objectif que j’espère atteindre à la fin de mon
mémoire.</p>
<p>Je commencerai par une analyse de mes intensifs de M1 et M2 pour
exposer ma méthodologie, ainsi que les avantages et inconvénients
rencontrés au cours de ces expérimentations pour ensuite proposer une
solution basée sur l’éditeur de <em>shaders</em> KodeLife renommé pour
sa capacité à traiter divers types d’entrées, notamment le MIDI sous
forme de texture.</p>
<h2 id="intensifs-m1">Intensifs M1</h2>
<p>Lors de mon intensif en M1, j’ai eu recours à Orca pour la
transmission de signaux MIDI (voir <a href="#orca01"
data-reference-type="ref" data-reference="orca01">7.4</a>). Orca est un
langage de programmation ésotérique<a href="#fn68" class="footnote-ref"
id="fnref68" role="doc-noteref"><sup>68</sup></a> (parfois également
désigné par le terme « exotique »), conçu par Hundred Rabbits<a
href="#fn69" class="footnote-ref" id="fnref69"
role="doc-noteref"><sup>69</sup></a> et particulièrement adapté au
<em>livecoding</em>. Le code peut être modifié en temps réel, et en
utilisant les signaux MIDI, il est possible de contrôler des éléments
visuels ou des dispositifs d’éclairage.</p>
<figure id="orca01">
<a href="./memoire/images/experiments/orca01.jpg" target="_blank"><img src="./memoire/images/experiments/orca01.jpg" /></a>
<figcaption>Orca couplé avec Pilot qui fournit une liste d’instruments
MIDI</figcaption>
</figure>
<h3 class="unnumbered" id="présentation-dorca">Présentation d’Orca</h3>
<p>Orca est structuré comme une grille bidimensionnelle dans laquelle
chaque cellule peut contenir un caractère. Une cellule vide est
symbolisée par le caractère « <code>.</code> ».</p>
<p>Les opérateurs d’Orca comprennent toutes les lettres de l’alphabet
ainsi que quelques symboles. Chaque opérateur occupe une case unique
dans la grille. La majorité des opérateurs ont une ou plusieurs entrées
à l’Est et à l’Ouest, et une sortie généralement dirigée vers le Sud<a
href="#fn70" class="footnote-ref" id="fnref70"
role="doc-noteref"><sup>70</sup></a>. Bien que certains opérateurs
soient mobiles, la plupart demeurent fixes.</p>
<p>Chaque lettre de l’alphabet, qu’il s’agisse des majuscules (<span
class="math inline">\(A-Z\)</span>) ou des minuscules (<span
class="math inline">\(a-z\)</span>), représente un opérateur spécifique.
Les opérateurs en majuscules s’exécutent à chaque <em>frame</em>, tandis
que les opérateurs en minuscules s’exécutent à chaque <em>bang</em>,
symbolisé par le caractère « <code>*</code> ».</p>
<p>Par exemple, l’opérateur « <code>D</code> » génère un <em>bang</em>
régulier au Sud. Tout opérateur adjacent à cette cellule spécifique sera
alors activé. Parmi ces opérateurs, on trouve des fonctions d’addition,
de soustraction, ainsi que des fonctions pour lire et écrire dans des
variables.</p>
<p>Prenons l’exemple de l’opérateur « <code>D</code> ». Il dispose de
deux entrées (« <span class="math inline">\(8\)</span> » et « <span
class="math inline">\(2\)</span> ») et d’une sortie (« <code>*</code>
»). Ainsi, un <em>bang</em> sera généré toutes les 16 <em>frames</em> et
activera les opérateurs adjacents.</p>
<div class="sourceCode" id="cb59" data-language="GLSL"
data-caption="Opérateur « \lstinline{D} »" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>D2</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="op">.*.</span></span></code></pre></div>
<p>D’autres opérateurs ont un nombre différent d’entrées et de sorties.
Prenons l’exemple de l’opérateur « <code>X</code> » : il dispose de
trois entrées (deux à l’Ouest correspondant au décalage horizontal et
vertical et une à l’Est correspondant au caractère que l’on souhaite
écrire) et d’une sortie au Sud. Cet opérateur permet d’écrire un
caractère avec un décalage dans la grille. Dans cet exemple, il écrit un
<span class="math inline">\(7\)</span> décalé d’une cellule vers le Sud
et d’une cellule vers l’Est.</p>
<div class="sourceCode" id="cb60" data-language="GLSL"
data-caption="Opérateur « \lstinline{X} »" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>X7</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="op">....</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="op">...</span><span class="fu">7</span></span></code></pre></div>
<p>Pour jouer une note MIDI, on combinera les opérateurs «
<code>D</code> » (qui génère un <em>bang</em> régulier) et «
<code>\:</code> » (qui envoie un message MIDI). Bien que «
<code>\:</code> » n’ait pas de sortie dans Orca, il envoie un message
MIDI à un appareil MIDI.</p>
<div class="sourceCode" id="cb61" data-language="GLSL"
data-caption="Jouer une note MIDI" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>D8<span class="op">.....</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="op">*:</span>A2F51</span></code></pre></div>
<p>L’opérateur « <code>\:</code> » attend 5 arguments mais seuls les
trois premiers sont obligatoires.</p>
<ul>
<li><p><strong>A (argument 1)</strong>: le channel MIDI sur lequel
envoyer le message (A <code>==</code> channel 10)</p></li>
<li><p><strong>2 (argument 2)</strong>: l’octave (2 <code>==</code>
Troisième octave)</p></li>
<li><p><strong>F (argument 3)</strong>: la note (F <code>==</code>
Fa)</p></li>
<li><p><strong>5 (argument 4)</strong>: la vélocité (la force avec
laquelle la touche a été frappée lorsque la note a été jouée)</p></li>
<li><p><strong>1 (argument 5)</strong>: la durée (le temps pendant
lequel la note est tenue)</p></li>
</ul>
<p>C’est le point de départ pour générer un son, mais en associant
divers opérateurs, on peut produire une gamme de possibilités, telles
que jouer des notes de façon aléatoire, stocker des mélodies dans des
tableaux, créer et exécuter des séquences mélodiques, utiliser des
variables, et appliquer la logique booléenne pour établir des
conditions, entre autres. Le défi réside dans la quête d’une harmonie
musicale tout en concevant un visuel singulier. De manière personnelle,
je trouve aussi un intérêt particulier à explorer l’aspect visuel du
langage, comme en recréant un Tetris synchronisé avec la musique de
Tetris (voir <a href="#tetris00" data-reference-type="ref"
data-reference="tetris00">[tetris00]</a>). Le lecteur pourra retrouver
la liste de tous les opérateurs en annexe <a href="#appendix:orcaops"
data-reference-type="ref" data-reference="appendix:orcaops">9</a>.</p>
<h3 class="unnumbered" id="pipeline-m1"><em>Pipeline</em> M1</h3>
<p>Lors de mon intensif, j’ai acheminé les signaux MIDI d’Orca vers
Ableton, puis d’Ableton vers TouchDesigner via un réseau nodal pour
interpréter les valeurs MIDI et animer les visuels (voir <a
href="#orcatouch00" data-reference-type="ref"
data-reference="orcatouch00">7.6</a> et <a href="#orcatouch01"
data-reference-type="ref" data-reference="orcatouch01">7.7</a>). Bien
que cette méthode soit efficace, elle ne m’a pas semblé suffisamment
proche de la pratique du <em>livecoding</em>. C’est lors de mon intensif
de M2 que j’ai pu explorer une approche plus directe, en exploitant le
<em>node</em> de TouchDesigner spécifiquement conçu pour le <em>fragment
shader</em>.</p>
<figure id="orca_00">
<a href="./memoire/images/experiments/tetris00.png" target="_blank"><img src="./memoire/images/experiments/tetris00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/orca_ableton00.png" target="_blank"><img src="./memoire/images/experiments/orca_ableton00.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Tetris avec Orca // Orca vers Ableton</figcaption>
</figure>
<figure id="orcatouch00">
<a href="./memoire/images/experiments/orcatouch00.png" target="_blank"><img src="./memoire/images/experiments/orcatouch00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/orcatouch01.png" target="_blank"><img src="./memoire/images/experiments/orcatouch01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Animation de visuels 3D avec Orca</figcaption>
</figure>
<figure id="orcatouch01">
<a href="./memoire/images/experiments/orcatouch02.png" target="_blank"><img src="./memoire/images/experiments/orcatouch02.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/orcatouch03.png" target="_blank"><img src="./memoire/images/experiments/orcatouch03.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Animation de visuels 2D avec Orca</figcaption>
</figure>
<h2 id="intensifs-m2">Intensifs M2</h2>
<h3 class="unnumbered" id="contexte-et-objectif">Contexte et
objectif</h3>
<p>Suite à ma déception concernant le manque d’interactivité en temps
réel après l’intensif de M1, j’ai décidé, dans le cadre de mon intensif
de M2, d’explorer l’utilisation de FoxDot pour la création de flux MIDI.
L’objectif initial de cette démarche était de concevoir une performance
de <em>livecoding</em> qui mettrait en évidence l’interaction entre le
son produit via le code de FoxDot et les <em>fragment shaders</em> (voir
<a href="#intensifs00" data-reference-type="ref"
data-reference="intensifs00">7.8</a>).</p>
<figure id="intensifs00">
<a href="./memoire/images/experiments/intensifs/intensifs00.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/intensifs/intensifs01.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Ébauches de <em>pipeline</em> pour l’intensif de
M2</figcaption>
</figure>
<p>Dans cette section, je vais présenter ma démarche et évoquer les
difficultés que j’ai rencontrées durant ce projet. Mais avant cela
j’aimerais approfondir l’étude de FoxDot comme j’ai pu le faire avec
Orca.</p>
<figure id="intensifs21">
<a href="./memoire/images/experiments/intensifs/intensifs21.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs21.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/intensifs/intensifs22.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs22.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption> Interactions entre FoxDot et TouchDesigner via le
GLSL<br />
(le code est à peine visible mais il est bien présent) </figcaption>
</figure>
<h3 class="unnumbered" id="foxdot-documentation">FoxDot
documentation</h3>
<p>FoxDot est un environnement de programmation Python qui fonctionne en
tandem avec SuperCollider, un langage de programmation dédié à la
synthèse audio en temps réel et au traitement du signal. Bien que je
n’aborde pas en détail les capacités de SuperCollider dans ce mémoire,
il est important de souligner sa puissance et sa capacité à créer des
sons électroniques et des effets sonores complexes à partir de zéro
grâce à la synthèse sonore. Néanmoins, l’interaction avec SuperCollider
peut être simplifiée grâce à FoxDot. On utilise SuperCollider en
arrière-plan pour configurer les instruments, puis on redirige le flux
audio vers des DAWs<a href="#fn71" class="footnote-ref" id="fnref71"
role="doc-noteref"><sup>71</sup></a> (<em>Digital Audio
Workstation</em>) comme Reaper ou Ableton pour écouter les
instruments.</p>
<figure id="reaper00">
<a href="./memoire/images/experiments/reaper00.PNG" target="_blank"><img src="./memoire/images/experiments/reaper00.PNG" style="width:90.0%"/></a>
<figcaption>Reaper couplé avec Vital pour la synthèse
sonore</figcaption>
</figure>
<p>Ce qui m’a particulièrement attiré vers FoxDot, malgré sa
documentation souvent incomplète et dispersée sur le web, c’est sa
similitude avec l’écriture d’une partition musicale et sa syntaxe objet
propre au langage Python. Fort de mes connaissances en solfège acquises
par ma pratique du piano et du bandonéon, j’y vois une analogie avec la
représentation d’une partition traditionnelle. Une mélodie est
symbolisée par des listes, qui peuvent elles-mêmes être considérées
comme des objets. Ainsi, on peut accéder à de nombreux attributs tels
que la hauteur de la note, sa durée, le <em>sustain</em>, et bien
d’autres.</p>
<h4 class="unnumbered" id="explication-dune-ligne-de-code">Explication
d’une ligne de code</h4>
<p>Pour mieux comprendre la logique propre à FoxDot nous allons analyser
pas à pas une ligne de code « classique ».</p>
<pre data-caption="Exemple de base FoxDot" data-captionpos="b"
data-frame="single"><code>p1 &gt;&gt; bass([0,1,2,3,4,5], dur=PDur(3,8), amp=[1,1/2,1/2]).every(6,&quot;stutter&quot;,4,dur=3,oct=6)</code></pre>
<p>Dans cet exemple, nous associons un objet <code>Player</code> à la
variable <code>p1</code> à l’aide de l’opérateur <code>&gt;&gt;</code>.
Le terme qui suit immédiatement, <code>bass()</code>, désigne
l’instrument qui sera utilisé dans SuperCollider. Nous définissons
ensuite les arguments du <code>Player</code>. Le premier argument, qui
attend une liste, spécifie les notes à jouer. Ainsi,
<code>[0,1,2,3,4,5]</code> correspond aux notes Do, Ré, Mi, Fa, Sol et
La dans le contexte de la gamme de Do majeur.</p>
<p>Les attributs suivants, <code>dur</code> et <code>amp</code>,
déterminent respectivement la durée des notes et l’amplitude du son. La
partie finale avec la méthode
<code>.every(6,"stutter",4,dur=3,oct=6)</code> applique la méthode
<code>stutter()</code> tous les 6 temps, avec une durée de 3 et une
octave de 6 pour chaque note.</p>
<h4 class="unnumbered" id="les-variables-temporelles">Les variables
temporelles</h4>
<p>Une caractéristique unique de FoxDot est la présence de variables qui
évoluent dans le temps. Lors de la programmation musicale en direct, il
est souvent souhaitable que les éléments évoluent progressivement. Cela
peut être illustré par l’utilisation de séquences d’accords. Par
exemple, pour représenter la séquence d’accords Do-Fa-Do-Sol, on
pourrait utiliser la liste Python <code>[0,3,0,4]</code> et souhaiter
jouer chaque accord pendant 8 temps. Pour cela, on peut utiliser des
variables qui varient dans le temps, de manière à changer d’accord après
8 temps. Ces variables sont désignées sous le nom de « variables
dépendantes du temps » ou <code>TimeVar</code> en code.</p>
<p>Pour résoudre notre problème initial de lecture d’une séquence
d’accords, nous pourrions utiliser le code suivant, en ajustant la durée
selon nos besoins, pour voir la séquence jouer sur 8 temps pour chaque
accord :</p>
<div class="sourceCode" id="cb63" data-language="Python"
data-caption="Variables temporelles" data-captionpos="b"
data-frame="single"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">&gt;&gt;</span> pluck(var([<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">4</span>], <span class="dv">8</span>), dur<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">1</span><span class="op">/</span><span class="dv">4</span>,<span class="dv">1</span><span class="op">/</span><span class="dv">4</span>,<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>]) <span class="op">+</span> (<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span></code></pre></div>
<h4 class="unnumbered" id="créer-ses-propres-fonctions">Créer ses
propres fonctions</h4>
<p>La syntaxe de FoxDot offre une grande flexibilité et précision dans
la création de motifs musicaux, tout en restant accessible pour ceux qui
sont familiarisés avec la musique et la programmation.</p>
<p>Un autre avantage considérable pour ceux qui maîtrisent la
programmation est la possibilité de créer ses propres fonctions. Écrire
des fonctions personnalisées dans FoxDot permet d’élargir
significativement les capacités du langage, permettant ainsi de
concevoir des motifs musicaux plus complexes et adaptés à des besoins
spécifiques.</p>
<p>La fonction suivante s’ajoute aux méthodes disponibles pour les
objets <code>Player</code> grâce à un décorateur. Le décorateur
<code>@player_method</code> est utilisé pour créer des méthodes pouvant
être appelées par tous les objets <code>Player</code>. Cela offre la
possibilité d’intégrer de nouvelles fonctionnalités ou de modifier le
comportement des objets <code>Player</code> sans nécessiter de
modifications du code source de FoxDot lui-même. Cette fonction a pour
objectif de gérer le <em>fade in</em><a href="#fn72"
class="footnote-ref" id="fnref72" role="doc-noteref"><sup>72</sup></a>
et le <em>fade out</em><a href="#fn73" class="footnote-ref" id="fnref73"
role="doc-noteref"><sup>73</sup></a> afin de contrôler l’apparition et
la disparition des instruments.</p>
<p>À l’intérieur du corps de la fonction, il est possible d’incorporer
tout code FoxDot valide pour générer ou manipuler le son. Cela peut
englober la création de <code>Players</code>, la définition de séquences
de notes, l’application d’effets sonores, entre autres.</p>
<div class="sourceCode" id="cb64" data-language="Python"
data-caption="Écrire ses propres fonctions" data-captionpos="b"
data-frame="single"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="at">@player_method</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fade(<span class="va">self</span>, dur<span class="op">=</span><span class="dv">8</span>, fvol<span class="op">=</span><span class="dv">1</span>, ivol<span class="op">=</span><span class="va">None</span>, autostop<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ivol <span class="op">==</span> <span class="va">None</span>:</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>        ivol <span class="op">=</span> <span class="bu">float</span>(<span class="va">self</span>.amplify)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.amplify <span class="op">=</span> linvar([ivol, fvol], [dur, inf], start<span class="op">=</span><span class="va">self</span>.metro.mod(<span class="dv">4</span>))</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> static_final_value():</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> fvol <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> autostop:</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.stop()</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.amplify <span class="op">=</span> fvol</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.metro.schedule(static_final_value, <span class="va">self</span>.metro.next_bar()<span class="op">+</span>dur<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">self</span></span></code></pre></div>
<h3 class="unnumbered" id="envoi-du-midi">Envoi du MIDI</h3>
<p>Depuis FoxDot, un Player dédié permet l’envoi de messages MIDI vers
SuperCollider via la commande <code>MidiOut([0,1,2],channel=1)</code>.
Ce signal MIDI peut ensuite être dirigé vers loopMIDI, un utilitaire de
routage MIDI, à l’aide de la commande <code>FoxDot.midi(1)</code> dans
SuperCollider (voir <a href="#intensifs03" data-reference-type="ref"
data-reference="intensifs03">[intensifs03]</a> et <a href="#loopmidi00"
data-reference-type="ref" data-reference="loopmidi00">7.11</a>).</p>
<figure id="loopmidi00">
<a href="./memoire/images/experiments/intensifs/intensifs03.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs03.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/loopmidi00.PNG" target="_blank"><img src="./memoire/images/experiments/loopmidi00.PNG" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Redirection dans SuperCollider // Redirection dans loopMIDI</figcaption>
</figure>
<p>Dans TouchDesigner, le flux MIDI est récupéré via le gestionnaire de
périphériques grâce au <em>node</em> « midiIn ». Étant donné que le
signal reçu est normalisé, il est alors possible de redéfinir les
intervalles aisément en utilisant le <em>node</em> « Math » pour animer
n’importe quelle variable dans TouchDesigner, notamment les variables
uniformes des <em>nodes</em> GLSL (voir <a href="#intensifs19"
data-reference-type="ref" data-reference="intensifs19">[intensifs19]</a>
et <a href="#intensifs20" data-reference-type="ref"
data-reference="intensifs20">7.12</a>).</p>
<figure id="intensifs20">
<a href="./memoire/images/experiments/intensifs/intensifs19.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs19.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/intensifs/intensifs20.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs20.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Redirection du MIDI dans TouchDesigner</figcaption>
</figure>
<h3 class="unnumbered"
id="traduction-du-code-glsl-vers-touchdesigner">Traduction du code GLSL
vers TouchDesigner</h3>
<p>L’une de mes préoccupations principales était la conversion du code
GLSL vers la syntaxe attendue par les <em>nodes</em> de TouchDesigner.
Comme mentionné plus tôt dans le mémoire, cette transition entre les
langages <em>shaders</em> peut présenter certaines subtilités.</p>
<p>Initialement, je craignais que cette étape de traduction ne rencontre
des obstacles imprévus. Toutefois, cette appréhension s’est avérée
largement infondée, du moins en grande partie. Le processus de
conversion requiert quelques ajustements, dont la plupart peuvent être
automatisés : il s’agit notamment des ajustements relatifs aux types
<code>vec3f</code>, ou encore les <code>float</code> qu’on écrit avec ou
sans « <code>.</code> », la transmission de la résolution en tant que
variable uniforme, ainsi que la syntaxe appropriée lors de l’utilisation
de textures.</p>
<p>Avec Loïck (mon partenaire de projet avec Jihed), nous avions même
envisagé de développer un outil spécifique intégré à TouchDesigner pour
automatiser l’intégration de <em>shaders</em> provenant de Shadertoy.
Cependant, après nos expérimentations, nous avons abandonné cette idée.
En effet, chaque <em>shader</em> importé peut comporter des
caractéristiques spécifiques qui rendent difficile leur généralisation
au sein d’un unique programme, ce qui aurait été trop ambitieux.</p>
<p>Les véritables difficultés rencontrées étaient principalement liés
aux bugs de rendu, en particulier l’adaptation du code pour utiliser le
bon espace sur lequel dessiner, notamment la transformation des uv. La
traduction vers TouchDesigner s’est donc avérée plus aisée que prévu,
nous avons donc saisi cette opportunité pour préparer le terrain pour
Jihed. Nous avons isolé et configuré des variables pouvant influencer le
<em>shader</em>. Pour chaque variable identifiée, nous avons défini une
plage de valeurs pour faciliter les animations futures.</p>
<figure id="intensifs12">
<a href="./memoire/images/experiments/intensifs/intensifs05.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs05.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/intensifs/intensifs12.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs12.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Ajout de variables uniformes dans TouchDesigner</figcaption>
</figure>
<h3 class="unnumbered"
id="limitations-de-foxdot-dans-la-gestion-du-signal-midi">Limitations de
FoxDot dans la gestion du signal MIDI</h3>
<p>FoxDot aurait été idéal pour mes besoins si il ne présentait pas une
limitation significative concernant la gestion du signal MIDI.
Actuellement, il n’est pas possible de jouer un son tout en transmettant
simultanément le signal MIDI. Pour pallier cette contrainte durant mon
intensif, j’ai créé l’illusion d’une diffusion musicale en temps réel
via le <em>livecoding</em>, alors qu’en réalité, un <code>Player</code>
dédié gérait en parallèle l’émission régulière de signaux MIDI qui
correspondaient au rythme de la musique.</p>
<p>Heureusement, bien que la version officielle de FoxDot ne soit plus
mise à jour par son créateur originel, une version 2.0 (Renardo) est en
cours de développement par Élie Gavoty, un membre du <em>Cookie
Collective</em>. J’ai pu discuter directement de ce problème avec lui,
et il l’a placé parmi ses priorités.</p>
<h3 class="unnumbered" id="imprévu-technique-et-adaptation">Imprévu
technique et adaptation</h3>
<p>J’ai omis de mentionner un autre obstacle technique auquel j’ai été
confronté lors de cet intensif. Comme précédemment expliqué, mon
objectif était de récupérer un signal MIDI plutôt qu’un signal
analogique, afin de m’éloigner des interactions traditionnellement
associées à l’interaction image-son. Au lieu d’une analyse fréquentielle
(aigus, basses, tempo, etc.), je souhaitais naïvement récupérer la
hauteur de la note dans TouchDesigner, en anticipant l’existence d’un
<em>node</em> approprié à cet effet.</p>
<p>Cependant, ce que TouchDesigner reçoit est bien la hauteur de la
note, mais sous forme de nom de variable contenant la valeur de
l’amplitude de la note jouée (voir <a href="#intensifs04"
data-reference-type="ref" data-reference="intensifs04">7.14</a>). Par
conséquent, pour récupérer la véritable hauteur de la note, il aurait
été nécessaire de développer un <em>node</em> personnalisé en Python
capable d’analyser la chaîne de caractères du nom de la variable et
d’extraire le suffixe numérique indiquant la hauteur de la note. N’ayant
identifié ce problème que tardivement, je n’ai pas eu l’opportunité de
développer ce <em>node</em> spécifique (peut-être lors d’une future
tentative).</p>
<p>Ainsi, le signal MIDI récupéré dans TouchDesigner est en quelque
sorte incomplet : bien que le rythme musical soit respecté, la hauteur
des notes n’a aucune véritable influence sur l’interaction.</p>
<figure id="intensifs04">
<a href="./memoire/images/experiments/intensifs/intensifs04.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs04.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/intensifs/intensifs19.png" target="_blank"><img src="./memoire/images/experiments/intensifs/intensifs19.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Problème de récupération de la hauteur de la
note</figcaption>
</figure>
<h2 id="le-projet-du-mémoire">Le projet du mémoire</h2>
<p>Pour ce mémoire, j’ai opté pour l’exploration d’un autre
<em>pipeline</em> de traitement. Initialement, mon intention était de
réaliser cette expérimentation avec OpenGL<a href="#fn74"
class="footnote-ref" id="fnref74" role="doc-noteref"><sup>74</sup></a>,
en utilisant du code graphique bas niveau pour bénéficier d’un contrôle
maximal. Cette approche représente le choix le plus complexe en termes
de pré-requis techniques, mais elle offre également le plus de
possibilités et de contrôle. Il est tout à fait envisageable de générer
du MIDI en C++, puis d’assurer le passage des informations du CPU vers
le GPU via des variables uniformes, et enfin d’utiliser ces informations
pour animer des <em>vertex shaders</em>, des <em>geometry shaders</em>
ou bien sûr des <em>fragment shaders</em> en GLSL.</p>
<p>Au cours de ce semestre, j’ai eu l’opportunité de suivre les
enseignements de Farès Belhadj sur la programmation graphique en tant
qu’auditeur libre. J’ai saisi cette occasion pour perfectionner mes
compétences en programmation OpenGL avec pour but de participer au
concours de fin d’année visant à produire un exécutable de musique et un
<em>shader</em> d’une taille inférieure à 64 Ko.</p>
<p>Mon projet initial consistait à élaborer une fonction en C++ capable
d’interpréter et de décomposer un flux MIDI côté CPU, puis de
transmettre les attributs de chaque note au fragment <em>shader</em> via
des variables uniformes. Toutefois, mon niveau actuel en C++ et en
OpenGL n’est pas suffisamment avancé pour concevoir cette fonction à
partir de zéro. J’ai donc préféré ne pas m’y aventurer, d’autant plus
que la rédaction du mémoire représente déjà une tâche exigeante en
termes de temps et d’efforts. J’ai néanmoins examiné des solutions
permettant de composer du MIDI directement en code (voir annexe <a
href="#appendix:codemidi" data-reference-type="ref"
data-reference="appendix:codemidi">10</a>).</p>
<p>J’ai donc opté pour KodeLife, un IDE dédié au <em>livecoding</em> qui
présente une interface très intuitive où les modifications du code sont
immédiatement visualisées à l’écran. Contrairement à Shadertoy nous
avons accès au <em>vertex shader</em> ainsi qu’au <em>geometry
shader</em>. Un autre avantage considérable est la diversité des entrées
disponibles : non seulement on peut importer des textures, mais aussi
utiliser des paramètres tels que le temps, l’image précédente du
programme, et surtout, dans notre cas particulier, l’audio. Cela peut se
faire à partir d’un fichier audio simple ou d’un flux MIDI.</p>
<figure id="kodelife01">
<a href="./memoire/images/experiments/kodelife00.png" target="_blank"><img src="./memoire/images/experiments/kodelife00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/kodelife01.png" target="_blank"><img src="./memoire/images/experiments/kodelife01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Input</em> de la <em>frame</em> précédente // <em>Input</em> du temps</figcaption>
</figure>
<figure id="kodelife03">
<a href="./memoire/images/experiments/kodelife02.png" target="_blank"><img src="./memoire/images/experiments/kodelife02.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/kodelife03.png" target="_blank"><img src="./memoire/images/experiments/kodelife03.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Input</em> de l’audio // <em>Input</em> de l’éditeur de Kodelife</figcaption>
</figure>
<p>Au début, j’ai été déconcerté en voyant que KodeLife représentait un
fichier MIDI sous la forme d’une image en niveaux de gris. Cependant,
grâce aux conseils de z0rg, j’ai finalement pu comprendre la
situation.</p>
<p>La principale difficulté réside dans la conceptualisation du fait
qu’un son puisse être représenté par une texture. Cette idée peut
sembler peu intuitive au départ, mais elle est en réalité très logique.
En effet, la musique est généralement représentée par une structure
MIDI, qui est essentiellement une organisation de données. Cependant,
rien n’empêche de représenter ces données sous forme d’une image, où
chaque <em>pixel</em> correspond à un échantillon du fichier MIDI.</p>
<p>En utilisant le langage de <em>shader</em> GLSL, il est ensuite
possible d’extraire les informations désirées à partir des
<em>pixels</em> de la texture, de la même manière que l’on accéderait à
n’importe quelle autre texture. Par exemple, un <em>pixel</em> aux
coordonnées <span class="math inline">\((x, y)\)</span> pourrait
contenir les informations NoteOn/NoteOff de la note LA à l’octave 1.</p>
<p>Sur la documentation officielle de KodeLife, on trouve des
indications sur l’<em>offset</em> à respecter pour obtenir les
informations souhaitées. Par exemple, pour récupérer la vélocité<a
href="#fn75" class="footnote-ref" id="fnref75"
role="doc-noteref"><sup>75</sup></a> (<em>velocity</em> en anglais)
d’une note à partir du signal <code>Note On</code>, on peut utiliser le
bout de code suivant : <code>texture[1*127+note] = velocity</code>.</p>
<p>Malheureusement, les recommandations fournies par la documentation
sont inexactes, tout comme l’exemple accessible directement dans
KodeLife. Pour résoudre ce problème, j’ai dû littéralement « compter »
les rangées et les colonnes de <em>pixels</em> à partir de flux MIDI
très minimalistes afin de trouver les bonnes valeurs. Cette tâche s’est
avérée très fastidieuse et m’a conduit à entreprendre une étude
approfondie de la structure d’un fichier MIDI afin de ne plus travailler
à l’aveugle.</p>
<h2 id="le-protocole-midi">Le protocole MIDI</h2>
<p>Le MIDI, ou <em>Musical Instrument Digital Interface</em>, est un
protocole destiné à la transmission et au stockage d’informations
relatives à la performance musicale. Ce format existe depuis près de
quarante ans (la norme est mise au point en 1982), et sa longévité est
due à son efficacité à utiliser les données numériques pour transmettre
des informations musicales.</p>
<p>Dans le domaine musical, la précision du timing est primordiale, ce
qui nécessite des communications rapides et efficaces. Pour comprendre
l’efficacité du MIDI, il est essentiel de revenir sur quelques concepts
de base tels que les bits, les octets et le système binaire. Un bit est
une unité binaire ayant deux états : soit <span
class="math inline">\(0\)</span>, soit <span
class="math inline">\(1\)</span>. Les ordinateurs comptent en binaire,
ce qui diffère du système décimal que nous utilisons habituellement. Par
exemple, en binaire, trois chiffres peuvent représenter jusqu’à huit
valeurs différentes (<span class="math inline">\(2^3\)</span>), tandis
qu’en décimal, trois chiffres peuvent représenter jusqu’à mille valeurs
(<span class="math inline">\(10^3\)</span>).</p>
<p>Dans le système binaire, le nombre de valeurs qu’un octet (un groupe
de huit bits) peut représenter est <span
class="math inline">\(2^8\)</span>, soit <span
class="math inline">\(256\)</span>. Le MIDI utilise principalement des
messages composés de deux ou trois octets. Ces octets sont classés en
deux catégories : les octets de statut et les octets de données. Les
octets de statut indiquent la nature de l’action à effectuer (par
exemple, le signal <code>Note On</code>), tandis que les octets de
données fournissent les valeurs correspondantes (dans mon cas je
recherche la vélocité).</p>
<figure id="midi00">
<a href="./memoire/images/experiments/midi00.jpg" target="_blank"><img src="./memoire/images/experiments/midi00.jpg" style="width:90%" /></a>
<figcaption>Structure d’un octet de données</figcaption>
</figure>
<p>En MIDI, le premier bit d’un octet de statut est toujours un <span
class="math inline">\(1\)</span>, et le premier bit d’un octet de
données est toujours un <span class="math inline">\(0\)</span>. Ainsi,
un octet de données ne dispose que de sept bits pour coder
l’information, soit <span class="math inline">\(2^7\)</span> (128
valeurs différentes). Ce nombre, de <span
class="math inline">\(0\)</span> à <span
class="math inline">\(127\)</span>, peut couvrir la gamme des hauteurs
MIDI, des vélocités MIDI, des informations de contrôleur, ainsi que les
instruments du General MIDI (numérotés de <span
class="math inline">\(1\)</span> à <span
class="math inline">\(128\)</span>).</p>
<p>La limitation à <span class="math inline">\(128\)</span> valeurs peut
sembler restreinte, mais pour la plupart des applications musicales,
cette gamme est suffisante. En effet, cela permet de stocker une grande
quantité d’informations dans un espace réduit, ce qui est
particulièrement efficace pour le stockage et la transmission de
données.</p>
<h3 class="unnumbered" id="canal-midi">Canal MIDI</h3>
<p>La désignation du canal MIDI occupe une partie de l’octet de statut,
permettant de configurer les appareils MIDI pour qu’ils répondent
uniquement aux messages transmis sur des canaux spécifiques. Par
exemple, un synthétiseur peut être configuré pour écouter les canaux 7,
8 et 9, en ignorant les autres. Cela offre une flexibilité dans la
gestion des flux d’informations MIDI entre différents appareils. Définir
le canal MIDI dans l’octet de statut permet de cibler les informations à
recevoir par un instrument MIDI spécifique. Par exemple, chaque
instrument peut être assigné à un canal MIDI différent, permettant une
gestion précise des messages envoyés à chaque instrument.</p>
<h3 class="unnumbered" id="octet-de-statut-et-types-de-messages">Octet
de statut et types de messages</h3>
<p>Un octet de statut est composé de huit bits. Le premier bit à <span
class="math inline">\(0\)</span> indique que l’octet représente un octet
de statut. Les trois bits suivants désignent le type de message, tandis
que les quatre derniers bits représentent le canal MIDI. Avec quatre
bits pour le canal, il existe seize canaux MIDI différents. Concernant
le type de message, trois bits permettent huit types de messages MIDI.
Nous analysons en annexe <a href="#appendix:midi"
data-reference-type="ref" data-reference="appendix:midi">11</a> les sept
premiers types de messages MIDI, laissant de côté le huitième qui est
spécifique au fabricant et à l’horloge MIDI.</p>
<figure id="midi01">
<a href="./memoire/images/experiments/midi01.png" target="_blank"><img src="./memoire/images/experiments/midi01.png" style="width:90%" /></a>
<figcaption>Exemple du message <em>Note On</em></figcaption>
</figure>
<h3 class="unnumbered" id="conclusion-2">Conclusion</h3>
<p>Pour résumer, les messages MIDI représentent le langage standard
utilisé par de nombreux appareils pour communiquer entre eux. Ils se
caractérisent par une structure bien définie, où les informations sont
stockées sous forme d’octets de statut et d’octets de données. Un
message MIDI est donc formé d’un octet de statut, qui indique le type de
message et le canal de transmission, suivi d’un ou deux octets de
données fournissant des détails sur les valeurs du message. Cette
structure assure la cohérence et l’interprétation correcte des
informations transmises.</p>
<p>Il est important de souligner qu’aujourd’hui, le MIDI n’est pas
l’unique moyen de transmission de données musicales. Toutefois, il
demeure largement utilisé. De nouvelles technologies telles que l’OSC<a
href="#fn76" class="footnote-ref" id="fnref76"
role="doc-noteref"><sup>76</sup></a> (<em>Open Sound Control</em>) et le
MIDI à haute résolution émergent, offrant ainsi des opportunités
innovantes pour la communication et un contrôle musical plus raffiné.
Cependant, cela n’indique pas une obsolescence imminente du protocole
MIDI original.</p>
<p>Ainsi, en approfondissant ma compréhension de la structure d’un
fichier MIDI, j’ai pu accéder aux données souhaitées dans KodeLife. Il a
simplement fallu attribuer chaque note d’un clavier MIDI en piochant
dans la texture MIDI, puis normaliser ces valeurs pour animer toute
variable définie dans le code GLSL.</p>
<h1 id="conclusion-3">Conclusion</h1>
<p>Dans ce mémoire, j’ai exploré les origines de l’art de la
<em>demoscene</em> et examiné les techniques essentielles pour une
performance de <em>livecoding</em> de <em>shaders</em> réussie. Par la
suite, j’ai centré mon analyse sur l’interaction authentique entre la
musique et le visuel, dans l’espoir de contribuer modestement à
l’évolution de la <em>demoscene</em>.</p>
<h5 class="unnumbered" id="mes-expérimentations">Mes
expérimentations</h5>
<p>Au cours de mes explorations, j’ai réalisé quelques expérimentations
disponibles sur Vimeo. Bien qu’en l’état peu ambitieuses, elles servent
de preuve de concept<a href="#fn77" class="footnote-ref" id="fnref77"
role="doc-noteref"><sup>77</sup></a> : si j’ai réussi à modifier le
rayon d’un cercle uniquement avec la vélocité de la note jouée, cela
démontre la possibilité d’agir sur n’importe quelle variable définie
dans le code GLSL (voir <a href="#experim00" data-reference-type="ref"
data-reference="experim00">[experim00]</a> et <a href="#experim01"
data-reference-type="ref" data-reference="experim01">8.1</a> <a
href="https://vimeo.com/user167850166">sur ma page Vimeo</a>).</p>
<figure id="experim01">
<a href="./memoire/images/experiments/intensifs/experim00.png" target="_blank"><img src="./memoire/images/experiments/intensifs/experim00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/intensifs/experim01.png" target="_blank"><img src="./memoire/images/experiments/intensifs/experim01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Live</em> avec une musique composée en <code>C</code> // <em>Live</em> avec une note aléatoire</figcaption>
</figure>
<p>Maintenant que j’ai confirmé que les mécanismes interactifs
nécessaires sont déjà établis et fonctionnels, je suis prêt à explorer
ce nouveau <em>pipeline</em> qui répond parfaitement à mes attentes. À
chaque itération, j’améliore le flux de travail en factorisant le code,
en ajoutant des fonctionnalités, en peaufinant l’animation, etc. (voir
<a href="#experim03" data-reference-type="ref"
data-reference="experim03">[experim03]</a> et <a href="#experim02"
data-reference-type="ref" data-reference="experim02">8.2</a>)</p>
<figure id="experim02">
<a href="./memoire/images/experiments/experim03.png" target="_blank"><img src="./memoire/images/experiments/experim03.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/experiments/experim02.png" target="_blank"><img src="./memoire/images/experiments/experim02.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption><em>Live</em> avec Orca // <em>Hack</em> pour la transparence d’Orca</figcaption>
</figure>
<h5 class="unnumbered" id="journée-détude-sur-le-live-coding">Journée
d’étude sur le <em>live coding</em></h5>
<p>Un récent événement qui a profondément marqué mon expérience était la
« journée d’étude sur le live coding », orchestrée par Raphaël Forment,
Rémi Georges et Agathe Herrou à la Maison des Sciences de l’Homme à La
Plaine St-Denis (voir <a href="#jlc00" data-reference-type="ref"
data-reference="jlc00">8.3</a>). Cette journée comprenait une série de
conférences suivies de performances sonores et visuelles. C’est lors de
cet événement que j’ai vraiment pris conscience que le
<em>livecoding</em> était un véritable domaine de recherche et de
création, réunissant des artistes, des chercheurs et des passionnés aux
parcours différents autour d’un geste commun : celui de manipuler du
code source « à la volée » dans un but d’expression artistique et de
création. Une présentation qui a captivé mon attention est celle de
Vincent Rioux : <em>Redécouvrir le live-coding en LISP, i-a-d-d-la-joie
! – Utiliser Lisp et Supercollider avec une intelligence simple</em>.
Son travail met en avant la création d’un lien entre la musique et les
arts visuels, notamment entre les Beaux-Arts de Paris et l’IRCAM
(Institut de Recherche et de Coordination Acoustique/Musique). Je
prévois d’approfondir ses travaux, car les sujets qu’il aborde semblent
étroitement liés aux miens.</p>
<figure id="jlc00">
<a href="./memoire/images/jlc_affiche.png" target="_blank"><img src="./memoire/images/jlc_affiche.png" style="width:90.0%" /></a>
<figcaption>Affiche de la journée d’étude sur le
<em>livecoding</em></figcaption>
</figure>
<h5 class="unnumbered"
id="vers-un-mélange-des-arts-et-la-démocratisation-de-la-demoscene">Vers
un mélange des arts et la démocratisation de la <em>demoscene</em></h5>
<p>Grâce aux rencontres que j’ai pu faire cette année lors des
événements organisés par le Cookie Collective, j’ai eu l’opportunité
d’explorer de nouvelles perspectives. En particulier, ma brève rencontre
avec Alexandre et Sharlaine, les organisateurs du Playground (voir <a
href="#peanut" data-reference-type="ref"
data-reference="peanut">8.4</a>), un événement dédié au <em>creative
coding</em> à Bordeaux, m’a profondément inspiré (leur site est
consultable <a href="https://plgrnd.cc/">ici</a>). Leur approche
originale renforce mon désir de rendre la <em>demoscene</em> plus
accessible en mettant l’accent sur la diffusion d’une éducation
technique capable de sensibiliser et d’impliquer un public plus large.
De plus, leur collaboration en tant que duo, « La Peanut », qui combine
le <em>livecoding</em>, le théâtre et la poésie, reflète également mes
aspirations à faire progresser mes recherches et mes créations
numériques vers un « mélange des arts ». Ces arts pourraient inclure des
récitations de texte (narratives ou non), l’intégration d’instruments
acoustiques ou encore la manipulation de vidéos en direct.</p>
<figure id="peanut">
<a href="./memoire/images/conclusion/peanut00.png" target="_blank"><img src="./memoire/images/conclusion/peanut00.png" alt="Image 1" class="side-by-side2"/></a>
<a href="./memoire/images/conclusion/peanut01.png" target="_blank"><img src="./memoire/images/conclusion/peanut01.png" alt="Image 2" class="side-by-side2"/></a>
<figcaption>Programmes du Playground organisé par Alexandre</figcaption>
</figure>
<h5 class="unnumbered" id="vers-une-communication-réseau">Vers une
communication réseau</h5>
<p>Jusqu’à présent, mes expérimentations techniques ont été réalisées
sur une seule machine. Cependant, comme l’indique le titre de mon
mémoire, « <em>Vers une interaction authentique entre livecoders</em> »,
cela illustre également mon désir initial d’impliquer plusieurs
<em>livecoders</em> au cours d’une même performance. En pratique, un
<em>livecoder</em> serait responsable de la création musicale sur Orca
et enverrait les informations MIDI via le réseau à une autre machine
contrôlée par un <em>livecoder</em> de <em>shaders</em>. Cet objectif
constituait le cœur de mon intensif en M2. Malheureusement, notre groupe
a dû faire face à de nombreuses complications, à la fois matérielles et
logistiques, qui nous ont empêché d’atteindre cet objectif dans les
délais impartis. Cependant, avec le recul, j’ai découvert l’existence de
solutions déjà disponibles qui auraient pu nous faciliter la
réalisation. Parmi les solutions envisagées, je compte explorer Troop et
Flok, des logiciels permettant à plusieurs utilisateurs de pratiquer le
<em>livecoding</em> musical sur un serveur commun. Dans mes futures
recherches, je m’efforcerai de trouver une solution équivalente mais
orientée vers l’intégration collaborative du visuel et du sonore.</p>
<figure id="stribe00">
<a href="./memoire/images/conclusion/stribe.png" target="_blank"><img src="./memoire/images/conclusion/stribe.png" style="width:90.0%" /></a>
<figcaption>Goodbye!</figcaption>
</figure>
<h1 id="appendix:orcaops">Liste opérateurs Orca</h1>
<h2 class="unnumbered" id="en-anglais">En anglais</h2>
<ul>
<li><p><strong>A</strong> : add(a b) – Outputs sum of inputs.</p></li>
<li><p><strong>B</strong> : subtract(a b) – Outputs difference of
inputs.</p></li>
<li><p><strong>C</strong> : clock(rate mod) – Outputs modulo of
frame.</p></li>
<li><p><strong>D</strong> : delay(rate mod) – Bangs on modulo of
frame.</p></li>
<li><p><strong>E</strong> : east – Moves eastward, or bangs.</p></li>
<li><p><strong>F</strong> : if(a b) – Bangs if inputs are
equal.</p></li>
<li><p><strong>G</strong> : generator(x y len) – Writes operands with
offset.</p></li>
<li><p><strong>H</strong> : halt – Halts southward operand.</p></li>
<li><p><strong>I</strong> : increment(step mod) – Increments southward
operand.</p></li>
<li><p><strong>J</strong> : jumper(val) – Outputs northward
operand.</p></li>
<li><p><strong>K</strong> : konkat(len) – Reads multiple
variables.</p></li>
<li><p><strong>L</strong> : lesser(a b) – Outputs smallest of
inputs.</p></li>
<li><p><strong>M</strong> : multiply(a b) – Outputs product of
inputs.</p></li>
<li><p><strong>N</strong> : north – Moves Northward, or bangs.</p></li>
<li><p><strong>O</strong> : read(x y read) – Reads operand with
offset.</p></li>
<li><p><strong>P</strong> : push(len key val) – Writes eastward
operand.</p></li>
<li><p><strong>Q</strong> : query(x y len) – Reads operands with
offset.</p></li>
<li><p><strong>R</strong> : random(min max) – Outputs random
value.</p></li>
<li><p><strong>S</strong> : south – Moves southward, or bangs.</p></li>
<li><p><strong>T</strong> : track(key len val) – Reads eastward
operand.</p></li>
<li><p><strong>U</strong> : uclid(step max) – Bangs on Euclidean
rhythm.</p></li>
<li><p><strong>V</strong> : variable(write read) – Reads and writes
variable.</p></li>
<li><p><strong>W</strong> : west – Moves westward, or bangs.</p></li>
<li><p><strong>X</strong> : write(x y val) – Writes operand with
offset.</p></li>
<li><p><strong>Y</strong> : jymper(val) – Outputs westward
operand.</p></li>
<li><p><strong>Z</strong> : lerp(rate target) – Transitions operand to
input.</p></li>
<li><p><strong>*</strong> : bang – Bangs neighboring operands.</p></li>
<li><p><strong>#</strong> : comment – Halts a line.</p></li>
<li><p><strong>:</strong> : midi(channel octave note velocity length) –
Sends a MIDI note.</p></li>
<li><p><strong>%</strong> : mono(channel octave note velocity length) –
Sends monophonic MIDI note.</p></li>
<li><p><strong>!</strong> : cc(channel knob value) – Sends MIDI control
change.</p></li>
<li><p><strong>?</strong> : pb(channel value) – Sends MIDI pitch
bend.</p></li>
<li><p><strong>;</strong> : udp – Sends UDP message.</p></li>
<li><p><strong>=</strong> : osc(path) – Sends OSC message.</p></li>
<li><p><strong>$</strong> : self – Sends ORCA commands.</p></li>
</ul>
<h2 class="unnumbered" id="en-français">En français</h2>
<ul>
<li><p><strong>A</strong> : add(a b) – Renvoie la somme des
entrées.</p></li>
<li><p><strong>B</strong> : subtract(a b) – Renvoie la différence des
entrées.</p></li>
<li><p><strong>C</strong> : clock(rate mod) – Renvoie le modulo de la
<em>frame</em>.</p></li>
<li><p><strong>D</strong> : delay(rate mod) – Déclenche un <em>bang</em>
sur le modulo de la <em>frame</em>.</p></li>
<li><p><strong>E</strong> : east – Se déplace vers l’est, ou déclenche
un <em>bang</em>.</p></li>
<li><p><strong>F</strong> : if(a b) – Déclenche si les entrées sont
égales.</p></li>
<li><p><strong>G</strong> : generator(x y len) – Écrit les opérandes
avec un <em>offset</em>.</p></li>
<li><p><strong>H</strong> : halt – Arrête l’opérateur Sud.</p></li>
<li><p><strong>I</strong> : increment(step mod) – Incrémente l’opérateur
Sud.</p></li>
<li><p><strong>J</strong> : jumper(val) – Renvoie l’opérande vers le
nord.</p></li>
<li><p><strong>K</strong> : konkat(len) – Lit plusieurs
variables.</p></li>
<li><p><strong>L</strong> : lesser(a b) – Renvoie la plus petite des
entrées.</p></li>
<li><p><strong>M</strong> : multiply(a b) – Renvoie le produit des
entrées.</p></li>
<li><p><strong>N</strong> : north – Se déplace vers le nord, ou
déclenche un <em>bang</em>.</p></li>
<li><p><strong>O</strong> : read(x y read) – Lit l’opérande avec un
décalage.</p></li>
<li><p><strong>P</strong> : push(len key val) – Écrit l’opérande vers
l’est.</p></li>
<li><p><strong>Q</strong> : query(x y len) – Lit les opérandes avec un
décalage.</p></li>
<li><p><strong>R</strong> : random(min max) – Renvoie une valeur
aléatoire.</p></li>
<li><p><strong>S</strong> : south – Se déplace vers le sud, ou déclenche
un <em>bang</em>.</p></li>
<li><p><strong>T</strong> : track(key len val) – Lit l’opérande vers
l’est.</p></li>
<li><p><strong>U</strong> : uclid(step max) – Déclenche sur un rythme
euclidien.</p></li>
<li><p><strong>V</strong> : variable(écrire lire) – Lit et écrit une
variable.</p></li>
<li><p><strong>W</strong> : west – Se déplace vers l’ouest, ou déclenche
un <em>bang</em>.</p></li>
<li><p><strong>X</strong> : write(x y val) – Écrit l’opérande avec un
décalage.</p></li>
<li><p><strong>Y</strong> : jymper(val) – Renvoie l’opérande vers
l’ouest.</p></li>
<li><p><strong>Z</strong> : lerp(rate target) – Transitions de
l’opérande vers l’entrée.</p></li>
<li><p><strong>*</strong> : bang – Déclenche les opérandes
voisines.</p></li>
<li><p><strong>#</strong> : comment – Arrête une ligne.</p></li>
<li><p><strong>:</strong> : midi(canal octave note vélocité durée) –
Envoie une note MIDI.</p></li>
<li><p><strong>%</strong> : mono(canal octave note vélocité durée) –
Envoie une note MIDI monophonique.</p></li>
<li><p><strong>!</strong> : cc(canal bouton valeur) – Envoie un message
de changement de contrôle MIDI.</p></li>
<li><p><strong>?</strong> : pb(canal valeur) – Envoie un message de
pitch bend MIDI.</p></li>
<li><p><strong>;</strong> : udp – Envoie un message UDP.</p></li>
<li><p><strong>=</strong> : osc(chemin) – Envoie un message
OSC.</p></li>
<li><p><strong>$</strong> : self – Envoie des commandes ORCA.</p></li>
</ul>
<h1 id="appendix:codemidi">Code C/C++ pour composer de la musique</h1>
<div class="sourceCode" id="cb65" data-language="C++"
data-caption="CPP MIDI" data-captionpos="b"><pre
class="sourceCode c++"><code class="sourceCode cpp"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span><span class="pp">   </span><span class="co">// For std::vector&lt;&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstring&gt;</span><span class="pp">  </span><span class="co">// For std::strlen()</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span><span class="pp">   </span><span class="co">// For std::fopen(), std::fwrite(), std::fclose()</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">unsigned</span> <span class="dt">char</span> byte<span class="op">;</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* First define a custom wrapper over std::vector&lt;byte&gt;</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co"> * so we can quickly push_back multiple bytes with a single call.</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MIDIvec<span class="op">:</span> <span class="kw">public</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>byte<span class="op">&gt;</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Methods for appending raw data into the vector:</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> Args<span class="op">&gt;</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddBytes<span class="op">(</span>byte data<span class="op">,</span> Args<span class="op">...</span>args<span class="op">)</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>        push_back<span class="op">(</span>data<span class="op">);</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>        AddBytes<span class="op">(</span>args<span class="op">...);</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> Args<span class="op">&gt;</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddBytes<span class="op">(</span><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> Args<span class="op">...</span>args<span class="op">)</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>        insert<span class="op">(</span>end<span class="op">(),</span> s<span class="op">,</span> s <span class="op">+</span> <span class="bu">std::</span>strlen<span class="op">(</span>s<span class="op">));</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>        AddBytes<span class="op">(</span>args<span class="op">...);</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddBytes<span class="op">()</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a><span class="co">/* Define a class which encodes MIDI events into a track */</span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MIDItrack<span class="op">:</span> <span class="kw">public</span> MIDIvec</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a><span class="kw">protected</span><span class="op">:</span></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> delay<span class="op">,</span> running_status<span class="op">;</span></span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>    MIDItrack<span class="op">()</span></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> MIDIvec<span class="op">(),</span> delay<span class="op">(</span><span class="dv">0</span><span class="op">),</span> running_status<span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Methods for indicating how much time elapses:</span></span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddDelay<span class="op">(</span><span class="dt">unsigned</span> amount<span class="op">)</span> <span class="op">{</span> delay <span class="op">+=</span> amount<span class="op">;</span> <span class="op">}</span></span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddVarLen<span class="op">(</span><span class="dt">unsigned</span> t<span class="op">)</span></span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>t <span class="op">&gt;&gt;</span> <span class="dv">21</span><span class="op">)</span> AddBytes<span class="op">(</span><span class="bn">0x80</span> <span class="op">|</span> <span class="op">((</span>t <span class="op">&gt;&gt;</span> <span class="dv">21</span><span class="op">)</span> <span class="op">&amp;</span> <span class="bn">0x7F</span><span class="op">));</span></span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>t <span class="op">&gt;&gt;</span> <span class="dv">14</span><span class="op">)</span> AddBytes<span class="op">(</span><span class="bn">0x80</span> <span class="op">|</span> <span class="op">((</span>t <span class="op">&gt;&gt;</span> <span class="dv">14</span><span class="op">)</span> <span class="op">&amp;</span> <span class="bn">0x7F</span><span class="op">));</span></span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>t <span class="op">&gt;&gt;</span>  <span class="dv">7</span><span class="op">)</span> AddBytes<span class="op">(</span><span class="bn">0x80</span> <span class="op">|</span> <span class="op">((</span>t <span class="op">&gt;&gt;</span>  <span class="dv">7</span><span class="op">)</span> <span class="op">&amp;</span> <span class="bn">0x7F</span><span class="op">));</span></span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>        AddBytes<span class="op">(((</span>t <span class="op">&gt;&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">&amp;</span> <span class="bn">0x7F</span><span class="op">));</span></span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Flush<span class="op">()</span></span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a>        AddVarLen<span class="op">(</span>delay<span class="op">);</span></span>
<span id="cb65-54"><a href="#cb65-54" aria-hidden="true" tabindex="-1"></a>        delay <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb65-55"><a href="#cb65-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Methods for appending events into the track:</span></span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> Args<span class="op">&gt;</span></span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddEvent<span class="op">(</span>byte data<span class="op">,</span> Args<span class="op">...</span>args<span class="op">)</span></span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* MIDI tracks have the following structure:</span></span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a><span class="co">         *</span></span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a><span class="co">         * { timestamp [metaevent ... ] event } ...</span></span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a><span class="co">         *</span></span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a><span class="co">         * Each event is prefixed with a timestamp,</span></span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a><span class="co">         * which is encoded in a variable-length format.</span></span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a><span class="co">         * The timestamp describes the amount of time that</span></span>
<span id="cb65-68"><a href="#cb65-68" aria-hidden="true" tabindex="-1"></a><span class="co">         * must be elapsed before this event can be handled.</span></span>
<span id="cb65-69"><a href="#cb65-69" aria-hidden="true" tabindex="-1"></a><span class="co">         *</span></span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a><span class="co">         * After the timestamp, comes the event data.</span></span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a><span class="co">         * The first byte of the event always has the high bit on,</span></span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a><span class="co">         * and the remaining bytes always have the high bit off.</span></span>
<span id="cb65-73"><a href="#cb65-73" aria-hidden="true" tabindex="-1"></a><span class="co">         *</span></span>
<span id="cb65-74"><a href="#cb65-74" aria-hidden="true" tabindex="-1"></a><span class="co">         * The first byte can however be omitted; in that case,</span></span>
<span id="cb65-75"><a href="#cb65-75" aria-hidden="true" tabindex="-1"></a><span class="co">         * it is assumed that the first byte is the same as in</span></span>
<span id="cb65-76"><a href="#cb65-76" aria-hidden="true" tabindex="-1"></a><span class="co">         * the previous command. This is called &quot;running status&quot;.</span></span>
<span id="cb65-77"><a href="#cb65-77" aria-hidden="true" tabindex="-1"></a><span class="co">         * The event may furthermore beprefixed</span></span>
<span id="cb65-78"><a href="#cb65-78" aria-hidden="true" tabindex="-1"></a><span class="co">         * with a number of meta events.</span></span>
<span id="cb65-79"><a href="#cb65-79" aria-hidden="true" tabindex="-1"></a><span class="co">         */</span></span>
<span id="cb65-80"><a href="#cb65-80" aria-hidden="true" tabindex="-1"></a>       Flush<span class="op">();</span></span>
<span id="cb65-81"><a href="#cb65-81" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span><span class="op">(</span>data <span class="op">!=</span> running_status<span class="op">)</span> AddBytes<span class="op">(</span>running_status <span class="op">=</span> data<span class="op">);</span></span>
<span id="cb65-82"><a href="#cb65-82" aria-hidden="true" tabindex="-1"></a>       AddBytes<span class="op">(</span>args<span class="op">...);</span></span>
<span id="cb65-83"><a href="#cb65-83" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-84"><a href="#cb65-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddEvent<span class="op">()</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb65-85"><a href="#cb65-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-86"><a href="#cb65-86" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> Args<span class="op">&gt;</span></span>
<span id="cb65-87"><a href="#cb65-87" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddMetaEvent<span class="op">(</span>byte metatype<span class="op">,</span> byte nbytes<span class="op">,</span> Args<span class="op">...</span>args<span class="op">)</span></span>
<span id="cb65-88"><a href="#cb65-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-89"><a href="#cb65-89" aria-hidden="true" tabindex="-1"></a>        Flush<span class="op">();</span></span>
<span id="cb65-90"><a href="#cb65-90" aria-hidden="true" tabindex="-1"></a>        AddBytes<span class="op">(</span><span class="bn">0xFF</span><span class="op">,</span> metatype<span class="op">,</span> nbytes<span class="op">,</span> args<span class="op">...);</span></span>
<span id="cb65-91"><a href="#cb65-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-92"><a href="#cb65-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-93"><a href="#cb65-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Key-related parameters: channel number, note number, pressure</span></span>
<span id="cb65-94"><a href="#cb65-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> KeyOn<span class="op">(</span><span class="dt">int</span> ch<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> p<span class="op">)</span>    <span class="op">{</span> <span class="cf">if</span><span class="op">(</span>n<span class="op">&gt;=</span><span class="dv">0</span><span class="op">)</span>AddEvent<span class="op">(</span><span class="bn">0x90</span><span class="op">|</span>ch<span class="op">,</span> n<span class="op">,</span> p<span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-95"><a href="#cb65-95" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> KeyOff<span class="op">(</span><span class="dt">int</span> ch<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> p<span class="op">)</span>   <span class="op">{</span> <span class="cf">if</span><span class="op">(</span>n<span class="op">&gt;=</span><span class="dv">0</span><span class="op">)</span>AddEvent<span class="op">(</span><span class="bn">0x80</span><span class="op">|</span>ch<span class="op">,</span> n<span class="op">,</span> p<span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-96"><a href="#cb65-96" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> KeyTouch<span class="op">(</span><span class="dt">int</span> ch<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> p<span class="op">)</span> <span class="op">{</span> <span class="cf">if</span><span class="op">(</span>n<span class="op">&gt;=</span><span class="dv">0</span><span class="op">)</span>AddEvent<span class="op">(</span><span class="bn">0xA0</span><span class="op">|</span>ch<span class="op">,</span> n<span class="op">,</span> p<span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-97"><a href="#cb65-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Events with other types of parameters:</span></span>
<span id="cb65-98"><a href="#cb65-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Control<span class="op">(</span><span class="dt">int</span> ch<span class="op">,</span> <span class="dt">int</span> c<span class="op">,</span> <span class="dt">int</span> v<span class="op">)</span> <span class="op">{</span> AddEvent<span class="op">(</span><span class="bn">0xB0</span><span class="op">|</span>ch<span class="op">,</span> c<span class="op">,</span> v<span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-99"><a href="#cb65-99" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Patch<span class="op">(</span><span class="dt">int</span> ch<span class="op">,</span> <span class="dt">int</span> patchno<span class="op">)</span>    <span class="op">{</span> AddEvent<span class="op">(</span><span class="bn">0xC0</span><span class="op">|</span>ch<span class="op">,</span> patchno<span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-100"><a href="#cb65-100" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Wheel<span class="op">(</span><span class="dt">int</span> ch<span class="op">,</span> <span class="dt">unsigned</span> value<span class="op">)</span></span>
<span id="cb65-101"><a href="#cb65-101" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> AddEvent<span class="op">(</span><span class="bn">0xE0</span><span class="op">|</span>ch<span class="op">,</span> value<span class="op">&amp;</span><span class="bn">0x7F</span><span class="op">,</span> <span class="op">(</span>value<span class="op">&gt;&gt;</span><span class="dv">7</span><span class="op">)&amp;</span><span class="bn">0x7F</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-102"><a href="#cb65-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-103"><a href="#cb65-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Methods for appending metadata into the track:</span></span>
<span id="cb65-104"><a href="#cb65-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddText<span class="op">(</span><span class="dt">int</span> texttype<span class="op">,</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*</span> text<span class="op">)</span></span>
<span id="cb65-105"><a href="#cb65-105" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-106"><a href="#cb65-106" aria-hidden="true" tabindex="-1"></a>        AddMetaEvent<span class="op">(</span>texttype<span class="op">,</span> <span class="bu">std::</span>strlen<span class="op">(</span>text<span class="op">),</span> text<span class="op">);</span></span>
<span id="cb65-107"><a href="#cb65-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-108"><a href="#cb65-108" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb65-109"><a href="#cb65-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-110"><a href="#cb65-110" aria-hidden="true" tabindex="-1"></a><span class="co">/* Define a class that encapsulates all methods needed to craft a MIDI file. */</span></span>
<span id="cb65-111"><a href="#cb65-111" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MIDIfile<span class="op">:</span> <span class="kw">public</span> MIDIvec</span>
<span id="cb65-112"><a href="#cb65-112" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb65-113"><a href="#cb65-113" aria-hidden="true" tabindex="-1"></a><span class="kw">protected</span><span class="op">:</span></span>
<span id="cb65-114"><a href="#cb65-114" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>vector<span class="op">&lt;</span>MIDItrack<span class="op">&gt;</span> tracks<span class="op">;</span></span>
<span id="cb65-115"><a href="#cb65-115" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> deltaticks<span class="op">,</span> tempo<span class="op">;</span></span>
<span id="cb65-116"><a href="#cb65-116" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb65-117"><a href="#cb65-117" aria-hidden="true" tabindex="-1"></a>    MIDIfile<span class="op">()</span></span>
<span id="cb65-118"><a href="#cb65-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> MIDIvec<span class="op">(),</span> tracks<span class="op">(),</span> deltaticks<span class="op">(</span><span class="dv">1000</span><span class="op">),</span> tempo<span class="op">(</span><span class="dv">1000000</span><span class="op">)</span></span>
<span id="cb65-119"><a href="#cb65-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-120"><a href="#cb65-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-121"><a href="#cb65-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-122"><a href="#cb65-122" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddLoopStart<span class="op">()</span>  <span class="op">{</span> <span class="op">(*</span><span class="kw">this</span><span class="op">)[</span><span class="dv">0</span><span class="op">].</span>AddText<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="st">&quot;loopStart&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-123"><a href="#cb65-123" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> AddLoopEnd<span class="op">()</span>    <span class="op">{</span> <span class="op">(*</span><span class="kw">this</span><span class="op">)[</span><span class="dv">0</span><span class="op">].</span>AddText<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="st">&quot;loopEnd&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb65-124"><a href="#cb65-124" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-125"><a href="#cb65-125" aria-hidden="true" tabindex="-1"></a>    MIDItrack<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">[]</span> <span class="op">(</span><span class="dt">unsigned</span> trackno<span class="op">)</span></span>
<span id="cb65-126"><a href="#cb65-126" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-127"><a href="#cb65-127" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>trackno <span class="op">&gt;=</span> tracks<span class="op">.</span>size<span class="op">())</span></span>
<span id="cb65-128"><a href="#cb65-128" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb65-129"><a href="#cb65-129" aria-hidden="true" tabindex="-1"></a>            tracks<span class="op">.</span>reserve<span class="op">(</span><span class="dv">16</span><span class="op">);</span></span>
<span id="cb65-130"><a href="#cb65-130" aria-hidden="true" tabindex="-1"></a>            tracks<span class="op">.</span>resize<span class="op">(</span>trackno<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb65-131"><a href="#cb65-131" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb65-132"><a href="#cb65-132" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb65-133"><a href="#cb65-133" aria-hidden="true" tabindex="-1"></a>        MIDItrack<span class="op">&amp;</span> result <span class="op">=</span> tracks<span class="op">[</span>trackno<span class="op">];</span></span>
<span id="cb65-134"><a href="#cb65-134" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>result<span class="op">.</span>empty<span class="op">())</span></span>
<span id="cb65-135"><a href="#cb65-135" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb65-136"><a href="#cb65-136" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Meta 0x58 (misc settings):</span></span>
<span id="cb65-137"><a href="#cb65-137" aria-hidden="true" tabindex="-1"></a>                <span class="co">//      time signature: 4/2</span></span>
<span id="cb65-138"><a href="#cb65-138" aria-hidden="true" tabindex="-1"></a>                <span class="co">//      ticks/metro:    24</span></span>
<span id="cb65-139"><a href="#cb65-139" aria-hidden="true" tabindex="-1"></a>                <span class="co">//      32nd per 1/4:   8</span></span>
<span id="cb65-140"><a href="#cb65-140" aria-hidden="true" tabindex="-1"></a>            result<span class="op">.</span>AddMetaEvent<span class="op">(</span><span class="bn">0x58</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span>  <span class="dv">4</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span><span class="dv">8</span><span class="op">);</span></span>
<span id="cb65-141"><a href="#cb65-141" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Meta 0x51 (tempo):</span></span>
<span id="cb65-142"><a href="#cb65-142" aria-hidden="true" tabindex="-1"></a>            result<span class="op">.</span>AddMetaEvent<span class="op">(</span><span class="bn">0x51</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span>  tempo<span class="op">&gt;&gt;</span><span class="dv">16</span><span class="op">,</span> tempo<span class="op">&gt;&gt;</span><span class="dv">8</span><span class="op">,</span> tempo<span class="op">);</span></span>
<span id="cb65-143"><a href="#cb65-143" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb65-144"><a href="#cb65-144" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb65-145"><a href="#cb65-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-146"><a href="#cb65-146" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-147"><a href="#cb65-147" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Finish<span class="op">()</span></span>
<span id="cb65-148"><a href="#cb65-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-149"><a href="#cb65-149" aria-hidden="true" tabindex="-1"></a>        clear<span class="op">();</span></span>
<span id="cb65-150"><a href="#cb65-150" aria-hidden="true" tabindex="-1"></a>        AddBytes<span class="op">(</span></span>
<span id="cb65-151"><a href="#cb65-151" aria-hidden="true" tabindex="-1"></a>            <span class="co">// MIDI signature (MThd and number 6)</span></span>
<span id="cb65-152"><a href="#cb65-152" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;MThd&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span></span>
<span id="cb65-153"><a href="#cb65-153" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Format number (1: multiple tracks, synchronous)</span></span>
<span id="cb65-154"><a href="#cb65-154" aria-hidden="true" tabindex="-1"></a>            <span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span></span>
<span id="cb65-155"><a href="#cb65-155" aria-hidden="true" tabindex="-1"></a>            tracks<span class="op">.</span>size<span class="op">()</span> <span class="op">&gt;&gt;</span> <span class="dv">8</span><span class="op">,</span> tracks<span class="op">.</span>size<span class="op">(),</span></span>
<span id="cb65-156"><a href="#cb65-156" aria-hidden="true" tabindex="-1"></a>            deltaticks    <span class="op">&gt;&gt;</span> <span class="dv">8</span><span class="op">,</span> deltaticks<span class="op">);</span></span>
<span id="cb65-157"><a href="#cb65-157" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span><span class="dt">unsigned</span> a<span class="op">=</span><span class="dv">0</span><span class="op">;</span> a<span class="op">&lt;</span>tracks<span class="op">.</span>size<span class="op">();</span> <span class="op">++</span>a<span class="op">)</span></span>
<span id="cb65-158"><a href="#cb65-158" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb65-159"><a href="#cb65-159" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Add meta 0x2F to the track, indicating the track end:</span></span>
<span id="cb65-160"><a href="#cb65-160" aria-hidden="true" tabindex="-1"></a>            tracks<span class="op">[</span>a<span class="op">].</span>AddMetaEvent<span class="op">(</span><span class="bn">0x2F</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb65-161"><a href="#cb65-161" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Add the track into the MIDI file:</span></span>
<span id="cb65-162"><a href="#cb65-162" aria-hidden="true" tabindex="-1"></a>            AddBytes<span class="op">(</span><span class="st">&quot;MTrk&quot;</span><span class="op">,</span></span>
<span id="cb65-163"><a href="#cb65-163" aria-hidden="true" tabindex="-1"></a>                tracks<span class="op">[</span>a<span class="op">].</span>size<span class="op">()</span> <span class="op">&gt;&gt;</span> <span class="dv">24</span><span class="op">,</span></span>
<span id="cb65-164"><a href="#cb65-164" aria-hidden="true" tabindex="-1"></a>                tracks<span class="op">[</span>a<span class="op">].</span>size<span class="op">()</span> <span class="op">&gt;&gt;</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb65-165"><a href="#cb65-165" aria-hidden="true" tabindex="-1"></a>                tracks<span class="op">[</span>a<span class="op">].</span>size<span class="op">()</span> <span class="op">&gt;&gt;</span>  <span class="dv">8</span><span class="op">,</span></span>
<span id="cb65-166"><a href="#cb65-166" aria-hidden="true" tabindex="-1"></a>                tracks<span class="op">[</span>a<span class="op">].</span>size<span class="op">()</span> <span class="op">&gt;&gt;</span>  <span class="dv">0</span><span class="op">);</span></span>
<span id="cb65-167"><a href="#cb65-167" aria-hidden="true" tabindex="-1"></a>            insert<span class="op">(</span>end<span class="op">(),</span> tracks<span class="op">[</span>a<span class="op">].</span>begin<span class="op">(),</span> tracks<span class="op">[</span>a<span class="op">].</span>end<span class="op">());</span></span>
<span id="cb65-168"><a href="#cb65-168" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb65-169"><a href="#cb65-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-170"><a href="#cb65-170" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb65-171"><a href="#cb65-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-172"><a href="#cb65-172" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb65-173"><a href="#cb65-173" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb65-174"><a href="#cb65-174" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Now that we have a class that can create MIDI files, let&#39;s create</span></span>
<span id="cb65-175"><a href="#cb65-175" aria-hidden="true" tabindex="-1"></a>    <span class="co">// music.</span></span>
<span id="cb65-176"><a href="#cb65-176" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-177"><a href="#cb65-177" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Begin with some chords.</span></span>
<span id="cb65-178"><a href="#cb65-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> chords<span class="op">[][</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span></span>
<span id="cb65-179"><a href="#cb65-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-180"><a href="#cb65-180" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">12</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">7</span> <span class="op">},</span> <span class="co">// +C  E  G  = 0</span></span>
<span id="cb65-181"><a href="#cb65-181" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">12</span><span class="op">,</span><span class="dv">9</span><span class="op">,</span><span class="dv">5</span> <span class="op">},</span> <span class="co">// +C  A  F  = 1</span></span>
<span id="cb65-182"><a href="#cb65-182" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">12</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">3</span> <span class="op">},</span> <span class="co">// +C  G# D# = 2</span></span>
<span id="cb65-183"><a href="#cb65-183" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">12</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">3</span> <span class="op">},</span> <span class="co">// +C  G  D# = 3</span></span>
<span id="cb65-184"><a href="#cb65-184" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">12</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">8</span> <span class="op">},</span> <span class="co">// +C  F  G# = 4</span></span>
<span id="cb65-185"><a href="#cb65-185" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">12</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">8</span> <span class="op">},</span> <span class="co">// +C  D# G# = 5</span></span>
<span id="cb65-186"><a href="#cb65-186" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">11</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">7</span> <span class="op">},</span> <span class="co">//  B  D  G  = 6</span></span>
<span id="cb65-187"><a href="#cb65-187" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">10</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">7</span> <span class="op">},</span> <span class="co">// A#  D  G  = 7</span></span>
<span id="cb65-188"><a href="#cb65-188" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">14</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">5</span> <span class="op">},</span> <span class="co">// +D  G  F  = 8</span></span>
<span id="cb65-189"><a href="#cb65-189" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">14</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">11</span> <span class="op">},</span><span class="co">// +D  G  B  = 9</span></span>
<span id="cb65-190"><a href="#cb65-190" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> <span class="dv">14</span><span class="op">,</span><span class="dv">19</span><span class="op">,</span><span class="dv">11</span> <span class="op">}</span><span class="co">// +D +G  B  = 10</span></span>
<span id="cb65-191"><a href="#cb65-191" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-192"><a href="#cb65-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">const</span> <span class="dt">char</span> x <span class="op">=</span> <span class="dv">99</span><span class="op">;</span> <span class="co">// Arbitrary value we use here to indicate &quot;no note&quot;</span></span>
<span id="cb65-193"><a href="#cb65-193" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">char</span> chordline<span class="op">[</span><span class="dv">64</span><span class="op">]</span> <span class="op">=</span></span>
<span id="cb65-194"><a href="#cb65-194" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-195"><a href="#cb65-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">0</span><span class="op">,</span>x<span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span>x<span class="op">,</span><span class="dv">0</span><span class="op">,</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span>x<span class="op">,</span><span class="dv">1</span><span class="op">,</span>x<span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span>x<span class="op">,</span><span class="dv">1</span><span class="op">,</span>x<span class="op">,</span>  <span class="dv">2</span><span class="op">,</span>x<span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span>x<span class="op">,</span><span class="dv">2</span><span class="op">,</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span>x<span class="op">,</span><span class="dv">3</span><span class="op">,</span>x<span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span>x<span class="op">,</span><span class="dv">3</span><span class="op">,</span>x<span class="op">,</span></span>
<span id="cb65-196"><a href="#cb65-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span><span class="op">,</span>x<span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span>x<span class="op">,</span><span class="dv">4</span><span class="op">,</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span>x<span class="op">,</span><span class="dv">5</span><span class="op">,</span>x<span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span>x<span class="op">,</span><span class="dv">5</span><span class="op">,</span>x<span class="op">,</span>  <span class="dv">6</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span>x<span class="op">,</span><span class="dv">8</span><span class="op">,</span>x<span class="op">,</span><span class="dv">9</span><span class="op">,</span>x<span class="op">,</span><span class="dv">10</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x</span>
<span id="cb65-197"><a href="#cb65-197" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-198"><a href="#cb65-198" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">char</span> chordline2<span class="op">[</span><span class="dv">64</span><span class="op">]</span> <span class="op">=</span></span>
<span id="cb65-199"><a href="#cb65-199" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-200"><a href="#cb65-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">0</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>  <span class="dv">2</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span></span>
<span id="cb65-201"><a href="#cb65-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>  <span class="dv">6</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span> <span class="dv">6</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x</span>
<span id="cb65-202"><a href="#cb65-202" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-203"><a href="#cb65-203" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">char</span> bassline<span class="op">[</span><span class="dv">64</span><span class="op">]</span> <span class="op">=</span></span>
<span id="cb65-204"><a href="#cb65-204" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-205"><a href="#cb65-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">0</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>  <span class="dv">8</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span><span class="dv">0</span><span class="op">,</span>x<span class="op">,</span><span class="dv">3</span><span class="op">,</span>x<span class="op">,</span> <span class="dv">7</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span></span>
<span id="cb65-206"><a href="#cb65-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>  <span class="dv">2</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,-</span><span class="dv">5</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span>x</span>
<span id="cb65-207"><a href="#cb65-207" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-208"><a href="#cb65-208" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">char</span> fluteline<span class="op">[</span><span class="dv">64</span><span class="op">]</span> <span class="op">=</span></span>
<span id="cb65-209"><a href="#cb65-209" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-210"><a href="#cb65-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">12</span><span class="op">,</span>x<span class="op">,</span><span class="dv">12</span><span class="op">,</span><span class="dv">12</span><span class="op">,</span> x<span class="op">,</span><span class="dv">9</span><span class="op">,</span> x<span class="op">,</span> <span class="dv">17</span><span class="op">,</span>x<span class="op">,</span><span class="dv">16</span><span class="op">,</span>x<span class="op">,</span><span class="dv">14</span><span class="op">,</span>x<span class="op">,</span><span class="dv">12</span><span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span></span>
<span id="cb65-211"><a href="#cb65-211" aria-hidden="true" tabindex="-1"></a>         <span class="dv">8</span><span class="op">,</span>x<span class="op">,</span> x<span class="op">,</span><span class="dv">15</span><span class="op">,</span><span class="dv">14</span><span class="op">,</span>x<span class="op">,</span><span class="dv">12</span><span class="op">,</span>  x<span class="op">,</span><span class="dv">7</span><span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span></span>
<span id="cb65-212"><a href="#cb65-212" aria-hidden="true" tabindex="-1"></a>         <span class="dv">8</span><span class="op">,</span>x<span class="op">,</span> x<span class="op">,</span> <span class="dv">8</span><span class="op">,</span><span class="dv">12</span><span class="op">,</span>x<span class="op">,</span> <span class="dv">8</span><span class="op">,</span>  x<span class="op">,</span><span class="dv">7</span><span class="op">,</span> x<span class="op">,</span><span class="dv">8</span><span class="op">,</span> x<span class="op">,</span><span class="dv">3</span><span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span>x<span class="op">,</span></span>
<span id="cb65-213"><a href="#cb65-213" aria-hidden="true" tabindex="-1"></a>         <span class="dv">5</span><span class="op">,</span>x<span class="op">,</span> <span class="dv">7</span><span class="op">,</span> x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span>x<span class="op">,-</span><span class="dv">5</span><span class="op">,</span>  x<span class="op">,</span><span class="dv">5</span><span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span> x<span class="op">,</span>x<span class="op">,</span>x</span>
<span id="cb65-214"><a href="#cb65-214" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-215"><a href="#cb65-215" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-216"><a href="#cb65-216" aria-hidden="true" tabindex="-1"></a>    MIDIfile file<span class="op">;</span></span>
<span id="cb65-217"><a href="#cb65-217" aria-hidden="true" tabindex="-1"></a>    file<span class="op">.</span>AddLoopStart<span class="op">();</span></span>
<span id="cb65-218"><a href="#cb65-218" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-219"><a href="#cb65-219" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* Choose instruments (&quot;patches&quot;) for each channel: */</span></span>
<span id="cb65-220"><a href="#cb65-220" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">char</span> patches<span class="op">[</span><span class="dv">16</span><span class="op">]</span> <span class="op">=</span></span>
<span id="cb65-221"><a href="#cb65-221" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-222"><a href="#cb65-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="dv">52</span><span class="op">,</span><span class="dv">52</span><span class="op">,</span><span class="dv">52</span><span class="op">,</span> <span class="dv">48</span><span class="op">,</span><span class="dv">48</span><span class="op">,</span><span class="dv">48</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="dv">35</span><span class="op">,</span><span class="dv">74</span></span>
<span id="cb65-223"><a href="#cb65-223" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 0=piano, 52=choir aahs, 48=strings, 35=fretless bass, 74=pan flute */</span></span>
<span id="cb65-224"><a href="#cb65-224" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-225"><a href="#cb65-225" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">unsigned</span> c<span class="op">=</span><span class="dv">0</span><span class="op">;</span> c<span class="op">&lt;</span><span class="dv">16</span><span class="op">;</span> <span class="op">++</span>c<span class="op">)</span></span>
<span id="cb65-226"><a href="#cb65-226" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>c <span class="op">!=</span> <span class="dv">10</span><span class="op">)</span> <span class="co">// Patch any other channel but not the percussion channel.</span></span>
<span id="cb65-227"><a href="#cb65-227" aria-hidden="true" tabindex="-1"></a>            file<span class="op">[</span><span class="dv">0</span><span class="op">].</span>Patch<span class="op">(</span>c<span class="op">,</span> patches<span class="op">[</span>c<span class="op">]);</span></span>
<span id="cb65-228"><a href="#cb65-228" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-229"><a href="#cb65-229" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> keys_on<span class="op">[</span><span class="dv">16</span><span class="op">]</span> <span class="op">=</span> <span class="op">{-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span><span class="op">,-</span><span class="dv">1</span> <span class="op">};</span></span>
<span id="cb65-230"><a href="#cb65-230" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">unsigned</span> loops<span class="op">=</span><span class="dv">0</span><span class="op">;</span> loops<span class="op">&lt;</span><span class="dv">2</span><span class="op">;</span> <span class="op">++</span>loops<span class="op">)</span></span>
<span id="cb65-231"><a href="#cb65-231" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb65-232"><a href="#cb65-232" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span><span class="dt">unsigned</span> row<span class="op">=</span><span class="dv">0</span><span class="op">;</span> row<span class="op">&lt;</span><span class="dv">128</span><span class="op">;</span> <span class="op">++</span>row<span class="op">)</span></span>
<span id="cb65-233"><a href="#cb65-233" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb65-234"><a href="#cb65-234" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span><span class="op">(</span><span class="dt">unsigned</span> c<span class="op">=</span><span class="dv">0</span><span class="op">;</span> c<span class="op">&lt;</span><span class="dv">16</span><span class="op">;</span> <span class="op">++</span>c<span class="op">)</span></span>
<span id="cb65-235"><a href="#cb65-235" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb65-236"><a href="#cb65-236" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> note <span class="op">=</span> x<span class="op">,</span> add <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> vol <span class="op">=</span> <span class="dv">127</span><span class="op">;</span></span>
<span id="cb65-237"><a href="#cb65-237" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(</span>c <span class="op">&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="co">// Piano chord</span></span>
<span id="cb65-238"><a href="#cb65-238" aria-hidden="true" tabindex="-1"></a>                  <span class="op">{</span> <span class="dt">int</span> chord <span class="op">=</span> chordline<span class="op">[</span>row<span class="op">%</span><span class="dv">64</span><span class="op">];</span></span>
<span id="cb65-239"><a href="#cb65-239" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span><span class="op">(</span>chord <span class="op">!=</span> x<span class="op">)</span> note <span class="op">=</span> chords<span class="op">[</span>chord<span class="op">][</span>c<span class="op">%</span><span class="dv">3</span><span class="op">],</span> add<span class="op">=</span><span class="dv">12</span><span class="op">*</span><span class="dv">5</span><span class="op">,</span> vol<span class="op">=</span><span class="bn">0x4B</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb65-240"><a href="#cb65-240" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span> <span class="cf">if</span><span class="op">(</span>c <span class="op">&gt;=</span> <span class="dv">3</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="co">// Aux chord (choir)</span></span>
<span id="cb65-241"><a href="#cb65-241" aria-hidden="true" tabindex="-1"></a>                  <span class="op">{</span> <span class="dt">int</span> chord <span class="op">=</span> chordline2<span class="op">[</span>row<span class="op">%</span><span class="dv">64</span><span class="op">];</span></span>
<span id="cb65-242"><a href="#cb65-242" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span><span class="op">(</span>chord <span class="op">!=</span> x<span class="op">)</span> note <span class="op">=</span> chords<span class="op">[</span>chord<span class="op">][</span>c<span class="op">%</span><span class="dv">3</span><span class="op">],</span> add<span class="op">=</span><span class="dv">12</span><span class="op">*</span><span class="dv">4</span><span class="op">,</span> vol<span class="op">=</span><span class="bn">0x50</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb65-243"><a href="#cb65-243" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span> <span class="cf">if</span><span class="op">(</span>c <span class="op">&gt;=</span> <span class="dv">6</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;</span> <span class="dv">8</span><span class="op">)</span> <span class="co">// Aux chord (strings)</span></span>
<span id="cb65-244"><a href="#cb65-244" aria-hidden="true" tabindex="-1"></a>                  <span class="op">{</span> <span class="dt">int</span> chord <span class="op">=</span> chordline2<span class="op">[</span>row<span class="op">%</span><span class="dv">64</span><span class="op">];</span></span>
<span id="cb65-245"><a href="#cb65-245" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span><span class="op">(</span>chord <span class="op">!=</span> x<span class="op">)</span> note <span class="op">=</span> chords<span class="op">[</span>chord<span class="op">][</span>c<span class="op">%</span><span class="dv">3</span><span class="op">],</span> add<span class="op">=</span><span class="dv">12</span><span class="op">*</span><span class="dv">5</span><span class="op">,</span> vol<span class="op">=</span><span class="bn">0x45</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb65-246"><a href="#cb65-246" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span> <span class="cf">if</span><span class="op">(</span>c <span class="op">==</span> <span class="dv">14</span><span class="op">)</span> <span class="co">// Bass</span></span>
<span id="cb65-247"><a href="#cb65-247" aria-hidden="true" tabindex="-1"></a>                    note <span class="op">=</span> bassline<span class="op">[</span>row<span class="op">%</span><span class="dv">64</span><span class="op">],</span> add<span class="op">=</span><span class="dv">12</span><span class="op">*</span><span class="dv">3</span><span class="op">,</span> vol<span class="op">=</span><span class="bn">0x6F</span><span class="op">;</span></span>
<span id="cb65-248"><a href="#cb65-248" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span> <span class="cf">if</span><span class="op">(</span>c <span class="op">==</span> <span class="dv">15</span> <span class="op">&amp;&amp;</span> row <span class="op">&gt;=</span> <span class="dv">64</span><span class="op">)</span> <span class="co">// Flute</span></span>
<span id="cb65-249"><a href="#cb65-249" aria-hidden="true" tabindex="-1"></a>                    note <span class="op">=</span> fluteline<span class="op">[</span>row<span class="op">%</span><span class="dv">64</span><span class="op">],</span> add<span class="op">=</span><span class="dv">12</span><span class="op">*</span><span class="dv">5</span><span class="op">,</span> vol<span class="op">=</span><span class="bn">0x6F</span><span class="op">;</span></span>
<span id="cb65-250"><a href="#cb65-250" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(</span>note <span class="op">==</span> x <span class="op">&amp;&amp;</span> <span class="op">(</span>c<span class="op">&lt;</span><span class="dv">15</span> <span class="op">||</span> row<span class="op">%</span><span class="dv">31</span><span class="op">))</span> <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb65-251"><a href="#cb65-251" aria-hidden="true" tabindex="-1"></a>                file<span class="op">[</span><span class="dv">0</span><span class="op">].</span>KeyOff<span class="op">(</span>c<span class="op">,</span> keys_on<span class="op">[</span>c<span class="op">],</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb65-252"><a href="#cb65-252" aria-hidden="true" tabindex="-1"></a>                keys_on<span class="op">[</span>c<span class="op">]</span> <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb65-253"><a href="#cb65-253" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(</span>note <span class="op">==</span> x<span class="op">)</span> <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb65-254"><a href="#cb65-254" aria-hidden="true" tabindex="-1"></a>                file<span class="op">[</span><span class="dv">0</span><span class="op">].</span>KeyOn<span class="op">(</span>c<span class="op">,</span> keys_on<span class="op">[</span>c<span class="op">]</span> <span class="op">=</span> note<span class="op">+</span>add<span class="op">,</span> vol<span class="op">);</span></span>
<span id="cb65-255"><a href="#cb65-255" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb65-256"><a href="#cb65-256" aria-hidden="true" tabindex="-1"></a>            file<span class="op">[</span><span class="dv">0</span><span class="op">].</span>AddDelay<span class="op">(</span><span class="dv">160</span><span class="op">);</span></span>
<span id="cb65-257"><a href="#cb65-257" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb65-258"><a href="#cb65-258" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>loops <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> file<span class="op">.</span>AddLoopEnd<span class="op">();</span></span>
<span id="cb65-259"><a href="#cb65-259" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-260"><a href="#cb65-260" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-261"><a href="#cb65-261" aria-hidden="true" tabindex="-1"></a>    file<span class="op">.</span>Finish<span class="op">();</span></span>
<span id="cb65-262"><a href="#cb65-262" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-263"><a href="#cb65-263" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span><span class="op">*</span> fp <span class="op">=</span> <span class="bu">std::</span>fopen<span class="op">(</span><span class="st">&quot;test.mid&quot;</span><span class="op">,</span> <span class="st">&quot;wb&quot;</span><span class="op">);</span></span>
<span id="cb65-264"><a href="#cb65-264" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>fwrite<span class="op">(&amp;</span>file<span class="op">.</span>at<span class="op">(</span><span class="dv">0</span><span class="op">),</span> <span class="dv">1</span><span class="op">,</span> file<span class="op">.</span>size<span class="op">(),</span> fp<span class="op">);</span></span>
<span id="cb65-265"><a href="#cb65-265" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>fclose<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb65-266"><a href="#cb65-266" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-267"><a href="#cb65-267" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb65-268"><a href="#cb65-268" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="appendix:midi">Signaux MIDI</h1>
<h2 class="unnumbered" id="note-on-et-note-off"><em>Note On</em> et
<em>Note Off</em></h2>
<p>Les messages <em>Note On</em> et <em>Note Off</em> sont fondamentaux
en MIDI pour la gestion des notes jouées. Le message « Note On » informe
sur la touche pressée, sa vélocité et le canal MIDI concerné. Il est
composé d’un octet de statut commençant par <span
class="math inline">\(1001\)</span>, suivi de deux octets de données :
le premier pour la note jouée et le second pour la vélocité. Le message
<em>Note Off</em>, quant à lui, indique la libération d’une touche avec
les mêmes détails que <em>Note On</em>, mais avec un statut différent
commençant par <span class="math inline">\(1000\)</span> (pour rappel, à
chaque fois le <span class="math inline">\(1\)</span> est là pour
préciser qu’il s’agit d’un octet de statut). Par exemple, voici les
représentations d’un message <em>Note On</em> qui jouerait un Do avec
une vélocité maximale et celui d’un message <em>Note Off</em> qui lui
ferait miroir:</p>
<div class="sourceCode" id="cb66" data-language="GLSL"
data-caption="\textit{Note On}" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>Note On <span class="op">:</span> <span class="bn">0x9</span>n <span class="op">(</span><span class="dv">1001</span> nnnn<span class="op">)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0x90</span> <span class="bn">0x3C</span> <span class="bn">0x7F</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0x90</span> <span class="op">(</span><span class="dv">1001</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Note On sur le canal MIDI <span class="dv">1</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x3C</span> <span class="op">(</span><span class="dv">0011</span> <span class="dv">1100</span><span class="op">)</span> <span class="op">:</span> Note numero <span class="dv">60</span> <span class="op">(</span>Do central<span class="op">)</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="bn">0x7F</span> <span class="op">(</span><span class="dv">0111</span> <span class="dv">1111</span><span class="op">)</span> <span class="op">:</span> Velocite <span class="fu">maximale</span> <span class="op">(</span><span class="dv">127</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb67" data-language="GLSL"
data-caption="\textit{Note Off}" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>Note Off <span class="op">:</span> <span class="bn">0x8</span>n <span class="op">(</span><span class="dv">1000</span> nnnn<span class="op">)</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0x80</span> <span class="bn">0x3C</span> <span class="bn">0x40</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0x80</span> <span class="op">(</span><span class="dv">1000</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Note Off sur le canal MIDI <span class="dv">1</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x3C</span> <span class="op">(</span><span class="dv">0011</span> <span class="dv">1100</span><span class="op">)</span> <span class="op">:</span> Note numero <span class="dv">60</span> <span class="op">(</span>Do central<span class="op">)</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="bn">0x40</span> <span class="op">(</span><span class="dv">0100</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Velocite <span class="dv">64</span> <span class="op">(</span>valeur typique pour un Note Off<span class="op">)</span></span></code></pre></div>
<p>L’information de vélocité est intégrée dans les messages « Note On »
et « Note Off », reflétant la vitesse à laquelle une touche est
relâchée.</p>
<h2 class="unnumbered"
id="aftertouch-polyphonic-et-aftertouch-channel"><em>Aftertouch
Polyphonic</em> et <em>Aftertouch Channel</em></h2>
<p>Les messages <em>Aftertouch</em>, qu’ils soient <em>Polyphonic</em>
ou <em>Channel</em>, renvoient des informations sur la pression
appliquée sur une touche après l’émission initiale. Bien que cette
caractéristique ne soit pas présente dans les pianos mécaniques, elle
trouve son utilité dans d’autres instruments comme les instruments à
vent ou à cordes.</p>
<p>Le <em>Polyphonic Aftertouch</em> envoie la pression individuelle
pour chaque touche pressée, nécessitant donc trois octets par note.</p>
<div class="sourceCode" id="cb68" data-language="GLSL"
data-caption="\textit{Aftertouch} Polyphonique" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>Aftertouch Polyphonique <span class="op">:</span> <span class="bn">0xA</span>n <span class="op">(</span><span class="dv">1010</span> nnnn<span class="op">)</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0xA0</span> <span class="bn">0x3C</span> <span class="bn">0x40</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0xA0</span> <span class="op">(</span><span class="dv">1010</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Aftertouch Polyphonique sur le canal MIDI <span class="dv">1</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x3C</span> <span class="op">(</span><span class="dv">0011</span> <span class="dv">1100</span><span class="op">)</span> <span class="op">:</span> Note numero <span class="dv">60</span> <span class="op">(</span>Do central<span class="op">)</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="bn">0x40</span> <span class="op">(</span><span class="dv">0100</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Pression de la touche</span></code></pre></div>
<p>Par contre le <em>Channel Aftertouch</em> envoie uniquement la
pression de la touche avec la pression la plus élevée, nécessitant
seulement deux octets.</p>
<div class="sourceCode" id="cb69" data-language="GLSL"
data-caption="\textit{Aftertouch} de canal" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>Aftertouch de <span class="fu">canal</span> <span class="op">(</span>Channel Aftertouch<span class="op">)</span> <span class="op">:</span> <span class="bn">0xD</span>n <span class="op">(</span><span class="dv">1101</span> nnnn<span class="op">)</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0xD0</span> <span class="bn">0x40</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0xD0</span> <span class="op">(</span><span class="dv">1101</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Aftertouch de canal sur le canal MIDI <span class="dv">1</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x40</span> <span class="op">(</span><span class="dv">0100</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Pression de la touche</span></code></pre></div>
<h2 class="unnumbered"
id="changement-de-contrôle-control-change">Changement de contrôle
(<em>Control Change</em>)</h2>
<p>Le message <em>Control Change</em> transmet des informations sur les
contrôleurs tels que les boutons, pédales et curseurs. Ce message est
constitué d’un octet de statut avec un préfixe <span
class="math inline">\(1011\)</span>, suivi du canal, du numéro du
contrôleur, et de la valeur (de <span class="math inline">\(0\)</span> à
<span class="math inline">\(127\)</span>).</p>
<div class="sourceCode" id="cb70" data-language="GLSL"
data-caption="Changement de contrôle" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>Changement de <span class="fu">controle</span> <span class="op">(</span>Control Change<span class="op">)</span> <span class="op">:</span> <span class="bn">0xB0</span> <span class="op">(</span><span class="dv">1011</span> nnnn<span class="op">)</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0xB0</span> <span class="bn">0x07</span> <span class="bn">0x64</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0xB0</span> <span class="op">(</span><span class="dv">1011</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Controle de changement sur le canal MIDI <span class="dv">1</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x07</span> <span class="op">(</span><span class="dv">0000</span> <span class="dv">0111</span><span class="op">)</span> <span class="op">:</span> Numero de <span class="fu">controleur</span> <span class="op">(</span>ici<span class="op">,</span> le controle de volume<span class="op">)</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="bn">0x64</span> <span class="op">(</span><span class="dv">0110</span> <span class="dv">0100</span><span class="op">)</span> <span class="op">:</span> Valeur du <span class="fu">controle</span> <span class="op">(</span><span class="dv">100</span> en decimal<span class="op">,</span> indiquant le volume a <span class="dv">100</span><span class="op">)</span></span></code></pre></div>
<h2 class="unnumbered"
id="changement-de-programme-program-change">Changement de Programme
(<em>Program Change</em>)</h2>
<p>Bien que considéré comme une relique des débuts des synthétiseurs
logiciels, le message <em>Program Change</em> était utilisé pour
signaler les changements de patch. À l’origine, avec <span
class="math inline">\(127\)</span> voix disponibles dans tous les
synthétiseurs MIDI, ce système était particulièrement adapté aux jeux
vidéo, permettant une expérience musicale cohérente sur différents
matériels. Ces <span class="math inline">\(127\)</span> voix incluent
également des effets sonores comme le chant des oiseaux ou le bruit de
téléphone. Les messages <em>Program Change</em> se composent de deux
octets : un octet de statut commençant par <span
class="math inline">\(1100\)</span>, indiquant le canal, suivi d’un
octet de données désignant le nouvel instrument.</p>
<div class="sourceCode" id="cb71" data-language="GLSL"
data-caption="Changement de programme" data-captionpos="b"
data-frame="single"><pre class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>Changement de <span class="fu">programme</span> <span class="op">(</span>Program Change<span class="op">)</span> <span class="op">:</span> <span class="bn">0xC</span>n <span class="op">(</span><span class="dv">1100</span> nnnn<span class="op">)</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0xC0</span> <span class="bn">0x04</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0xC0</span> <span class="op">(</span><span class="dv">1100</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Changement de programme sur le canal MIDI <span class="dv">1</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x04</span> <span class="op">(</span><span class="dv">0000</span> <span class="dv">0100</span><span class="op">)</span> <span class="op">:</span> Programme numero <span class="dv">5</span></span></code></pre></div>
<h2 class="unnumbered" id="pitch-bend"><em>Pitch Bend</em></h2>
<p>Le <em>Pitch Bend</em> se distingue des autres contrôleurs continus
par sa résolution plus élevée dans le protocole MIDI. Au lieu d’utiliser
une plage de valeurs de <span class="math inline">\(0\)</span> à <span
class="math inline">\(127\)</span>, le <em>Pitch Bend</em> utilise deux
octets pour fournir une résolution de 14 bits, offrant <span
class="math inline">\(16384\)</span> (<span
class="math inline">\(2^14\)</span>) valeurs possibles. Cette précision
est essentielle pour un contrôle microtonal détaillé, ce qui est
particulièrement utile pour des données à haute résolution dans le
protocole MIDI.</p>
<div class="sourceCode" id="cb72" data-language="GLSL"
data-caption="Pitch Bend" data-captionpos="b" data-frame="single"><pre
class="sourceCode GLSL"><code class="sourceCode glsl"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>Pitch Bend <span class="op">:</span> <span class="bn">0xE</span>n <span class="op">(</span><span class="dv">1110</span> nnnn<span class="op">)</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>Exemple <span class="op">:</span> <span class="bn">0xE0</span> <span class="bn">0x00</span> <span class="bn">0x40</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0xE0</span> <span class="op">(</span><span class="dv">1110</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Pitch Bend sur le canal MIDI <span class="dv">1</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x00</span> <span class="bn">0x40</span> <span class="op">(</span><span class="dv">0000</span> <span class="dv">0000</span> <span class="dv">0100</span> <span class="dv">0000</span><span class="op">)</span> <span class="op">:</span> Valeur du pitch <span class="fu">bend</span> <span class="op">(</span>vers le haut<span class="op">)</span></span></code></pre></div>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Dans la culture de la <em>demoscene</em>, les
<em>greetings</em> sont des salutations, souvent inclues dans les
<em>demos</em>, adressées à d’autres groupes de la <em>demoscene</em>, à
des personnes spécifiques ou à la communauté dans son ensemble.<a
href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Un <em>hackerspace</em> est un espace physique où des
passionnés de technologie, de programmation informatique et de création
collaborative se réunissent pour travailler sur des projets, échanger
des connaissances et partager des ressources.<a href="#fnref2"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>L’esprit <em>open source</em> se réfère à une approche
collaborative et transparente du développement de logiciels et de
technologies, basée sur le partage libre et ouvert du code source. Les
projets <em>open source</em> permettent à quiconque d’accéder,
d’étudier, de modifier et de redistribuer le code source d’un logiciel,
favorisant ainsi la collaboration et l’innovation collective.<a
href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Les <em>free parties</em> sont des événements musicaux
et culturels autonomes, souvent organisés de manière clandestine et sans
autorisation officielle, caractérisés par une programmation musicale
centrée sur la musique électronique <em>underground</em>. Ces événements
se déroulent généralement dans des lieux inhabituels ou alternatifs,
tels que des entrepôts abandonnés, des champs, des forêts ou des
<em>squats</em>.<a href="#fnref4" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>La gravure musicale est le processus de notation ou de
transcription de la musique dans un format numérique à l’aide de
logiciels spécialisés. Cette pratique consiste à représenter les
éléments musicaux tels que les notes, les rythmes, les indications de
tempo, les dynamiques et d’autres instructions d’interprétation de
manière visuelle et compréhensible pour les musiciens. Les principales
solutions logicielles de gravure musicale comprennent des programmes
tels que Finale, MuseScore et LilyPond (ma solution privilégiée).<a
href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Un <em>strip</em> désigne généralement une bande
d’images ou de vignettes disposées dans un ordre séquentiel, souvent
utilisée dans le contexte des bandes dessinées.<a href="#fnref6"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Le patrimoine culturel immatériel, selon l’UNESCO, se
réfère aux pratiques, représentations, expressions, connaissances et
savoir-faire - ainsi que les instruments, objets, artefacts et espaces
culturels associés - que les communautés, les groupes et, dans certains
cas, les individus reconnaissent comme faisant partie de leur patrimoine
culturel.<a href="#fnref7" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>La RAM (<em>Random Access Memory</em>) est une forme de
mémoire volatile utilisée par les ordinateurs pour stocker des données
temporaires qui peuvent être rapidement lues et écrites par le
processeur et d’autres périphériques.<a href="#fnref8"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Le terme <em>cracker</em> désigne une personne
spécialisée dans la suppression ou la contournement des protections de
logiciels, principalement pour les jeux vidéo ou les applications.<a
href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Un <em>cracktro</em> est une courte animation ou
introduction visuelle qui apparaît avant le lancement d’un jeu vidéo ou
d’un logiciel piraté.<a href="#fnref10" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>NTSC (<em>National Television System Committee</em>)
est un système de codage couleur utilisé dans les émissions de
télévision et de vidéo analogiques en Amérique du Nord, au Japon et dans
certaines autres régions.<a href="#fnref11" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>PAL (<em>Phase Alternating Line</em>) est un système de
codage couleur utilisé dans les émissions de télévision et de vidéo
analogiques dans de nombreuses régions, notamment en Europe, en
Australie, en Chine et en Afrique.<a href="#fnref12"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>Les <em>swappers</em> échangent généralement des
<em>demos</em>, des <em>intros</em>, des musiques, des graphiques et
d’autres types de productions créatives via des supports physiques comme
des disquettes ou des cassettes, ou encore via des services en ligne
lorsque l’Internet est devenu plus accessible.<a href="#fnref13"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>Une <em>intro</em> (abréviation de « introduction »)
est une petite production <em>demo</em>, souvent de courte durée, conçue
pour montrer les compétences et la créativité d’un groupe ou d’un
individu. Contrairement aux <em>demos</em> complètes qui peuvent durer
plusieurs minutes, les <em>intros</em> sont généralement plus courtes,
parfois limitées à quelques dizaines de secondes, et se concentrent sur
un effet ou une idée particulière.<a href="#fnref14"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Le terme <em>lamer</em> est généralement utilisé de
manière péjorative pour décrire quelqu’un qui prétend avoir des
compétences ou des connaissances qu’il ne possède pas réellement.<a
href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>L’élite fait référence aux individus ou groupes qui se
distinguent par leurs compétences techniques, leur innovation, et leur
contribution significative à la culture et à l’art de la
<em>demoscene</em>.<a href="#fnref16" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>Le <em>leet speak</em> (ou <em>l33t speak</em>) est un
langage codé utilisant des substitutions de lettres, des chiffres et des
symboles spéciaux pour remplacer les lettres originales, rendant la
communication plus cryptique et réservée à ceux qui connaissent ce
langage.<a href="#fnref17" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>DICE, ou Digital Illusions Creative Entertainment, est
un studio de développement de jeux vidéo basé en Suède. Fondé en 1992
par Olof Gustafsson et Markus Nyström, le studio est surtout connu pour
ses franchises à succès comme « Battlefield », « Mirror’s Edge » et «
Star Wars Battlefront ».<a href="#fnref18" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p>Remedy Entertainment est un studio finlandais de jeux
vidéo connu pour ses jeux narratifs innovants tels que « Max Payne », «
Alan Wake », « Quantum Break » et « Control ». Situé à Espoo, il est
reconnu pour ses histoires captivantes et sa maîtrise de la narration
interactive.<a href="#fnref19" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn20"><p>Un « programme DOS » ne se réfère pas au système
d’exploitation MS-DOS que l’on trouve sur les PC, mais plutôt à un type
de <em>demo</em> spécifique conçu pour l’Amiga. Ces <em>demos</em>
étaient généralement exécutées à partir du Workbench, l’environnement
graphique de l’Amiga, plutôt que de démarrer directement depuis un
disque bootable.<a href="#fnref20" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn21"><p>Un <em>trackloader</em> désigne une technique de
chargement de données utilisée pour produire des <em>demos</em> plus
fluides et interactives.<a href="#fnref21" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn22"><p>Les <em>diskmags</em> sont des magazines numériques
interactifs destinés à la communauté de la <em>demoscene</em>. Ils sont
généralement composés de plusieurs sections, y compris des articles, des
critiques, des interviews, des classements, et parfois même des
<em>demos</em> ou des <em>intros</em> intégrées.<a href="#fnref22"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn23"><p>Le fonctionnement d’un <em>tracker</em> est basé sur
une interface de suivi de partitions, où chaque piste représente un
instrument ou un échantillon. Les utilisateurs peuvent placer des notes,
définir des effets et ajuster divers paramètres pour chaque piste à
l’aide d’un clavier ou d’une interface graphique.<a href="#fnref23"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn24"><p>La persistance rétinienne fait référence à la capacité
de l’œil humain à percevoir une image pendant un court laps de temps
après que l’image originale ait disparu. Cette caractéristique est
exploitée dans la création de <em>demos</em> pour produire des effets
visuels fluides et dynamiques, en utilisant des techniques telles que le
changement rapide d’images ou la manipulation de la luminosité et des
couleurs.<a href="#fnref24" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn25"><p>Le <em>livecoding</em> est une pratique qui consiste à
improviser de la musique ou des visuels par l’utilisation d’un langage
de programmation.<a href="#fnref25" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn26"><p>La Revision est une <em>demoparty</em> annuelle qui se
tient traditionnellement à Pâques depuis 2011, à Saarbrücken, la
principale ville de la Sarre, dans le sud-ouest de l’Allemagne.<a
href="#fnref26" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn27"><p>Le <em>VJing</em> est une forme d’art visuel en direct
qui implique la manipulation et la projection en temps réel d’images
visuelles pour accompagner la musique lors de performances en direct,
telles que des concerts ou des événements artistiques.<a href="#fnref27"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn28"><p>Inigo Quilez est une figure emblématique du graphisme
généré par ordinateur et du <em>livecoding</em>.<a href="#fnref28"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn29"><p>Le <em>code golfing</em> est un défi de programmation
visant à réaliser un programme fonctionnel avec un minimum de
caractères.<a href="#fnref29" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn30"><p>Un sommet (<em>vertex</em> en anglais) est un point
dans l’espace tridimensionnel. Les sommets sont des entités
fondamentales utilisées pour définir la géométrie des objets dans une
scène 3D.<a href="#fnref30" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn31"><p>Un <em>thread</em> fait référence à une unité de
traitement ou à une séquence d’instructions exécutées par le processeur
graphique. Les GPU modernes sont équipés de multiples processeurs de
flux, chacun capable de gérer plusieurs <em>threads</em>
simultanément.<a href="#fnref31" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn32"><p>Les coordonnées homogènes sont un concept clé en
géométrie et en informatique graphique, offrant une représentation
unifiée des points et des vecteurs ainsi que des avantages significatifs
pour les opérations géométriques et les transformations.<a
href="#fnref32" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn33"><p>La matrice identité est une matrice carrée dans
laquelle tous les éléments de la diagonale principale sont égaux à <span
class="math inline">\(1\)</span>, tandis que tous les autres éléments
sont égaux à <span class="math inline">\(0\)</span>.<a href="#fnref33"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn34"><p>Les coordonnées 3D normalisées (NDC), abréviation de
<em>Normalized Device Coordinates</em> en anglais, sont un système de
coordonnées tridimensionnelles utilisé dans les graphiques 3D. Dans ce
système, les coordonnées sont normalisées par rapport à la taille de
l’espace de visualisation, de sorte que les coordonnées <span
class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span>
et <span class="math inline">\(Z\)</span> varient toutes entre <span
class="math inline">\(-1\)</span> et <span
class="math inline">\(1\)</span>.<a href="#fnref34"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn35"><p>En informatique graphique, le <em>frustum</em> est une
approximation de la zone de l’espace tridimensionnel qui est visible à
travers une caméra ou une fenêtre de visualisation. Il est utilisé pour
décider quels éléments doivent être rendus dans une scène 3D.<a
href="#fnref35" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn36"><p>En modélisation 3D, un <em>quad</em>, abréviation de «
quadrilatère », fait référence à un polygone composé de quatre sommets
reliés par des arêtes.<a href="#fnref36" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn37"><p>Un <em>node</em> (nœud en français) fait référence à un
élément de base dans un système nodal ou graphique utilisé pour créer
des matériaux, des effets visuels ou des animations. Chaque
<em>node</em> représente généralement une opération spécifique ou une
partie du processus de rendu.<a href="#fnref37" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn38"><p>Un <em>pixel</em> est le plus petit élément visible à
l’écran, tandis qu’un fragment est une partie de ce <em>pixel</em>
contenant des informations détaillées comme la couleur, traitées par le
<em>fragment shader</em> pour déterminer la couleur finale du
<em>pixel</em>.<a href="#fnref38" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn39"><p>La <em>diffuse map</em> est une texture utilisée dans
le rendu 3D pour représenter la couleur de base ou la couleur réfléchie
par un objet.<a href="#fnref39" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn40"><p>Une <em>normal map</em> est une texture utilisée dans
les graphiques 3D pour simuler des détails géométriques fins et
complexes sur une surface sans avoir à augmenter la géométrie réelle de
l’objet.<a href="#fnref40" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn41"><p>Dans le contexte des textures, on emploie plutôt le
terme <em>texel</em> que <em>pixel</em>.<a href="#fnref41"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn42"><p>Un espace orthonormé fait référence à un système de
coordonnées dans lequel les axes sont perpendiculaires (orthogonaux) les
uns aux autres et ont une longueur unitaire (normée). Cet espace est
souvent utilisé pour représenter des positions, des directions ou des
transformations dans un rendu 3D.<a href="#fnref42"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn43"><p>Un sonar, contraction de <em>SOund Navigation And
Ranging</em> en anglais, est un dispositif utilisé pour détecter et
localiser des objets sous-marins en émettant des impulsions sonores dans
l’eau et en écoutant les échos réfléchis par ces objets.<a
href="#fnref43" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn44"><p>Le lissage ou <em>smoothness</em> en infographie se
réfère généralement à la qualité visuelle d’une surface qui semble lisse
ou régulière. Cela peut être attribué à plusieurs facteurs, notamment la
quantité de détails visibles sur la surface, la régularité de ses
courbes et la manière dont elle réagit à l’éclairage.<a href="#fnref44"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn45"><p>Un quadrant est une subdivision de l’espace en quatre
parties égales, souvent désignées comme le premier, deuxième, troisième
et quatrième quadrant, en fonction de leur position par rapport aux
axes.<a href="#fnref45" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn46"><p>Le théorème de Pythagore énonce que dans un triangle
rectangle, le carré de la longueur de l’hypoténuse (le côté opposé à
l’angle droit) est égal à la somme des carrés des longueurs des deux
autres côtés.<a href="#fnref46" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn47"><p>Les fonctions de distance signée sont utilisées en
infographie et en traitement d’image pour mesurer la distance entre un
point et une surface.<a href="#fnref47" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn48"><p>La normalisation d’un vecteur est le processus de mise
à l’échelle d’un vecteur pour qu’il ait une longueur de <span
class="math inline">\(1\)</span>, tout en préservant sa direction.<a
href="#fnref48" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn49"><p>Le produit vectoriel de deux vecteurs dans l’espace
tridimensionnel donne un vecteur perpendiculaire au plan formé par ces
deux vecteurs.<a href="#fnref49" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn50"><p>La norme d’un vecteur, également appelée magnitude ou
longueur d’un vecteur, est une mesure de sa taille dans l’espace.<a
href="#fnref50" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn51"><p>Le gradient d’une surface est un concept mathématique
qui décrit la variation de la fonction de cette surface dans l’espace.<a
href="#fnref51" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn52"><p>En informatique graphique, le produit scalaire est une
opération mathématique fondamentale utilisée pour mesurer la similitude
directionnelle entre deux vecteurs.<a href="#fnref52"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn53"><p>Deux vecteurs sont dits colinéaires s’ils sont
parallèles ou anti-parallèles, c’est-à-dire qu’ils ont la même direction
ou des directions opposées.<a href="#fnref53" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn54"><p>Deux vecteurs sont dits orthogonaux s’ils sont
perpendiculaires l’un à l’autre.<a href="#fnref54" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn55"><p>Une fonction <em>built-in</em> (ou fonction intégrée)
est une fonction préexistante dans un langage de programmation ou dans
un environnement de développement logiciel.<a href="#fnref55"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn56"><p>Les coordonnées cartésiennes sont un système de
coordonnées dans lequel un point dans l’espace est déterminé par sa
distance par rapport à deux ou trois axes orthogonaux (perpendiculaires)
qui se croisent à un point appelé origine.<a href="#fnref56"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn57"><p>Remapper fait référence au processus de transformation
des valeurs d’un intervalle à un autre.<a href="#fnref57"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn58"><p>Le post-traitement est une technique pour appliquer des
effets visuels et des corrections à une image rendue après qu’elle ait
été traitée par les shaders de rendu principaux.<a href="#fnref58"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn59"><p>Le flou (ou <em>blur</em> en anglais) désigne une
technique graphique utilisée pour rendre une image ou une zone de
l’image moins nette ou plus douce.<a href="#fnref59"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn60"><p>L’aberration chromatique se manifeste généralement par
des franges de couleur, souvent des teintes de vert, rouge et bleu,
autour des bords des objets dans une image ou une scène.<a
href="#fnref60" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn61"><p>En OpenGL, un <em>frame buffer</em> (tampon de trame en
français) est une structure de données utilisée pour stocker
temporairement les <em>pixels</em> d’une image à afficher à l’écran.<a
href="#fnref61" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn62"><p>Les L-systèmes, également connus sous le nom de
systèmes de Lindenmayer, sont des systèmes formels utilisés pour
modéliser et générer des structures fractales, notamment des formes
végétales, des motifs géométriques et d’autres formes complexes trouvées
dans la nature.<a href="#fnref62" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn63"><p>Un <em>pattern</em> désigne généralement une séquence
récurrente ou un design utilisé pour créer des effets visuels, souvent
de manière répétitive. Ces <em>patterns</em> sont souvent utilisés pour
créer des textures, des décors ou des effets visuels complexes. Ils
peuvent être générés de manière procédurale, basés sur des algorithmes,
ou créés manuellement.<a href="#fnref63" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn64"><p>Développé par Ken Perlin en 1982 pour le film « Tron »
de Disney, le bruit de Perlin produit des transitions douces entre les
valeurs, ce qui donne un aspect plus organique et réaliste aux textures
générées. Il est largement utilisé dans les domaines de l’infographie,
du rendu 3D, de la simulation et du jeu vidéo pour générer des terrains,
des nuages, des textures de bois et bien d’autres effets visuels.<a
href="#fnref64" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn65"><p>Le <em>glow</em> se réfère à un effet visuel où une
source de lumière semble émettre une lueur douce et diffuse, créant
ainsi une aura lumineuse autour de l’objet ou de la zone éclairée<a
href="#fnref65" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn66"><p>Desmos est un site web qui offre une calculatrice
graphique en ligne gratuite et puissante, ainsi que d’autres outils
mathématiques interactifs. Desmos permet de tracer des graphiques de
fonctions, des équations, des inégalités et des tableaux de données en
temps réel.<a href="#fnref66" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn67"><p>loopMIDI est un logiciel qui permet de créer des ports
MIDI virtuels sur un ordinateur Windows. Ces ports MIDI virtuels peuvent
être utilisés pour router des données MIDI entre différentes
applications.<a href="#fnref67" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn68"><p>Un langage ésotérique est un langage de programmation
conçu de manière intentionnellement compliquée, obscure ou non
conventionnelle. Ces langages ne sont généralement pas créés dans le but
d’être utilisés pour des applications pratiques ou professionnelles,
mais plutôt pour explorer des concepts informatiques, artistiques ou
philosophiques, ou pour le plaisir de la programmation.<a
href="#fnref68" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn69"><p>Hundred Rabbits est un studio indépendant créatif
composé de Rekka Bellum et de Devine Lu Linvega, un duo de développeurs,
artistes et explorateurs vivant sur un voilier nommé Pino. Ils sont
connus pour leur approche minimaliste et expérimentale de la création,
produisant des jeux vidéo, des outils, des expériences et des œuvres
artistiques dans divers domaines tels que la programmation, la musique,
la vidéo et l’écriture.<a href="#fnref69" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn70"><p>Dans le contexte d’Orca je préfère utiliser la
terminologie Est, Sud, Ouest et Nord plutôt que droite, bas, gauche,
haut (<em>right</em>, <em>bottom</em>, <em>left</em>, <em>top</em> en
anglais)<a href="#fnref70" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn71"><p>Une DAW est une station de travail audionumérique.
C’est un système logiciel utilisé pour l’enregistrement, l’édition, le
mixage et la production audio.<a href="#fnref71" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn72"><p>Le <em>fade in</em> consiste en une augmentation
progressive du volume audio depuis le silence (ou un volume très bas)
jusqu’au volume souhaité. Cela crée une transition douce, permettant au
son de s’introduire de manière progressive dans l’environnement
sonore.<a href="#fnref72" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn73"><p>Le <em>fade out</em> représente une diminution
progressive du volume audio, aboutissant finalement à un silence complet
(ou à un volume très bas). Cette technique est souvent utilisée pour
conclure une piste audio ou pour introduire un changement de scène de
manière fluide.<a href="#fnref73" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn74"><p>OpenGL (<em>Open Graphics Library</em>) est une
spécification standardisée pour le développement d’applications
graphiques interactives en 2D et 3D. Elle offre une interface de
programmation qui permet aux développeurs de créer des applications
graphiques de haute performance et de haute qualité sur différentes
plateformes matérielles. OpenGL est largement utilisé dans les domaines
tels que les jeux vidéo, la modélisation et l’animation 3D, la
visualisation scientifique et médicale, la conception assistée par
ordinateur (CAO) et bien d’autres.<a href="#fnref74"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn75"><p>Dans le protocole MIDI, la vélocité fait référence à la
force avec laquelle une touche est pressée sur un clavier ou un autre
contrôleur MIDI.<a href="#fnref75" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn76"><p>L’OSC (<em>Open Sound Control</em>) est un protocole de
communication pour les réseaux multimédias développé pour transmettre
des données de contrôle entre les logiciels et les appareils
audiovisuels. Contrairement au MIDI, qui est principalement basé sur le
format série de 8 bits, l’OSC utilise des paquets de données basés sur
des messages.<a href="#fnref76" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn77"><p>Un <em>proof of concept</em> (POC), traduit
littéralement en français par « preuve de concept », est une
démonstration ou un prototype qui vise à prouver la faisabilité ou la
viabilité d’une idée, d’un concept ou d’une méthode.<a href="#fnref77"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<section>
  <h1>Bibliographie</h1>
  <div id="refs" class="references csl-bib-body hanging-indent"
role="doc-bibliography">
<div id="ref-AlgorithmicComposition2023" class="csl-entry"
role="doc-biblioentry">
<span>“Algorithmic Composition.”</span> 2023. <em>Wikipedia</em>,
August.
</div>
<div id="ref-andreattaInformatiqueMusicaleInformatique2019"
class="csl-entry" role="doc-biblioentry">
Andreatta, Moreno, Gérard Assayag, Myriam Desainte-Catherine, Jean-Louis
Giavitto, Mathieu Giraud, Yann Orlarey, and Anne Sèdes. 2019.
<span>“L’informatique Musicale : Informatique Et Musique En
Interdisciplinarit<span>é</span>.”</span> In <em>Journ<span>é</span>es
d’<span>Informatique Musicale</span> (<span>JIM</span> 2019)</em>.
Bayonne, France.
</div>
<div id="ref-bisqwitHowCreateMusic2010" class="csl-entry"
role="doc-biblioentry">
Bisqwit. 2010. <span>“How to Create Music in <span>C</span>++ from
Scratch (<span>MIDI</span> File Format) / <span>C</span>++11 Variadic
Templates Example.”</span>
</div>
<div id="ref-blackwellLiveCodingUser2022" class="csl-entry"
role="doc-biblioentry">
Blackwell, Alan, Emma Cocker, Geoff Cox, Alex McLean, and Thor
Magnusson. 2022. <em>Live Coding: A User’s Manual</em>. Software
Studies. Cambridge, Massachusetts London: The MIT Press.
</div>
<div id="ref-blackwellProgrammingLanguageMusical2005" class="csl-entry"
role="doc-biblioentry">
Blackwell, Alan, and Nick Collins. 2005. <span>“The <span>Programming
Language</span> as a <span>Musical Instrument</span>.”</span>
</div>
<div id="ref-bouvierShadersDynamiquesPour" class="csl-entry"
role="doc-biblioentry">
Bouvier, Fabienne. n.d. <span>“<span>Les shaders dynamiques pour
l’expressivit<span>é</span> artistique</span>.”</span>
</div>
<div id="ref-brownAacellPracticeApproach2007" class="csl-entry"
role="doc-biblioentry">
Brown, Andrew R., and Andrew C. Sorensen. 2007. <span>“Aa-Cell in
Practice : An Approach to Musical Live Coding.”</span> In
<em>International <span>Computer Music Conference</span></em>, 292–99.
</div>
<div id="ref-carlssonForgottenPioneersCreative2019" class="csl-entry"
role="doc-biblioentry">
Carlsson, Anders. 2019. <span>“The <span>Forgotten Pioneers</span> of
<span>Creative Hacking</span> and <span>Social Networking</span>–
<span>Introducing</span> the <span>Demoscene</span>,”</span> June.
</div>
<div id="ref-clintonMusicImprovisationPython" class="csl-entry"
role="doc-biblioentry">
Clinton, William. n.d. <span>“Music Improvisation in <span>Python</span>
Using a <span>Markov Chain Algorithm</span>.”</span>
</div>
<div id="ref-collinsPacManPopMusic2008" class="csl-entry"
role="doc-biblioentry">
Collins, Karen, ed. 2008. <em>From <span>Pac-Man</span> to Pop Music:
Interactive Audio in Games and New Media</em>. Ashgate Popular and Folk
Music Series. Aldershot, Hampshidre, England ; Burlington, VT: Ashgate.
</div>
<div id="ref-collinsAnalysisGenerativeMusic2008" class="csl-entry"
role="doc-biblioentry">
Collins, Nick. 2008. <span>“The <span>Analysis</span> of
<span>Generative Music Programs</span>.”</span> <em>Organised Sound</em>
13 (3): 237–48. <a
href="https://doi.org/10.1017/S1355771808000332">https://doi.org/10.1017/S1355771808000332</a>.
</div>
<div id="ref-collinsLiveCodingLaptop2003" class="csl-entry"
role="doc-biblioentry">
Collins, Nick, Alex McLEAN, Julian Rohrhuber, and Adrian Ward. 2003.
<span>“<span>Live coding in laptop performance</span>.”</span>
<em>Organised Sound</em> 8 (3): 321–30. <a
href="https://doi.org/10.1017/S135577180300030X">https://doi.org/10.1017/S135577180300030X</a>.
</div>
<div id="ref-collopyVisualMusicVisual1999" class="csl-entry"
role="doc-biblioentry">
Collopy, F., R. M. Fuhrer, and D. Jameson. 1999. <span>“Visual Music in
a Visual Programming Language.”</span> In <em>Proceedings 1999
<span>IEEE Symposium</span> on <span>Visual Languages</span></em>,
111–18. <a
href="https://doi.org/10.1109/VL.1999.795882">https://doi.org/10.1109/VL.1999.795882</a>.
</div>
<div id="ref-colubriGLSLShaders2023" class="csl-entry"
role="doc-biblioentry">
Colubri, Andrés. 2023. <span>“<span>GLSL Shaders</span>.”</span> In
<em>Processing for <span>Android</span>: <span>Create Mobile</span>,
<span class="nocase">Sensor-aware</span>, and <span>XR Applications
Using Processing</span></em>, edited by Andrés Colubri, 269–301.
Berkeley, CA: Apress. <a
href="https://doi.org/10.1007/978-1-4842-9585-4_15">https://doi.org/10.1007/978-1-4842-9585-4_15</a>.
</div>
<div id="ref-comninosMathematicalComputerProgramming2006"
class="csl-entry" role="doc-biblioentry">
Comninos, Peter. 2006. <em>Mathematical and <span>Computer Programming
Techniques</span> for <span>Computer Graphics</span></em>. London:
Springer London. <a
href="https://doi.org/10.1007/978-1-84628-292-8">https://doi.org/10.1007/978-1-84628-292-8</a>.
</div>
<div id="ref-copeAlgorithmicMusicComposition2015" class="csl-entry"
role="doc-biblioentry">
Cope, David. 2015. <span>“Algorithmic <span>Music
Composition</span>.”</span> In <em>Patterns of
<span>Intuition</span></em>, edited by Gerhard Nierhaus, 405–16.
Dordrecht: Springer Netherlands. <a
href="https://doi.org/10.1007/978-94-017-9561-6_19">https://doi.org/10.1007/978-94-017-9561-6_19</a>.
</div>
<div id="ref-cruzPsenoughTeach_yourself_demoscene_in_14_days2024"
class="csl-entry" role="doc-biblioentry">
Cruz, Filipe. 2024.
<span>“Psenough/Teach_yourself_demoscene_in_14_days.”</span>
</div>
<div id="ref-cunninghamComputerGraphicsProgramming" class="csl-entry"
role="doc-biblioentry">
Cunningham, Dr Steve. n.d. <span>“Computer <span>Graphics</span>:
<span>Programming</span>, <span>Problem Solving</span>, and <span>Visual
Communication</span>.”</span>
</div>
<div id="ref-deanOxfordHandbookAlgorithmic2018" class="csl-entry"
role="doc-biblioentry">
Dean, R. T., and Alex McLean, eds. 2018. <em>The <span>Oxford</span>
Handbook of Algorithmic Music</em>. Oxford Handbooks. New York, NY:
Oxford University Press.
</div>
<div id="ref-Demoscene2023" class="csl-entry" role="doc-biblioentry">
<span>“Demoscene.”</span> 2023. <em>Wikipedia</em>, September.
</div>
<div id="ref-dewittVisualMusicSearching1987" class="csl-entry"
role="doc-biblioentry">
DeWitt, Tom. 1987. <span>“Visual <span>Music</span>:
<span>Searching</span> for an <span>Aesthetic</span>.”</span>
<em>Leonardo</em> 20 (2): 115–22.
</div>
<div id="ref-earthstinkSquarepusherInterviewCreators2019"
class="csl-entry" role="doc-biblioentry">
earthstink. 2019. <span>“Squarepusher <span>Interview</span>. <span>The
Creators Project</span> - <span>Rencontre</span> Avec
<span>Squarepusher</span>.”</span>
</div>
<div id="ref-formentLivecodingOuMusique2021" class="csl-entry"
role="doc-biblioentry">
Forment, Raphael Maurice. 2021. <span>“Live-Coding Et/Ou Musique En
<span>‘ Plain-Texte ’</span>.”</span> In <em>Journ<span>é</span>es
d’<span>Informatique Musicale</span> 2021</em>, 11.
Visioconf<span>é</span>rences, France: AFIM.
</div>
<div id="ref-gavotyReProgrammerBoites" class="csl-entry"
role="doc-biblioentry">
Gavoty, Élie. n.d. <span>“<span>(Re)programmer des bo<span>î</span>tes
noires</span>,”</span> 129.
</div>
<div id="ref-GenerativeMusic2023" class="csl-entry"
role="doc-biblioentry">
<span>“Generative Music.”</span> 2023. <em>Wikipedia</em>, August.
</div>
<div id="ref-greenDemo" class="csl-entry" role="doc-biblioentry">
Green, Dave. n.d. <span>“Demo or <span>Die</span>!”</span>
<em>Wired</em>. Accessed November 17, 2023.
</div>
<div id="ref-hadji-kyriacouRaymarchingDistanceFields2021"
class="csl-entry" role="doc-biblioentry">
Hadji-Kyriacou, Avelina, and Ognjen Arandjelović. 2021.
<span>“Raymarching <span>Distance Fields</span> with
<span>CUDA</span>.”</span> <em>Electronics</em> 10 (22): 2730. <a
href="https://doi.org/10.3390/electronics10222730">https://doi.org/10.3390/electronics10222730</a>.
</div>
<div id="ref-hansenCraftingCodeDemoscene2014" class="csl-entry"
role="doc-biblioentry">
Hansen, Nicolai Brodersen, Rikke Toft Nørgård, and Kim Halskov. 2014.
<span>“Crafting Code at the Demo-Scene.”</span> In <em>Proceedings of
the 2014 Conference on <span>Designing</span> Interactive Systems</em>,
35–38. <span>DIS</span> ’14. New York, NY, USA: Association for
Computing Machinery. <a
href="https://doi.org/10.1145/2598510.2598526">https://doi.org/10.1145/2598510.2598526</a>.
</div>
<div id="ref-hartleyMultipleViewGeometry" class="csl-entry"
role="doc-biblioentry">
Hartley, Richard, and Andrew Zisserman. n.d. <span>“Multiple <span>View
Geometry</span> in <span>Computer Vision</span>, <span>Second
Edition</span>.”</span>
</div>
<div id="ref-hegronSyntheseImageAlgorithmes1985" class="csl-entry"
role="doc-biblioentry">
Hégron, Gérard. 1985. <em><span>Synth<span>è</span>se d’image:
algorithmes <span>é</span>l<span>é</span>mentaires</span></em>.
<span>Afcet informatique</span>. [Paris: Afcet : Dunod].
</div>
<div id="ref-heikkilaFutureDemoArt" class="csl-entry"
role="doc-biblioentry">
Heikkila, Ville-Matias. n.d. <span>“The <span>Future</span> of
<span>Demo Art</span>: <span>The Demoscene</span> in the 2010s.”</span>
</div>
<div id="ref-herremansFunctionalTaxonomyMusic2017" class="csl-entry"
role="doc-biblioentry">
Herremans, Dorien, Ching-Hua Chuan, and Elaine Chew. 2017. <span>“A
<span>Functional Taxonomy</span> of <span>Music Generation
Systems</span>.”</span> <em>ACM Computing Surveys</em> 50 (5): 69:1–30.
<a
href="https://doi.org/10.1145/3108242">https://doi.org/10.1145/3108242</a>.
</div>
<div id="ref-holmesElectronicExperimentalMusic2009" class="csl-entry"
role="doc-biblioentry">
Holmes, Thom. 2009. <em>Electronic and Experimental Music: Technology,
Music, and Culture</em>. 3rd ed., transf. to digit. pr. New York:
Routledge.
</div>
<div id="ref-jarvelainenAlgorithmicMusicalComposition" class="csl-entry"
role="doc-biblioentry">
Järveläinen, Hanna. n.d. <span>“Algorithmic <span>Musical
Composition</span>.”</span>
</div>
<div id="ref-kirkbrideFoxDotWorksheet2023" class="csl-entry"
role="doc-biblioentry">
Kirkbride, Ryan. 2023. <span>“<span>FoxDot Worksheet</span>.”</span>
</div>
<div id="ref-kirkbrideLiveCodingPython" class="csl-entry"
role="doc-biblioentry">
———. n.d.a. <span>“Live <span>Coding</span> with <span>Python</span> and
<span>SuperCollider</span>.”</span>
</div>
<div id="ref-kirkbrideTROOPCOLLABORATIVETOOL" class="csl-entry"
role="doc-biblioentry">
———. n.d.b. <span>“<span>TROOP</span>: <span>A COLLABORATIVE TOOL FOR
LIVE CODING</span>.”</span>
</div>
<div id="ref-lengyelMathematics3DGame2012" class="csl-entry"
role="doc-biblioentry">
Lengyel, Eric. 2012. <em>Mathematics for <span>3D</span> Game
Programming and Computer Graphics</em>. 3rd ed. Boston, MA: Course
Technology, Cengage Learning.
</div>
<div id="ref-lilandLimitsUsageDemoscene" class="csl-entry"
role="doc-biblioentry">
Liland, Eivind, and David Geier. n.d. <span>“Beyond the
<span>Limits</span>: <span>The Usage</span> of <span>C</span>++ in the
<span>Demoscene</span>.”</span>
</div>
<div id="ref-loewProceedingsCERC2012" class="csl-entry"
role="doc-biblioentry">
Loew, Robert. n.d. <span>“Proceedings of <span>CERC</span> 2012.”</span>
</div>
<div id="ref-marschnerFundamentalsComputerGraphics" class="csl-entry"
role="doc-biblioentry">
Marschner, Steve. n.d. <span>“Fundamentals of <span>Computer
Graphics</span>, <span>Fourth Edition</span>.”</span>
</div>
<div id="ref-mccartneyRethinkingComputerMusic2002" class="csl-entry"
role="doc-biblioentry">
McCartney, James. 2002. <span>“Rethinking the <span>Computer Music
Language</span>: <span>SuperCollider</span>.”</span> <em>Computer Music
Journal - COMPUT MUSIC J</em> 26 (December): 61–68. <a
href="https://doi.org/10.1162/014892602320991383">https://doi.org/10.1162/014892602320991383</a>.
</div>
<div id="ref-molemanMolemanDemosceneArt2012" class="csl-entry"
role="doc-biblioentry">
Moleman. 2012. <span>“Moleman 2 - <span>Demoscene</span> - <span>The
Art</span> of the <span>Algorithms</span> (2012).”</span>
</div>
<div id="ref-montenontEtudeShaderComment" class="csl-entry"
role="doc-biblioentry">
Montenont, Adrien. n.d. <span>“<span>Etude du shader : Comment
cr<span>é</span>er un shader r<span>é</span>aliste et
stylis<span>é</span></span>.”</span>
</div>
<div id="ref-morganViolaChamberOrgan" class="csl-entry"
role="doc-biblioentry">
Morgan, Nigel. n.d. <span>“For Viola and Chamber Organ.”</span>
</div>
<div id="ref-murrayRendu3DIntroduction" class="csl-entry"
role="doc-biblioentry">
Murray, David. n.d. <span>“<span>Rendu 3D - Introduction au pipeline
graphique</span>.”</span>
</div>
<div id="ref-nilsonLiveCodingPractice2007" class="csl-entry"
role="doc-biblioentry">
Nilson, Click. 2007. <span>“Live Coding Practice.”</span> In
<em>Proceedings of the 7th International Conference on <span>New</span>
Interfaces for Musical Expression</em>, 112–17. <span>NIME</span> ’07.
New York, NY, USA: Association for Computing Machinery. <a
href="https://doi.org/10.1145/1279740.1279760">https://doi.org/10.1145/1279740.1279760</a>.
</div>
<div id="ref-nortonLearningDevelopingGames2013" class="csl-entry"
role="doc-biblioentry">
Norton, Terry. 2013. <em>Learning <span>C</span># by Developing Games
with <span>Unity 3D</span> Beginner’s Guide: Learn the Fundamentals of
<span>C</span># to Create Scripts for Your
<span>GameObjects</span></em>. Learn by Doing: Less Theory, More
Results. Birmingham, UK: Packt Publ.
</div>
<div id="ref-pachetCyberneticJamFantasy2004" class="csl-entry"
role="doc-biblioentry">
Pachet, F. 2004. <span>“Beyond the Cybernetic Jam Fantasy: The
Continuator.”</span> <em>IEEE Computer Graphics and Applications</em> 24
(1): 31–35. <a
href="https://doi.org/10.1109/MCG.2004.1255806">https://doi.org/10.1109/MCG.2004.1255806</a>.
</div>
<div id="ref-papadopoulosAIMethodsAlgorithmic" class="csl-entry"
role="doc-biblioentry">
Papadopoulos, George, and Geraint Wiggins. n.d. <span>“<span>AI
Methods</span> for <span>Algorithmic Composition</span>: <span>A
Survey</span>, a <span>Critical View</span> and <span>Future
Prospects</span>.”</span>
</div>
<div id="ref-patelHexagonalGrids2013" class="csl-entry"
role="doc-biblioentry">
Patel, Amit J. 2013. <span>“Hexagonal <span>Grids</span>.”</span> Red
Blob Games.
</div>
<div id="ref-pharrPhysicallyBasedRendering" class="csl-entry"
role="doc-biblioentry">
Pharr, Matt. n.d. <span>“Physically <span>Based Rendering</span>:
<span>From Theory</span> to <span>Implementation</span>.”</span>
</div>
<div id="ref-pharrPhysicallyBasedRendering2023" class="csl-entry"
role="doc-biblioentry">
Pharr, Matt, Wenzel Jakob, and Greg Humphreys. 2023. <em>Physically
<span>Based Rendering</span>, Fourth Edition: <span>From Theory</span>
to <span>Implementation</span></em>. MIT Press.
</div>
<div id="ref-polgarFreaxBriefHistory2016" class="csl-entry"
role="doc-biblioentry">
Polgár, Tamás. 2016. <em>Freax: <span>The Brief History</span> of the
<span>Computer Demoscene</span></em>. CSW-Verlag.
</div>
<div id="ref-pritchettMusicJohnCage1996" class="csl-entry"
role="doc-biblioentry">
Pritchett, James. 1996. <em>The <span>Music</span> of <span>John
Cage</span></em>. Cambridge University Press.
</div>
<div id="ref-psenoughSeminarTeachYourself2020" class="csl-entry"
role="doc-biblioentry">
psenough. 2020. <span>“Seminar: <span>Teach Yourself Demoscene</span> in
14 <span>Days</span> (Speaker: Ps).”</span>
</div>
<div id="ref-pyconczRyanKirkbrideProgramming2018" class="csl-entry"
role="doc-biblioentry">
PyCon CZ. 2018. <span>“Ryan <span>Kirkbride</span>: <span>Programming
Music</span> for <span>Performance</span>: <span>Live</span> Coding with
<span>FoxDot</span>.”</span>
</div>
<div id="ref-reunanenComputerDemosWhat" class="csl-entry"
role="doc-biblioentry">
Reunanen, Markku. n.d.a. <span>“Computer <span>Demos</span>—<span>What
Makes Them Tick</span>?”</span>
</div>
<div id="ref-reunanenDemoscene30Years" class="csl-entry"
role="doc-biblioentry">
———. n.d.b. <span>“Demoscene: 30 Years of Creative Programming.”</span>
</div>
<div id="ref-scheibDemoScene2002" class="csl-entry"
role="doc-biblioentry">
Scheib, Vincent, Theo Engell-Nielsen, Saku Lehtinen, Eric Haines, and
Phil Taylor. 2002. <span>“The Demo Scene.”</span> In <em><span>ACM
SIGGRAPH</span> 2002 Conference Abstracts and Applications</em>, 96–97.
<span>SIGGRAPH</span> ’02. New York, NY, USA: Association for Computing
Machinery. <a
href="https://doi.org/10.1145/1242073.1242125">https://doi.org/10.1145/1242073.1242125</a>.
</div>
<div id="ref-scoatesBrianEnoVisual2013" class="csl-entry"
role="doc-biblioentry">
Scoates, Christopher. 2013. <em>Brian <span>Eno</span>: <span>Visual
Music</span></em>. Chronicle Books.
</div>
<div id="ref-selvarajLiveCodingReview2021" class="csl-entry"
role="doc-biblioentry">
Selvaraj, Ana, Eda Zhang, Leo Porter, and Adalbert Gerald Soosai Raj.
2021. <span>“Live <span>Coding</span>: <span>A Review</span> of the
<span>Literature</span>.”</span> In <em>Proceedings of the 26th
<span>ACM Conference</span> on <span>Innovation</span> and
<span>Technology</span> in <span>Computer Science Education V</span>.
1</em>, 164–70. <span>ITiCSE</span> ’21. New York, NY, USA: Association
for Computing Machinery. <a
href="https://doi.org/10.1145/3430665.3456382">https://doi.org/10.1145/3430665.3456382</a>.
</div>
<div id="ref-shiffmanNatureCode2012" class="csl-entry"
role="doc-biblioentry">
Shiffman, Daniel. 2012. <em>The Nature of Code</em>. Version 1.0,
generated December 6, 2012. s.l.: Selbstverl.
</div>
<div id="ref-svidzinskiLIVEPATCHINGCOLLABORATIF2021" class="csl-entry"
role="doc-biblioentry">
Svidzinski, João, and Messina Marcello. 2021. <span>“<span>LIVE PATCHING
COLLABORATIF</span> - <span>VERS UNE MEDIATION INCLUSIVE AVEC
L</span>’<span>INFORMATIQUE MUSICALE</span>.”</span> In
<em>Journ<span>é</span>es d’<span>Informatique Musicale</span>
2021</em>. Visioconf<span>é</span>rences, France: AFIM.
</div>
<div id="ref-tanimotoPerspectiveEvolutionLive2013" class="csl-entry"
role="doc-biblioentry">
Tanimoto, Steven L. 2013. <span>“A Perspective on the Evolution of Live
Programming.”</span> In <em>2013 1st <span>International Workshop</span>
on <span>Live Programming</span> (<span>LIVE</span>)</em>, 31–34. San
Francisco, CA, USA: IEEE. <a
href="https://doi.org/10.1109/LIVE.2013.6617346">https://doi.org/10.1109/LIVE.2013.6617346</a>.
</div>
<div id="ref-tasajarviDemosceneArtRealtime2004" class="csl-entry"
role="doc-biblioentry">
Tasajärvi, Lassi, Mikael Schustin, Bent Stamnes, and Arttu Tolonen.
2004. <em>Demoscene: The Art of Real-Time</em>. Helsinki: Even Lake
Studios : Katastro. Fi.
</div>
</div>
</section>

<section>
  <h1>Webographie</h1>
  <div id="refs" class="references csl-bib-body hanging-indent"
  role="doc-bibliography">
  <div id="ref-00GettingStarted" class="csl-entry" role="doc-biblioentry">
  <span>“00. <span>Getting Started With SC</span> <span></span>
  <span>SuperCollider</span> 3.12.2 <span>Help</span>.”</span> n.d.
 <a href=" https://doc.sccode.org/Tutorials/Getting-Started/00-Getting-Started-With-SC.html
" target="_blank"> https://doc.sccode.org/Tutorials/Getting-Started/00-Getting-Started-With-SC.html
</a>  </div>
  <div id="ref-ListDemosceneEvents" class="csl-entry"
  role="doc-biblioentry">
  <span>“A List of Demoscene Events – Demoparty.net.”</span> n.d.
 <a href=" https://www.demoparty.net/
" target="_blank"> https://www.demoparty.net/
</a>  </div>
  <div id="ref-Demoscene" class="csl-entry" role="doc-biblioentry">
  <span>“About the <span>Demoscene</span>.”</span> n.d. <em>Demoscene -
  The Art of Coding</em>.
 <a href=" https://demoscene-the-art-of-coding.net/the-demoscene/
" target="_blank"> https://demoscene-the-art-of-coding.net/the-demoscene/
</a>  </div>
  <div id="ref-alexthiMakingMusicShadertoy2022" class="csl-entry"
  role="doc-biblioentry">
  alexthi. 2022. <span>“Making <span>Music</span> in
  <span>Shadertoy</span> - <span>Episode</span> 1 : <span>Basics</span>,
  <span>Waveforms</span>, and a <span>Simple Tune</span>.”</span>
  </div>
  <div id="ref-AlgorithmicComposerGetting" class="csl-entry"
  role="doc-biblioentry">
  <span>“Algorithmic Composer: Getting Started with Algorithmic
  Composition.”</span> n.d.
 <a href=" http://www.algorithmiccomposer.com/p/algorithmic-composition-getting-started.html
" target="_blank"> http://www.algorithmiccomposer.com/p/algorithmic-composition-getting-started.html
</a>  </div>
  <div id="ref-AlgorithmicCompositionComputational" class="csl-entry"
  role="doc-biblioentry">
  <span>“Algorithmic <span>Composition</span>: <span>Computational
  Thinking</span> in <span>Music</span> <span></span> <span>July</span>
  2011 <span></span> <span>Communications</span> of the
  <span>ACM</span>.”</span> n.d.
 <a href=" https://cacm.acm.org/magazines/2011/7/109891-algorithmic-composition/abstract
" target="_blank"> https://cacm.acm.org/magazines/2011/7/109891-algorithmic-composition/abstract
</a>  </div>
  <div id="ref-asiaDemosceneUndergroundArt2019" class="csl-entry"
  role="doc-biblioentry">
  Asia, SIGGRAPH. 2019. <span>“Demoscene: <span>The Underground Art</span>
  of <span class="nocase">Real-time</span>.”</span> <em>ACM SIGGRAPH
  Blog</em>.
  </div>
  <div id="ref-CookieCollective" class="csl-entry" role="doc-biblioentry">
  <span>“Cookie <span>Collective</span>.”</span> n.d. <em>Cookie
  Collective</em>.<a href=" https://cookie.paris/
" target="_blank"> https://cookie.paris/
</a>  </div>
  <div id="ref-crashserverTutorialHowCustomize2020" class="csl-entry"
  role="doc-biblioentry">
  crashserver. 2020a. <span>“Tutorial - <span>How</span> to Customize
  <span>Foxdot</span> with Your Own <span>Synths</span>, Effects,
  Functions and Samples.”</span> <em>CrashServer</em>.
  </div>
  <div id="ref-crashserverTutorialHowRecord2020" class="csl-entry"
  role="doc-biblioentry">
  ———. 2020b. <span>“Tutorial - <span>How</span> to Record
  <span>FoxDot</span> Multi Outputs in a <span>DAW</span>.”</span>
  <em>CrashServer</em>.
  </div>
  <div id="ref-crashserverFoxDotTutorialPrint2022" class="csl-entry"
  role="doc-biblioentry">
  ———. 2022a. <span>“<span>FoxDot Tutorial</span> - <span>Print</span> the
  <span>Code</span> in a Retro <span>CRT</span> Terminal.”</span>
  <em>CrashServer</em>.
  </div>
  <div id="ref-crashserverTutorialWriteYour2022" class="csl-entry"
  role="doc-biblioentry">
  ———. 2022b. <span>“Tutorial - <span>Write</span> Your Own
  <span>FoxDot</span> Custom Function with <span>Python</span>.”</span>
  <em>CrashServer</em>.
  </div>
  <div id="ref-crashserverUltimateFoxDotPython2022" class="csl-entry"
  role="doc-biblioentry">
  ———. 2022c. <span>“Ultimate <span>FoxDot</span> Python Custom
  Functions.”</span> <em>CrashServer</em>.
  </div>
  <div id="ref-Curio" class="csl-entry" role="doc-biblioentry">
  <span>“Curio.”</span> n.d.<a href=" https://curio.scene.org/
" target="_blank"> https://curio.scene.org/
</a>  </div>
  <div id="ref-DemosceneResearch" class="csl-entry"
  role="doc-biblioentry">
  <span>“Demoscene <span>Research</span>.”</span> n.d.
  </div>
  <div id="ref-DemoscenedocYouTube" class="csl-entry"
  role="doc-biblioentry">
  <span>“Demoscenedoc - <span>YouTube</span>.”</span> n.d.
 <a href=" https://www.youtube.com/channel/UC7KMIfYZT0L_ds8HS3Kf-jA
" target="_blank"> https://www.youtube.com/channel/UC7KMIfYZT0L_ds8HS3Kf-jA
</a>  </div>
  <div id="ref-Demozoo" class="csl-entry" role="doc-biblioentry">
  <span>“Demozoo.”</span> n.d.<a href=" https://demozoo.org/
" target="_blank"> https://demozoo.org/
</a>  </div>
  <div id="ref-EvenementsCreative_codingFuz" class="csl-entry"
  role="doc-biblioentry">
  <span>“Evenements:creative_coding [<span>Fuz
  Hackerspace</span>].”</span> n.d.
 <a href=" https://wiki.fuz.re/doku.php?id=evenements:creative_coding
" target="_blank"> https://wiki.fuz.re/doku.php?id=evenements:creative_coding
</a>  </div>
  <div id="ref-AlanTuring20042007" class="csl-entry"
  role="doc-biblioentry">
  <span>“For <span>Alan Turing</span> (2004).”</span> 2007. <em>Robin
  Meier</em>.
  </div>
  <div id="ref-FreaxBriefHistory" class="csl-entry"
  role="doc-biblioentry">
  <span>“Freax: <span>The Brief History</span> of the <span>Computer
  Demoscene</span> - <span class="nocase">Tam<span
  class="nocase">á</span>s</span>, <span class="nocase">Polg<span
  class="nocase">á</span>r</span> - <span>Google Livres</span>.”</span>
  n.d.
 <a href=" https://books.google.fr/books?id=Ha2_EAAAQBAJ&amp;pg=PT29&amp;hl=fr&amp;source=gbs_toc_r&amp;cad=2#v=onepage&amp;q&amp;f=false
" target="_blank"> https://books.google.fr/books?id=Ha2_EAAAQBAJ&amp;pg=PT29&amp;hl=fr&amp;source=gbs_toc_r&amp;cad=2#v=onepage&amp;q&amp;f=false
</a>  </div>
  <div id="ref-GitHubPoetasterSupercolliderlsystems" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>GitHub</span> - Poetaster/Supercollider-Lsystems:
  <span>This</span> Is a Set of Supercollider Compositions to Musicially
  Illustrate Some l-Systems <span>I</span> Wrote.”</span> n.d.
 <a href=" https://github.com/poetaster/supercollider-lsystems
" target="_blank"> https://github.com/poetaster/supercollider-lsystems
</a>  </div>
  <div id="ref-GPUAcceleratedMandelbrot" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>GPU Accelerated Mandelbrot Set</span> in
  <span>Shadertoy</span>.”</span> n.d.
 <a href=" https://arnestenkrona.github.io/blog/2021/03/04/Mandelbrot-in-Shadertoy
" target="_blank"> https://arnestenkrona.github.io/blog/2021/03/04/Mandelbrot-in-Shadertoy
</a>  </div>
  <div id="ref-HomeP5Js" class="csl-entry" role="doc-biblioentry">
  <span>“Home <span></span> P5.js.”</span> n.d.<a href=" https://p5js.org/
" target="_blank"> https://p5js.org/
</a>  </div>
  <div id="ref-SyntheseSonore2002" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>La synth<span>è</span>se sonore</span>.”</span> 2002.
  <em>Audiofanzine</em>.
 <a href=" https://fr.audiofanzine.com/synthetiseur-rack/editorial/dossiers/la-synthese-sonore.html
" target="_blank"> https://fr.audiofanzine.com/synthetiseur-rack/editorial/dossiers/la-synthese-sonore.html
</a>  </div>
  <div id="ref-SyntheseSonoreAudiofanzine" class="csl-entry"
  role="doc-biblioentry">
  <span>“La Synth<span>è</span>se Sonore -
  <span>Audiofanzine</span>.”</span> n.d.
 <a href=" https://fr.audiofanzine.com/synthetiseur-rack/editorial/dossiers/la-synthese-sonore.html
" target="_blank"> https://fr.audiofanzine.com/synthetiseur-rack/editorial/dossiers/la-synthese-sonore.html
</a>  </div>
  <div id="ref-LearnOpenGLExtensive" class="csl-entry"
  role="doc-biblioentry">
  <span>“Learn <span>OpenGL</span>, Extensive Tutorial Resource for
  Learning <span>Modern OpenGL</span>.”</span> n.d.
 <a href=" https://learnopengl.com/
" target="_blank"> https://learnopengl.com/
</a>  </div>
  <div id="ref-LivecodingTutorialsTips" class="csl-entry"
  role="doc-biblioentry">
  <span>“Livecoding <span>Tutorials</span> and Tips -
  <span>YouTube</span>.”</span> n.d.
 <a href=" https://www.youtube.com/playlist?list=PLIKH_fHtdeLlF9gUUUNSVY9n0iZnZ2yUL
" target="_blank"> https://www.youtube.com/playlist?list=PLIKH_fHtdeLlF9gUUUNSVY9n0iZnZ2yUL
</a>  </div>
  <div id="ref-Livecoding_website" class="csl-entry"
  role="doc-biblioentry">
  <span>“Livecoding_website.”</span> n.d.<a href=" https://livecoding.fr/
" target="_blank"> https://livecoding.fr/
</a>  </div>
  <div id="ref-MaxTfirnUniversity" class="csl-entry"
  role="doc-biblioentry">
  <span>“Max <span>Tfirn</span> <span></span> <span>University</span> of
  <span>Virginia</span> - <span>Academia</span>.edu.”</span> n.d.
 <a href=" https://virginia.academia.edu/MaxTfirn
" target="_blank"> https://virginia.academia.edu/MaxTfirn
</a>  </div>
  <div id="ref-MusicAlgoPetiteIntroduction" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>MusicAlgo – Petite introduction pratique aux musiques
  g<span>é</span>n<span>é</span>ratives et algorithmiques</span>.”</span>
  n.d.
  </div>
  <div id="ref-MyApproachAutomatic" class="csl-entry"
  role="doc-biblioentry">
  <span>“My <span>Approach</span> to <span>Automatic Musical
  Composition</span>.”</span> n.d.
 <a href=" https://flujoo.github.io/en/my-approach-to-automatic-musical-composition/
" target="_blank"> https://flujoo.github.io/en/my-approach-to-automatic-musical-composition/
</a>  </div>
  <div id="ref-NeHeProductionsEverything" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>NeHe Productions</span> - <span>Everything
  OpenGL</span>.”</span> n.d.<a href=" http://nehe.gamedev.net/
" target="_blank"> http://nehe.gamedev.net/
</a>  </div>
  <div id="ref-PaintingMathGentle2023" class="csl-entry"
  role="doc-biblioentry">
  <span>“Painting with <span>Math</span>: <span>A Gentle Study</span> of
  <span>Raymarching</span> - <span>Maxime Heckel</span>’s
  <span>Blog</span>.”</span> 2023.
 <a href=" https://blog.maximeheckel.com/posts/painting-with-math-a-gentle-study-of-raymarching/
" target="_blank"> https://blog.maximeheckel.com/posts/painting-with-math-a-gentle-study-of-raymarching/
</a>  </div>
  <div id="ref-PhysicallyBasedRendering" class="csl-entry"
  role="doc-biblioentry">
  <span>“Physically <span>Based Rendering</span>: <span>From Theory</span>
  to <span>Implementation</span>.”</span> n.d.<a href=" https://www.pbr-book.org/
" target="_blank"> https://www.pbr-book.org/
</a>  </div>
  <div id="ref-PoetasterMarkWasheim" class="csl-entry"
  role="doc-biblioentry">
  <span>“Poetaster (<span>Mark Washeim</span>) <span><span
  class="math inline">⋅</span></span> <span>GitHub</span>.”</span> n.d.
 <a href=" https://github.com/poetaster
" target="_blank"> https://github.com/poetaster
</a>  </div>
  <div id="ref-QUESTCEQUE" class="csl-entry" role="doc-biblioentry">
  <span>“<span>QU’EST-CE QUE LA MUSIQUE ALGORITHMIQUE ? –
  MusicAlgo</span>.”</span> n.d.
  </div>
  <div id="ref-quilezInigoQuilez" class="csl-entry"
  role="doc-biblioentry">
  Quilez, Inigo. n.d. <span>“Inigo <span>Quilez</span>.”</span>
 <a href=" https://iquilezles.org
" target="_blank"> https://iquilezles.org
</a>  </div>
  <div id="ref-RayMarching" class="csl-entry" role="doc-biblioentry">
  <span>“Ray <span>Marching</span>.”</span> n.d. <em>Michael Walczyk</em>.
 <a href=" https://michaelwalczyk.com/blog-ray-marching.html
" target="_blank"> https://michaelwalczyk.com/blog-ray-marching.html
</a>  </div>
  <div id="ref-RayMarchingSignedd" class="csl-entry"
  role="doc-biblioentry">
  <span>“Ray <span>Marching</span> and <span>Signed Distance
  Functions</span>.”</span> n.d. <em>Zero Wind :: Jamie Wong</em>.
 <a href=" http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/
" target="_blank"> http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/
</a>  </div>
  <div id="ref-RayTracingOne" class="csl-entry" role="doc-biblioentry">
  <span>“Ray <span>Tracing</span> in <span>One Weekend
  Series</span>.”</span> n.d.<a href=" https://raytracing.github.io/
" target="_blank"> https://raytracing.github.io/
</a>  </div>
  <div id="ref-RealtimeDreamyCloudscapes2023" class="csl-entry"
  role="doc-biblioentry">
  <span>“Real-Time Dreamy <span>Cloudscapes</span> with <span>Volumetric
  Raymarching</span> - <span>Maxime Heckel</span>’s
  <span>Blog</span>.”</span> 2023.
 <a href=" https://blog.maximeheckel.com/posts/real-time-cloudscapes-with-volumetric-raymarching/
" target="_blank"> https://blog.maximeheckel.com/posts/real-time-cloudscapes-with-volumetric-raymarching/
</a>  </div>
  <div id="ref-RefractionDispersionOther2023" class="csl-entry"
  role="doc-biblioentry">
  <span>“Refraction, Dispersion, and Other Shader Light Effects -
  <span>Maxime Heckel</span>’s <span>Blog</span>.”</span> 2023.
 <a href=" https://blog.maximeheckel.com/posts/refraction-dispersion-and-other-shader-light-effects/
" target="_blank"> https://blog.maximeheckel.com/posts/refraction-dispersion-and-other-shader-light-effects/
</a>  </div>
  <div id="ref-RenderingMandelbrotSet" class="csl-entry"
  role="doc-biblioentry">
  <span>“Rendering the <span>Mandelbrot Set</span> with Shaders —
  <span>Using OpenGL</span> and <span>GLSL</span> &gt;&gt;
  <span>Arukiap</span>.”</span> n.d.
 <a href=" https://arukiap.github.io/fractals/2019/06/02/rendering-the-mandelbrot-set-with-shaders.html
" target="_blank"> https://arukiap.github.io/fractals/2019/06/02/rendering-the-mandelbrot-set-with-shaders.html
</a>  </div>
  <div id="ref-Revision2023April" class="csl-entry"
  role="doc-biblioentry">
  <span>“Revision 2023 - <span>April</span> 7th to 10th.”</span> n.d.
 <a href=" https://2023.revision-party.net/
" target="_blank"> https://2023.revision-party.net/
</a>  </div>
  <div id="ref-ScratchapixelLearnComputer" class="csl-entry"
  role="doc-biblioentry">
  <span>“Scratchapixel 4.0, <span>Learn Computer Graphics
  Programming</span>.”</span> n.d.
 <a href=" https://www.scratchapixel.com/index.html
" target="_blank"> https://www.scratchapixel.com/index.html
</a>  </div>
  <div id="ref-SebastianLagueYouTube" class="csl-entry"
  role="doc-biblioentry">
  <span>“Sebastian <span>Lague</span> - <span>YouTube</span>.”</span> n.d.
 <a href=" https://www.youtube.com/@SebastianLague
" target="_blank"> https://www.youtube.com/@SebastianLague
</a>  </div>
  <div id="ref-ShadertoyTutorialPart" class="csl-entry"
  role="doc-biblioentry">
  <span>“Shadertoy <span>Tutorial Part</span> 1 -
  <span>Intro</span>.”</span> n.d.
 <a href=" https://inspirnathan.com/posts/47-shadertoy-tutorial-part-1
" target="_blank"> https://inspirnathan.com/posts/47-shadertoy-tutorial-part-1
</a>  </div>
  <div id="ref-SimonDevYouTube" class="csl-entry" role="doc-biblioentry">
  <span>“<span>SimonDev</span> - <span>YouTube</span>.”</span> n.d.
 <a href=" https://www.youtube.com/@simondev758
" target="_blank"> https://www.youtube.com/@simondev758
</a>  </div>
  <div id="ref-SizeCoding" class="csl-entry" role="doc-biblioentry">
  <span>“<span>SizeCoding</span>.”</span> n.d.
 <a href=" http://www.sizecoding.org/wiki/Main_Page
" target="_blank"> http://www.sizecoding.org/wiki/Main_Page
</a>  </div>
  <div id="ref-StackGl" class="csl-entry" role="doc-biblioentry">
  <span>“Stack.gl.”</span> n.d.<a href=" https://stack.gl/
" target="_blank"> https://stack.gl/
</a>  </div>
  <div id="ref-ArtCodeYouTube" class="csl-entry" role="doc-biblioentry">
  <span>“The <span>Art</span> of <span>Code</span> -
  <span>YouTube</span>.”</span> n.d.
 <a href=" https://www.youtube.com/@TheArtofCodeIsCool/videos
" target="_blank"> https://www.youtube.com/@TheArtofCodeIsCool/videos
</a>  </div>
  <div id="ref-BookShaders" class="csl-entry" role="doc-biblioentry">
  <span>“The <span>Book</span> of <span>Shaders</span>.”</span> n.d.
  <em>The Book of Shaders</em>.<a href=" https://thebookofshaders.com/
" target="_blank"> https://thebookofshaders.com/
</a>  </div>
  <div id="ref-OxfordHandbookAlgorithmic" class="csl-entry"
  role="doc-biblioentry">
  <span>“The <span>Oxford Handbook</span> of <span>Algorithmic
  Music</span> - <span>R</span>. <span>T</span>. <span>Dean</span> -
  <span>Google Livres</span>.”</span> n.d.
 <a href=" https://books.google.fr/books?hl=fr&amp;lr=&amp;id=mA5EDwAAQBAJ&amp;oi=fnd&amp;pg=PP1&amp;dq=algorithmic+music&amp;ots=FTS7ayXyxj&amp;sig=it5d4AewFAJ1YT9zuLxb54-6RR8#v=onepage&amp;q=algorithmic%20music&amp;f=false
" target="_blank"> https://books.google.fr/books?hl=fr&amp;lr=&amp;id=mA5EDwAAQBAJ&amp;oi=fnd&amp;pg=PP1&amp;dq=algorithmic+music&amp;ots=FTS7ayXyxj&amp;sig=it5d4AewFAJ1YT9zuLxb54-6RR8#v=onepage&amp;q=algorithmic%20music&amp;f=false
</a>  </div>
  <div id="ref-ThreeJsJavaScript" class="csl-entry"
  role="doc-biblioentry">
  <span>“Three.js – <span>JavaScript 3D Library</span>.”</span> n.d.
 <a href=" https://threejs.org/
" target="_blank"> https://threejs.org/
</a>  </div>
  <div id="ref-TodePondYouTube" class="csl-entry" role="doc-biblioentry">
  <span>“<span>TodePond</span> - <span>YouTube</span>.”</span> n.d.
 <a href=" https://www.youtube.com/@TodePond/videos
" target="_blank"> https://www.youtube.com/@TodePond/videos
</a>  </div>
  <div id="ref-TutorialHowCustomize" class="csl-entry"
  role="doc-biblioentry">
  <span>“Tutorial - <span>How</span> to Customize <span>Foxdot</span> with
  Your Own <span>Synths</span>, Effects, Functions and Samples. -
  <span>CrashServer</span>.”</span> n.d.
 <a href=" https://crashserver.fr/how-to-customize-foxdot-with-your-own-synths-effects-functions-and-samples/
" target="_blank"> https://crashserver.fr/how-to-customize-foxdot-with-your-own-synths-effects-functions-and-samples/
</a>  </div>
  <div id="ref-vachharNoiseCreativeCoding2021" class="csl-entry"
  role="doc-biblioentry">
  Vachhar, Varun. 2021. <span>“Noise in <span>Creative
  Coding</span>.”</span> <em>Varun Vachhar</em>.<a href=" https://varun.ca/noise/
" target="_blank"> https://varun.ca/noise/
</a>  </div>
  <div id="ref-vachharIridescentCrystalRaymarching2023" class="csl-entry"
  role="doc-biblioentry">
  ———. 2023. <span>“Iridescent Crystal with Raymarching and Signed
  Distance Fields.”</span> <em>Varun Vachhar</em>.
 <a href=" https://varun.ca/ray-march-sdf/
" target="_blank"> https://varun.ca/ray-march-sdf/
</a>  </div>
  <div id="ref-vaughnShaderResources2021" class="csl-entry"
  role="doc-biblioentry">
  Vaughn, Nathan. 2021. <span>“Shader <span>Resources</span>.”</span>
  <em>Inspirnathan</em>.
 <a href=" https://inspirnathan.com/posts/64-shader-resources
" target="_blank"> https://inspirnathan.com/posts/64-shader-resources
</a>  </div>
  <div id="ref-VisualModelsMorphogenesis" class="csl-entry"
  role="doc-biblioentry">
  <span>“Visual <span>Models</span> of <span>Morphogenesis</span>:
  <span>Title</span> Page.”</span> n.d.
 <a href=" http://algorithmicbotany.org/vmm-deluxe/TitlePage.html
" target="_blank"> http://algorithmicbotany.org/vmm-deluxe/TitlePage.html
</a>  </div>
  <div id="ref-VisualMusicProQuest" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>Visual Music - ProQuest</span>.”</span> n.d.
 <a href=" https://www.proquest.com/openview/2a49f35f8bd47be0e91433c1c5944092/1?pq-origsite=gscholar&amp;cbl=1817017
" target="_blank"> https://www.proquest.com/openview/2a49f35f8bd47be0e91433c1c5944092/1?pq-origsite=gscholar&amp;cbl=1817017
</a>  </div>
  <div id="ref-vivoPatriciogonzalezvivoLygia2024" class="csl-entry"
  role="doc-biblioentry">
  Vivo, Patricio Gonzalez. 2024.
  <span>“Patriciogonzalezvivo/Lygia.”</span>
  </div>
  <div id="ref-WaybackMachine2004" class="csl-entry"
  role="doc-biblioentry">
  <span>“Wayback <span>Machine</span>.”</span> 2004.
 <a href=" https://web.archive.org/web/20040616151606/http://www.acid.org/./memoire/images/sfdemo04/IA4_1demosceneshoreval.pdf
" target="_blank"> https://web.archive.org/web/20040616151606/http://www.acid.org/./memoire/images/sfdemo04/IA4_1demosceneshoreval.pdf
</a>  </div>
  <div id="ref-WaybackMachine2016" class="csl-entry"
  role="doc-biblioentry">
  ———. 2016.
 <a href=" https://web.archive.org/web/20160602200142/http://www.isea2010ruhr.org/files/redaktion/pdf/isea2010_proceedings_p11_hartmann.pdf
" target="_blank"> https://web.archive.org/web/20160602200142/http://www.isea2010ruhr.org/files/redaktion/pdf/isea2010_proceedings_p11_hartmann.pdf
</a>  </div>
  <div id="ref-WebGLFundamentals" class="csl-entry"
  role="doc-biblioentry">
  <span>“<span>WebGL Fundamentals</span>.”</span> n.d.
 <a href=" https://webglfundamentals.org
" target="_blank"> https://webglfundamentals.org
</a>  </div>
  </div>
</section>



<script>
  document.addEventListener("DOMContentLoaded", function() {
      const tocContent = document.getElementById('toc-content');
      const headers = document.querySelectorAll('h1, h2, h3');
      headers.forEach((header, index) => {
          const id = `header-${index}`;
          header.id = id;
          const link = document.createElement('a');
          link.href = `#${id}`;
          link.textContent = header.textContent;
          link.classList.add(`toc-${header.tagName.toLowerCase()}`);
          tocContent.appendChild(link);
      });

      // Assurez-vous que la case est décochée au chargement de la page
      document.getElementById('toc-toggle').checked = false;
  });
    </script>
    </div>
</body>
</html>
